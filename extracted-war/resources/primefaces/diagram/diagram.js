(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(b){return 0==b?0:b>0?1:-1});var U={subtract:function(d,c){return{x:d.x-c.x,y:d.y-c.y}},dotProduct:function(d,c){return d.x*c.x+d.y*c.y},square:function(b){return Math.sqrt(b.x*b.x+b.y*b.y)},scale:function(d,c){return{x:d.x*c,y:d.y*c}}},T=64,S=Math.pow(2,-T-1),R=function(x,w){for(var v=[],u=P(x,w),t=w.length-1,s=2*t-1,r=O(u,s,v,0),q=U.subtract(x,w[0]),l=U.square(q),g=0,f=0;r>f;f++){q=U.subtract(x,K(w,t,v[f],null,null));var a=U.square(q);l>a&&(l=a,g=v[f])}return q=U.subtract(x,w[t]),a=U.square(q),l>a&&(l=a,g=1),{location:g,distance:l}},Q=function(e,d){var f=R(e,d);return{point:K(d,d.length-1,f.location,null,null),location:f.location}},P=function(ae,ad){for(var ac=ad.length-1,ab=2*ac-1,aa=[],Z=[],Y=[],X=[],W=[[1,0.6,0.3,0.1],[0.4,0.6,0.6,0.4],[0.1,0.3,0.6,1]],V=0;ac>=V;V++){aa[V]=U.subtract(ad[V],ae)}for(var V=0;ac-1>=V;V++){Z[V]=U.subtract(ad[V+1],ad[V]),Z[V]=U.scale(Z[V],3)}for(var x=0;ac-1>=x;x++){for(var w=0;ac>=w;w++){Y[x]||(Y[x]=[]),Y[x][w]=U.dotProduct(Z[x],aa[w])}}for(V=0;ab>=V;V++){X[V]||(X[V]=[]),X[V].y=0,X[V].x=parseFloat(V)/ab}for(var v=ac,u=ac-1,t=0;v+u>=t;t++){var a=Math.max(0,t-u),af=Math.min(t,v);for(V=a;af>=V;V++){j=t-V,X[V+j].y+=Y[j][V]*W[j][V]}}return X},O=function(v,u,t,s){var r,l,k=[],i=[],h=[],g=[];switch(N(v,u)){case 0:return 0;case 1:if(s>=T){return t[0]=(v[0].x+v[u].x)/2,1}if(M(v,u)){return t[0]=L(v,u),1}}K(v,u,0.5,k,i),r=O(k,u,h,s+1),l=O(i,u,g,s+1);for(var b=0;r>b;b++){t[b]=h[b]}for(var b=0;l>b;b++){t[b+r]=g[b]}return r+l},N=function(h,g){var m,l,k=0;m=l=Math.sgn(h[0].y);for(var i=1;g>=i;i++){m=Math.sgn(h[i].y),m!=l&&k++,l=m}return k},M=function(am,al){var ak,aj,ai,ah,ag,af,ae,ad,ac,ab,aa,Z,Y,X,W,V;af=am[0].y-am[al].y,ae=am[al].x-am[0].x,ad=am[0].x*am[al].y-am[al].x*am[0].y;for(var x=max_distance_below=0,w=1;al>w;w++){var c=af*am[w].x+ae*am[w].y+ad;c>x?x=c:max_distance_below>c&&(max_distance_below=c)}return aa=0,Z=1,Y=0,X=af,W=ae,V=ad-x,ac=aa*W-X*Z,ab=1/ac,aj=(Z*V-W*Y)*ab,X=af,W=ae,V=ad-max_distance_below,ac=aa*W-X*Z,ab=1/ac,ai=(Z*V-W*Y)*ab,ah=Math.min(aj,ai),ag=Math.max(aj,ai),ak=ag-ah,S>ak?1:0},L=function(v,u){var t=1,s=0,r=v[u].x-v[0].x,q=v[u].y-v[0].y,p=v[0].x-0,o=v[0].y-0,n=r*s-q*t,m=1/n,l=(r*o-q*p)*m;return 0+t*l},K=function(k,i,q,p,o){for(var n=[[]],m=0;i>=m;m++){n[0][m]=k[m]}for(var l=1;i>=l;l++){for(var m=0;i-l>=m;m++){n[l]||(n[l]=[]),n[l][m]||(n[l][m]={}),n[l][m].x=(1-q)*n[l-1][m].x+q*n[l-1][m+1].x,n[l][m].y=(1-q)*n[l-1][m].y+q*n[l-1][m+1].y}}if(null!=p){for(m=0;i>=m;m++){p[m]=n[m][0]}}if(null!=o){for(m=0;i>=m;m++){o[m]=n[i-m][m]}}return n[i][0]},J={},I=function(v){var u=J[v];if(!u){u=[];var t=function(){return function(a){return Math.pow(a,v)}},s=function(){return function(a){return Math.pow(1-a,v)}},r=function(b){return function(){return b}},q=function(){return function(b){return b}},p=function(){return function(b){return 1-b}},o=function(b){return function(a){for(var f=1,e=0;e<b.length;e++){f*=b[e](a)}return f}};u.push(new t);for(var n=1;v>n;n++){for(var m=[new r(v)],l=0;v-n>l;l++){m.push(new q)}for(var l=0;n>l;l++){m.push(new p)}u.push(new o(m))}u.push(new s),J[v]=u}return u},H=function(h,g){for(var m=I(h.length-1),l=0,k=0,i=0;i<h.length;i++){l+=h[i].x*m[i](g),k+=h[i].y*m[i](g)}return{x:l,y:k}},G=function(d,c){return Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2))},F=function(b){return b[0].x==b[1].x&&b[0].y==b[1].y},E=function(k,i,q){if(F(k)){return{point:k[0],location:i}}for(var p=H(k,i),o=0,n=i,m=q>0?1:-1,l=null;o<Math.abs(q);){n+=0.005*m,l=H(k,n),o+=G(l,p),p=l}return{point:l,location:n}},D=function(h){if(F(h)){return 0}for(var g=H(h,0),m=0,l=0,k=1,i=null;1>l;){l+=0.005*k,i=H(h,l),m+=G(i,g),g=i}return m},C=function(e,d,f){return E(e,d,f).point},B=function(e,d,f){return E(e,d,f).location},A=function(h,g){var m=H(h,g),l=H(h.slice(0,h.length-1),g),k=l.y-m.y,i=l.x-m.x;return 0==k?1/0:Math.atan(k/i)},z=function(f,e,h){var g=E(f,e,h);return g.location>1&&(g.location=1),g.location<0&&(g.location=0),A(f,g.location)},y=function(s,r,q,p){p=null==p?0:p;var o=E(s,r,p),n=A(s,o.location),m=Math.atan(-1/n),l=q/2*Math.sin(m),k=q/2*Math.cos(m);return[{x:o.point.x+k,y:o.point.y+l},{x:o.point.x-k,y:o.point.y-l}]};this.jsBezier={distanceFromCurve:R,gradientAtPoint:A,gradientAtPointAlongCurveFrom:z,nearestPointOnCurve:Q,pointOnCurve:H,pointAlongCurveFrom:C,perpendicularToCurveAt:y,locationAlongCurveFrom:B,getLength:D}}).call("undefined"!=typeof window?window:this),function(){var k=this,i=k.Biltong={},q=function(b){return"[object Array]"===Object.prototype.toString.call(b)},p=function(e,c,f){return e=q(e)?e:[e.x,e.y],c=q(c)?c:[c.x,c.y],f(e,c)},o=i.gradient=function(d,c){return p(d,c,function(f,e){return e[0]==f[0]?e[1]>f[1]?1/0:-1/0:e[1]==f[1]?e[0]>f[0]?0:-0:(e[1]-f[1])/(e[0]-f[0])})},n=(i.normal=function(d,c){return -1/o(d,c)},i.lineLength=function(d,c){return p(d,c,function(f,e){return Math.sqrt(Math.pow(e[1]-f[1],2)+Math.pow(e[0]-f[0],2))})},i.quadrant=function(d,c){return p(d,c,function(f,e){return e[0]>f[0]?e[1]>f[1]?2:1:e[0]==f[0]?e[1]>f[1]?2:1:e[1]>f[1]?3:4})}),m=(i.theta=function(d,c){return p(d,c,function(f,e){var s=o(f,e),r=Math.atan(s),h=n(f,e);return(4==h||3==h)&&(r+=Math.PI),0>r&&(r+=2*Math.PI),r})},i.intersects=function(A,z){var y=A.x,x=A.x+A.w,w=A.y,v=A.y+A.h,u=z.x,t=z.x+z.w,s=z.y,r=z.y+z.h;return u>=y&&x>=u&&s>=w&&v>=s||t>=y&&x>=t&&s>=w&&v>=s||u>=y&&x>=u&&r>=w&&v>=r||t>=y&&x>=u&&r>=w&&v>=r||y>=u&&t>=y&&w>=s&&r>=w||x>=u&&t>=x&&w>=s&&r>=w||y>=u&&t>=y&&v>=s&&r>=v||x>=u&&t>=y&&v>=s&&r>=v},i.encloses=function(C,B,A){var z=C.x,y=C.x+C.w,x=C.y,w=C.y+C.h,v=B.x,u=B.x+B.w,t=B.y,s=B.y+B.h,r=function(f,c,h,g){return A?c>=f&&h>=g:c>f&&h>g};return r(z,v,y,u)&&r(x,t,w,s)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),l=[null,[-1,-1],[-1,1],[1,1],[1,-1]];i.pointOnLine=function(v,u,t){var s=o(v,u),r=n(v,u),h=t>0?m[r]:l[r],g=Math.atan(s),f=Math.abs(t*Math.sin(g))*h[1],e=Math.abs(t*Math.cos(g))*h[0];return{x:v.x+e,y:v.y+f}},i.perpendicularLineTo=function(r,e,w){var v=o(r,e),u=Math.atan(-1/v),t=w/2*Math.sin(u),s=w/2*Math.cos(u);return[{x:e.x+s,y:e.y+t},{x:e.x-s,y:e.y-t}]}}.call("undefined"!=typeof window?window:this),function(){var an=this,am={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},al=function(g,f,k){k=k||g.parentNode;for(var i=k.querySelectorAll(f),h=0;h<i.length;h++){if(i[h]===g){return !0}}return !1},ak=function(b){return"string"==typeof b||b.constructor===String?document.getElementById(b):b},aj=function(b){return b.srcElement||b.target},ai=function(h,g,m,l){if(l){if("undefined"!=typeof h.path){return{path:h.path,end:h.path.indexOf(m)}}var k={path:[],end:-1},i=function(b){k.path.push(b),b===m?k.end=k.path.length-1:null!=b.parentNode&&i(b.parentNode)};return i(g),k}return{path:[g],end:1}},ah=function(f,e){for(var h=0,g=f.length;g>h&&f[h]!=e;h++){}h<f.length&&f.splice(h,1)},ag=1,af=function(f,e,h){var g=ag++;return f.__ta=f.__ta||{},f.__ta[e]=f.__ta[e]||{},f.__ta[e][g]=h,h.__tauid=g,g},ae=function(f,e,h){if(f.__ta&&f.__ta[e]&&delete f.__ta[e][h.__tauid],h.__taExtra){for(var g=0;g<h.__taExtra.length;g++){N(f,h.__taExtra[g][0],h.__taExtra[g][1])}h.__taExtra.length=0}h.__taUnstore&&h.__taUnstore()},ad=function(e,c,m,l){if(null==e){return m}var k=e.split(","),f=function(i){f.__tauid=m.__tauid;var h=aj(i),d=h,b=ai(i,h,c,null!=e);if(-1!=b.end){for(var a=0;a<b.end;a++){d=b.path[a];for(var o=0;o<k.length;o++){al(d,k[o],c)&&m.apply(d,arguments)}}}};return ac(m,l,f),f},ac=function(e,d,f){e.__taExtra=e.__taExtra||[],e.__taExtra.push([d,f])},ab=function(g,f,k,i){if(S&&O[f]){var h=ad(i,g,k,O[f]);P(g,O[f],h,k)}"focus"===f&&null==g.getAttribute("tabindex")&&g.setAttribute("tabindex","1"),P(g,f,ad(i,g,k,f),k)},aa=function(g,e,o,n){if(null==g.__taSmartClicks){var m=function(a){g.__tad=I(a)},l=function(a){g.__tau=I(a)},k=function(a){if(g.__tad&&g.__tau&&g.__tad[0]===g.__tau[0]&&g.__tad[1]===g.__tau[1]){for(var d=0;d<g.__taSmartClicks.length;d++){g.__taSmartClicks[d].apply(aj(a),[a])}}};ab(g,"mousedown",m,n),ab(g,"mouseup",l,n),ab(g,"click",k,n),g.__taSmartClicks=[]}g.__taSmartClicks.push(o),o.__taUnstore=function(){ah(g.__taSmartClicks,o)}},Z={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},Y=function(d,c){return function(s,r,o,m){if("contextmenu"==r&&Q){ab(s,r,o,m)}else{if(null==s.__taTapHandler){var g=s.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},f=function(u){for(var t=aj(u),q=ai(u,t,s,null!=m),p=!1,k=0;k<q.end;k++){if(p){return}t=q.path[k];for(var v=0;v<g.downSelectors.length;v++){if(null==g.downSelectors[v]||al(t,g.downSelectors[v],s)){g.down=!0,setTimeout(b,d),setTimeout(a,c),p=!0;break}}}},e=function(q){if(g.down){var n,w=aj(q);g.taps++;var v=R(q);for(var u in Z){if(Z.hasOwnProperty(u)){var t=Z[u];if(t.touches===v&&(1===t.taps||t.taps===g.taps)){for(var p=0;p<g[u].length;p++){n=ai(q,w,s,null!=g[u][p][1]);for(var k=0;k<n.end;k++){if(w=n.path[k],null==g[u][p][1]||al(w,g[u][p][1],s)){g[u][p][0].apply(w,[q]);break}}}}}}}},b=function(){g.down=!1},a=function(){g.taps=0};ab(s,"mousedown",f),ab(s,"mouseup",e)}s.__taTapHandler.downSelectors.push(m),s.__taTapHandler[r].push([o,m]),o.__taUnstore=function(){ah(s.__taTapHandler[r],o)}}}},W=function(g,f,k,i){for(var h in k.__tamee[g]){k.__tamee[g].hasOwnProperty(h)&&k.__tamee[g][h].apply(i,[f])}},U=function(){var b=[];return function(a,l,k,i){if(!a.__tamee){a.__tamee={over:!1,mouseenter:[],mouseexit:[]};var e=function(h){var g=aj(h);(null==i&&g==a&&!a.__tamee.over||al(g,i,a)&&(null==g.__tamee||!g.__tamee.over))&&(W("mouseenter",h,a,g),g.__tamee=g.__tamee||{},g.__tamee.over=!0,b.push(g))},c=function(n){for(var m=aj(n),h=0;h<b.length;h++){m!=b[h]||al(n.relatedTarget||n.toElement,"*",m)||(m.__tamee.over=!1,b.splice(h,1),W("mouseexit",n,a,m))}};P(a,"mouseover",ad(i,a,e,"mouseover"),e),P(a,"mouseout",ad(i,a,c,"mouseout"),c)}k.__taUnstore=function(){delete a.__tamee[l][k.__tauid]},af(a,l,k),a.__tamee[l][k.__tauid]=k}},S="ontouchstart" in document.documentElement,Q="onmousedown" in document.documentElement,O={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},M=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,f=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=f.exec(d)&&(e=parseFloat(RegExp.$1))}return e}(),K=M>-1&&9>M,J=function(f,e){if(null==f){return[0,0]}var h=T(f),g=V(h,0);return[g[e+"X"],g[e+"Y"]]},I=function(b){return null==b?[0,0]:K?[b.clientX+document.documentElement.scrollLeft,b.clientY+document.documentElement.scrollTop]:J(b,"page")},H=function(b){return J(b,"screen")},X=function(b){return J(b,"client")},V=function(d,c){return d.item?d.item(c):d[c]},T=function(b){return b.touches&&b.touches.length>0?b.touches:b.changedTouches&&b.changedTouches.length>0?b.changedTouches:b.targetTouches&&b.targetTouches.length>0?b.targetTouches:[b]},R=function(b){return T(b).length},P=function(g,f,k,i){if(af(g,f,k),i.__tauid=k.__tauid,g.addEventListener){g.addEventListener(f,k,!1)}else{if(g.attachEvent){var h=f+k.__tauid;g["e"+h]=k,g[h]=function(){g["e"+h]&&g["e"+h](window.event)},g.attachEvent("on"+f,g[h])}}},N=function(e,d,f){null!=f&&L(e,function(){var b=ak(this);if(ae(b,d,f),null!=f.__tauid){if(b.removeEventListener){b.removeEventListener(d,f,!1),S&&O[d]&&b.removeEventListener(O[d],f,!1)}else{if(this.detachEvent){var a=d+f.__tauid;b[a]&&b.detachEvent("on"+d,b[a]),b[a]=null,b["e"+a]=null}}}f.__taTouchProxy&&N(e,f.__taTouchProxy[1],f.__taTouchProxy[0])})},L=function(e,d){if(null!=e){e="undefined"!=typeof Window&&"unknown"!=typeof e.top&&e==e.top?[e]:"string"!=typeof e&&null==e.tagName&&null!=e.length?e:"string"==typeof e?document.querySelectorAll(e):[e];for(var f=0;f<e.length;f++){d.apply(e[f])}}};an.Mottle=function(b){b=b||{};var o=b.clickThreshold||250,n=b.dblClickThreshold||450,m=new U,l=new Y(o,n),k=b.smartClicks,d=function(g,f,i,h){null!=i&&L(g,function(){var c=ak(this);k&&"click"===f?aa(c,f,i,h):"tap"===f||"dbltap"===f||"contextmenu"===f?l(c,f,i,h):"mouseenter"===f||"mouseexit"==f?m(c,f,i,h):ab(c,f,i,h)})};this.remove=function(c){return L(c,function(){var f=ak(this);if(f.__ta){for(var e in f.__ta){if(f.__ta.hasOwnProperty(e)){for(var g in f.__ta[e]){f.__ta[e].hasOwnProperty(g)&&N(f,e,f.__ta[e][g])}}}}f.parentNode&&f.parentNode.removeChild(f)}),this},this.on=function(){var f=arguments[0],e=4==arguments.length?arguments[2]:null,h=arguments[1],g=arguments[arguments.length-1];return d(f,h,g,e),this},this.off=function(f,e,g){return N(f,e,g),this},this.trigger=function(y,x,w,v){var u=Q&&("undefined"==typeof MouseEvent||null==w||w.constructor===MouseEvent),t=S&&!Q&&O[x]?O[x]:x,s=!(S&&!Q&&O[x]),r=I(w),q=H(w),p=X(w);return L(y,function(){var e,c=ak(this);w=w||{screenX:q[0],screenY:q[1],clientX:p[0],clientY:p[1]};var i=function(z){v&&(z.payload=v)},h={TouchEvent:function(A){var z=document.createTouch(window,c,0,r[0],r[1],q[0],q[1],p[0],p[1],0,0,0,0),D=document.createTouchList(z),C=document.createTouchList(z),B=document.createTouchList(z);A.initTouchEvent(t,!0,!0,window,null,q[0],q[1],p[0],p[1],!1,!1,!1,!1,D,C,B,1,0)},MouseEvents:function(z){if(z.initMouseEvent(t,!0,!0,window,0,q[0],q[1],p[0],p[1],!1,!1,!1,!1,1,c),am.android){var A=document.createTouch(window,c,0,r[0],r[1],q[0],q[1],p[0],p[1],0,0,0,0);z.touches=z.targetTouches=z.changedTouches=document.createTouchList(A)}}};if(document.createEvent){var g=!s&&!u&&S&&O[x]&&!am.android,f=g?"TouchEvent":"MouseEvents";e=document.createEvent(f),h[f](e),i(e),c.dispatchEvent(e)}else{document.createEventObject&&(e=document.createEventObject(),e.eventType=e.eventName=t,e.screenX=q[0],e.screenY=q[1],e.clientX=p[0],e.clientY=p[1],i(e),c.fireEvent("on"+t,e))}}),this}},an.Mottle.consume=function(d,c){d.stopPropagation?d.stopPropagation():d.returnValue=!1,!c&&d.preventDefault&&d.preventDefault()},an.Mottle.pageLocation=I,an.Mottle.setForceTouchEvents=function(b){S=b},an.Mottle.setForceMouseEvents=function(b){Q=b}}.call("undefined"==typeof window?this:window),function(){var an=this,am=function(e,d,f){return -1===e.indexOf(d)?(f?e.unshift(d):e.push(d),!0):!1},al=function(e,d){var f=e.indexOf(d);-1!=f&&e.splice(f,1)},ak=function(f,e){for(var h=[],g=0;g<f.length;g++){-1==e.indexOf(f[g])&&h.push(f[g])}return h},aj=function(b){return null==b?!1:"string"==typeof b||b.constructor==String},ai=function(t){var s=t.getBoundingClientRect(),r=document.body,q=document.documentElement,p=window.pageYOffset||q.scrollTop||r.scrollTop,o=window.pageXOffset||q.scrollLeft||r.scrollLeft,n=q.clientTop||r.clientTop||0,m=q.clientLeft||r.clientLeft||0,l=s.top+p-n,k=s.left+o-m;return{top:Math.round(l),left:Math.round(k)}},ah=function(g,f,k){k=k||g.parentNode;for(var i=k.querySelectorAll(f),h=0;h<i.length;h++){if(i[h]===g){return !0}}return !1},ag=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,f=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=f.exec(d)&&(e=parseFloat(RegExp.$1))}return e}(),af=50,ae=50,ad=ag>-1&&9>ag,ac=9==ag,ab=function(e){if(ad){return[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop]}var d=Z(e),f=aa(d,0);return ac?[f.pageX||f.clientX,f.pageY||f.clientY]:[f.pageX,f.pageY]},aa=function(d,c){return d.item?d.item(c):d[c]},Z=function(b){return b.touches&&b.touches.length>0?b.touches:b.changedTouches&&b.changedTouches.length>0?b.changedTouches:b.targetTouches&&b.targetTouches.length>0?b.targetTouches:[b]},Y={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy"},W="katavorio-drag-scope",U=["stop","start","drag","drop","over","out","beforeStart"],S=function(){},Q=function(){return !0},O=function(f,e,h){for(var g=0;g<f.length;g++){f[g]!=h&&e(f[g])}},M=function(f,e,h,g){O(f,function(b){b.setActive(e),e&&b.updatePosition(),h&&b.setHover(g,e)})},K=function(e,d){if(null!=e){e=aj(e)||null!=e.tagName||null==e.length?[e]:e;for(var f=0;f<e.length;f++){d.apply(e[f],[e[f]])}}},J=function(b){b.stopPropagation?(b.stopPropagation(),b.preventDefault()):b.returnValue=!1},I="input,textarea,select,button,option",H=function(f,e,h){var g=f.srcElement||f.target;return !ah(g,h.getInputFilterSelector(),e)},X=function(g,f,k,i){this.params=f||{},this.el=g,this.params.addClass(this.el,this._class),this.uuid=N();var h=!0;return this.setEnabled=function(b){h=b},this.isEnabled=function(){return h},this.toggleEnabled=function(){h=!h},this.setScope=function(b){this.scopes=b?b.split(/\s+/):[i]},this.addScope=function(e){var d={};K(this.scopes,function(b){d[b]=!0}),K(e?e.split(/\s+/):[],function(b){d[b]=!0}),this.scopes=[];for(var l in d){this.scopes.push(l)}},this.removeScope=function(e){var d={};K(this.scopes,function(b){d[b]=!0}),K(e?e.split(/\s+/):[],function(b){delete d[b]}),this.scopes=[];for(var l in d){this.scopes.push(l)}},this.toggleScope=function(e){var d={};K(this.scopes,function(b){d[b]=!0}),K(e?e.split(/\s+/):[],function(b){d[b]?delete d[b]:d[b]=!0}),this.scopes=[];for(var l in d){this.scopes.push(l)}},this.setScope(f.scope),this.k=f.katavorio,f.katavorio},V=function(){return !0},T=function(){return !1},R=function(aG,aF,aE){this._class=aE.draggable;var aD=X.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var aC=[0,0],aB=null,aA=null,az=[0,0],ay=!1,ax=this.params.consumeStartEvent!==!1,aw=this.el,au=this.params.clone,ar=(this.params.scroll,aF.multipleDrop!==!1),ap=!1,C=aF.ghostProxy===!0?V:aF.ghostProxy&&"function"==typeof aF.ghostProxy?aF.ghostProxy:T,av=function(b){return b.cloneNode(!0)},at=aF.snapThreshold||5,aq=function(aI,aH,G,E,D){E=E||at,D=D||at;var y=Math.floor(aI[0]/aH),w=aH*y,u=w+aH,s=Math.abs(aI[0]-w)<=E?w:Math.abs(u-aI[0])<=E?u:aI[0],r=Math.floor(aI[1]/G),q=G*r,o=q+G,n=Math.abs(aI[1]-q)<=D?q:Math.abs(o-aI[1])<=D?o:aI[1];return[s,n]};this.posses=[],this.posseRoles={},this.toGrid=function(b){return null==this.params.grid?b:aq(b,this.params.grid[0],this.params.grid[1])},this.snap=function(h,d){if(null!=aw){h=h||(this.params.grid?this.params.grid[0]:af),d=d||(this.params.grid?this.params.grid[1]:ae);var k=this.params.getPosition(aw);this.params.setPosition(aw,aq(k,h,d,h,d))}},this.setUseGhostProxy=function(b){C=b?V:T};var ao,F=function(b){return aF.allowNegative===!1?[Math.max(0,b[0]),Math.max(0,b[1])]:b},B=function(b){ao="function"==typeof b?b:b?function(c){return F([Math.max(0,Math.min(p.w-this.size[0],c[0])),Math.max(0,Math.min(p.h-this.size[1],c[1]))])}.bind(this):function(c){return F(c)}}.bind(this);B("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(b){B(b)};var A;this.setRevert=function(b){A=b};var z=function(b){return"function"==typeof b?(b._katavorioId=N(),b._katavorioId):b},x={},v=function(k){for(var h in x){var n=x[h],l=n[0](k);if(n[1]&&(l=!l),!l){return !1}}return !0},t=this.setFilter=function(a,k){if(a){var h=z(a);x[h]=[function(n){var l,b=n.srcElement||n.target;return aj(a)?l=ah(b,a,aG):"function"==typeof a&&(l=a(n,aG)),l},k!==!1]}};this.addFilter=t,this.removeFilter=function(d){var c="function"==typeof d?d._katavorioId:d;delete x[c]},this.clearAllFilters=function(){x={}},this.canDrag=this.params.canDrag||Q;var p,m=[],i=[];this.downListener=function(d){var c=this.rightButtonCanDrag||3!==d.which&&2!==d.button;if(c&&this.isEnabled()&&this.canDrag()){var k=v(d)&&H(d,this.el,this.k);if(k){if(au){aw=this.el.cloneNode(!0),aw.setAttribute("id",null),aw.style.position="absolute";var h=ai(this.el);aw.style.left=h.left+"px",aw.style.top=h.top+"px",document.body.appendChild(aw)}else{aw=this.el}ax&&J(d),aC=ab(d),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),aD.markSelection(this),aD.markPosses(this),this.params.addClass(document.body,aE.noSelect),f("beforeStart",{el:this.el,pos:aB,e:d,drag:this})}else{this.params.consumeFilteredEvents&&J(d)}}}.bind(this),this.moveListener=function(h){if(aC){if(!ay){var d=f("start",{el:this.el,pos:aB,e:h,drag:this});if(d!==!1){if(!aC){return}this.mark(!0),ay=!0}}if(aC){i.length=0;var o=ab(h),n=o[0]-aC[0],l=o[1]-aC[1],k=this.params.ignoreZoom?1:aD.getZoom();n/=k,l/=k,this.moveBy(n,l,h),aD.updateSelection(n,l,this),aD.updatePosses(n,l,this)}}}.bind(this),this.upListener=function(b){aC&&(aC=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,aE.noSelect),this.unmark(b),aD.unmarkSelection(this,b),aD.unmarkPosses(this,b),this.stop(b),aD.notifySelectionDragStop(this,b),aD.notifyPosseDragStop(this,b),ay=!1,au&&(aw&&aw.parentNode&&aw.parentNode.removeChild(aw),aw=null),A&&A(this.el,this.params.getPosition(this.el))===!0&&(this.params.setPosition(this.el,aB),f("revert",this.el)))}.bind(this),this.getFilters=function(){return x},this.abort=function(){null!=aC&&this.upListener()},this.getDragElement=function(){return aw||this.el};var g={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};aF.events.start&&g.start.push(aF.events.start),aF.events.beforeStart&&g.beforeStart.push(aF.events.beforeStart),aF.events.stop&&g.stop.push(aF.events.stop),aF.events.drag&&g.drag.push(aF.events.drag),aF.events.revert&&g.revert.push(aF.events.revert),this.on=function(d,c){g[d]&&g[d].push(c)},this.off=function(k,h){if(g[k]){for(var n=[],l=0;l<g[k].length;l++){g[k][l]!==h&&n.push(g[k][l])}g[k]=n}};var f=function(k,h){if(g[k]){for(var n=0;n<g[k].length;n++){try{g[k][n](h)}catch(l){}}}};this.notifyStart=function(b){f("start",{el:this.el,pos:this.params.getPosition(aw),e:b,drag:this})},this.stop=function(k,d){if(d||ay){var r=[],q=aD.getSelection(),o=this.params.getPosition(aw);if(q.length>1){for(var n=0;n<q.length;n++){var l=this.params.getPosition(q[n].el);r.push([q[n].el,{left:l[0],top:l[1]},q[n]])}}else{r.push([aw,{left:o[0],top:o[1]},this])}f("stop",{el:aw,pos:e||o,finalPos:o,e:k,drag:this,selection:r})}},this.mark=function(d){aB=this.params.getPosition(aw),aA=this.params.getPosition(aw,!0),az=[aA[0]-aB[0],aA[1]-aB[1]],this.size=this.params.getSize(aw),m=aD.getMatchingDroppables(this),M(m,!0,!1,this),this.params.addClass(aw,this.params.dragClass||aE.drag);var c=this.params.getSize(aw.parentNode);p={w:c[0],h:c[1]},d&&aD.notifySelectionDragStart(this)};var e;this.unmark=function(b,k){if(M(m,!1,!0,this),ap&&C()?(e=[aw.offsetLeft,aw.offsetTop],this.el.parentNode.removeChild(aw),aw=this.el):e=null,this.params.removeClass(aw,this.params.dragClass||aE.drag),m.length=0,ap=!1,!k){i.length>0&&e&&aF.setPosition(this.el,e);for(var h=0;h<i.length;h++){var c=i[h].drop(this,b);if(c===!0){break}}}},this.moveBy=function(D,y,w){i.length=0;var u=this.toGrid([aB[0]+D,aB[1]+y]),s=ao(u,aw);if(C()){if(u[0]!=s[0]||u[1]!=s[1]){if(!ap){var r=av(this.el);aF.addClass(r,Y.ghostProxy),this.el.parentNode.appendChild(r),aw=r,ap=!0}s=u}else{ap&&(this.el.parentNode.removeChild(aw),aw=this.el,ap=!1)}}var q={x:s[0],y:s[1],w:this.size[0],h:this.size[1]},o={x:q.x+az[0],y:q.y+az[1],w:q.w,h:q.h},n=null;this.params.setPosition(aw,s);for(var k=0;k<m.length;k++){var b={x:m[k].pagePosition[0],y:m[k].pagePosition[1],w:m[k].size[0],h:m[k].size[1]};this.params.intersects(o,b)&&(ar||null==n||n==m[k].el)&&m[k].canDrop(this)?(n||(n=m[k].el),i.push(m[k]),m[k].setHover(this,!0,w)):m[k].isHover()&&m[k].setHover(this,!1,w)}f("drag",{el:this.el,pos:s,e:w,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?t(this.params.handle,!1):t(this.params.filter,this.params.filterExclude)},P=function(f,e,h){this._class=h.droppable,this.params=e||{},this._activeClass=this.params.activeClass||h.active,this._hoverClass=this.params.hoverClass||h.hover,X.apply(this,arguments);var g=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(b){this.params[b?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(){return !0},this.isHover=function(){return g},this.setHover=function(i,d,k){(d||null==this.el._katavorioDragHover||this.el._katavorioDragHover==i.el._katavorio)&&(this.params[d?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=d?i.el._katavorio:null,g!==d&&this.params.events[d?"over":"out"]({el:this.el,e:k,drag:i,drop:this}),g=d)},this.drop=function(d,c){return this.params.events.drop({drag:d,e:c,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,g=null}},N=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=0|16*Math.random(),f="x"==e?d:8|3&d;return f.toString(16)})},L=function(b){return null==b?null:(b="string"==typeof b||b.constructor==String?document.getElementById(b):b,null==b?null:(b._katavorio=b._katavorio||N(),b))};an.Katavorio=function(aq){var ap=[],ao={};this._dragsByScope={},this._dropsByScope={};var G=1,F=function(g,f){K(g,function(h){for(var i=0;i<h.scopes.length;i++){f[h.scopes[i]]=f[h.scopes[i]]||[],f[h.scopes[i]].push(h)}})},E=function(a,g){var f=0;return K(a,function(h){for(var k=0;k<h.scopes.length;k++){if(g[h.scopes[k]]){var i=aq.indexOf(g[h.scopes[k]],h);-1!=i&&(g[h.scopes[k]].splice(i,1),f++)}}}),f>0},D=(this.getMatchingDroppables=function(h){for(var g=[],m={},l=0;l<h.scopes.length;l++){var k=this._dropsByScope[h.scopes[l]];if(k){for(var i=0;i<k.length;i++){!k[i].canDrop(h)||m[k[i].uuid]||!k[i].allowLoopback&&k[i].el===h.el||(m[k[i].uuid]=!0,g.push(k[i]))}}}return g},function(a){a=a||{};var g,f={events:{}};for(g in aq){f[g]=aq[g]}for(g in a){f[g]=a[g]}for(g=0;g<U.length;g++){f.events[U[g]]=a[U[g]]||S}return f.katavorio=this,f}.bind(this)),y=function(g,f){for(var h=0;h<U.length;h++){f[U[h]]&&g.on(U[h],f[U[h]])}}.bind(this),w={},u=aq.css||{},s=aq.scope||W;for(var e in Y){w[e]=Y[e]}for(var e in u){w[e]=u[e]}var d=aq.inputFilterSelector||I;this.getInputFilterSelector=function(){return d},this.setInputFilterSelector=function(f){return d=f,this},this.draggable=function(a,g){var f=[];return K(a,function(h){if(h=L(h),null!=h){if(null==h._katavorioDrag){var i=D(g);h._katavorioDrag=new R(h,i,w,s),F(h._katavorioDrag,this._dragsByScope),f.push(h._katavorioDrag),aq.addClass(h,w.draggable)}else{y(h._katavorioDrag,g)}}}.bind(this)),f},this.droppable=function(a,g){var f=[];return K(a,function(h){if(h=L(h),null!=h){var i=new P(h,D(g),w,s);h._katavorioDrop=h._katavorioDrop||[],h._katavorioDrop.push(i),F(i,this._dropsByScope),f.push(i),aq.addClass(h,w.droppable)}}.bind(this)),f},this.select=function(a){return K(a,function(){var f=L(this);f&&f._katavorioDrag&&(ao[f._katavorio]||(ap.push(f._katavorioDrag),ao[f._katavorio]=[f,ap.length-1],aq.addClass(f,w.selected)))}),this},this.deselect=function(a){return K(a,function(){var f=L(this);if(f&&f._katavorio){var i=ao[f._katavorio];if(i){for(var h=[],g=0;g<ap.length;g++){ap[g].el!==f&&h.push(ap[g])}ap=h,delete ao[f._katavorio],aq.removeClass(f,w.selected)}}}),this},this.deselectAll=function(){for(var a in ao){var f=ao[a];aq.removeClass(f[0],w.selected)}ap.length=0,ao={}},this.markSelection=function(f){O(ap,function(g){g.mark()},f)},this.markPosses=function(f){f.posses&&K(f.posses,function(a){f.posseRoles[a]&&q[a]&&O(q[a].members,function(g){g.mark()},f)})},this.unmarkSelection=function(g,f){O(ap,function(h){h.unmark(f)},g)},this.unmarkPosses=function(g,f){g.posses&&K(g.posses,function(a){g.posseRoles[a]&&q[a]&&O(q[a].members,function(h){h.unmark(f,!0)},g)})},this.getSelection=function(){return ap.slice(0)},this.updateSelection=function(g,f,h){O(ap,function(a){a.moveBy(g,f)},h)};var c=function(g,f){f.posses&&K(f.posses,function(a){f.posseRoles[a]&&q[a]&&O(q[a].members,function(h){g(h)},f)})};this.updatePosses=function(g,f,h){c(function(a){a.moveBy(g,f)},h)},this.notifyPosseDragStop=function(g,f){c(function(h){h.stop(f,!0)},g)},this.notifySelectionDragStop=function(g,f){O(ap,function(h){h.stop(f,!0)},g)},this.notifySelectionDragStart=function(g,f){O(ap,function(h){h.notifyStart(f)},g)},this.setZoom=function(f){G=f},this.getZoom=function(){return G};var b=function(g,f,i,h){K(g,function(k){E(k,i),k[h](f),F(k,i)})};K(["set","add","remove","toggle"],function(f){this[f+"Scope"]=function(a,g){b(a._katavorioDrag,g,this._dragsByScope,f+"Scope"),b(a._katavorioDrop,g,this._dropsByScope,f+"Scope")}.bind(this),this[f+"DragScope"]=function(a,g){b(a.constructor===R?a:a._katavorioDrag,g,this._dragsByScope,f+"Scope")}.bind(this),this[f+"DropScope"]=function(a,g){b(a.constructor===P?a:a._katavorioDrop,g,this._dropsByScope,f+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(g,f){for(var h in this._dragsByScope){O(this._dragsByScope[h],function(a){a.snap(g,f)})}},this.getDragsForScope=function(f){return this._dragsByScope[f]},this.getDropsForScope=function(f){return this._dropsByScope[f]};var r=function(g,f,h){g=L(g),g[f]&&(E(g[f],h)&&K(g[f],function(i){i.destroy()}),delete g[f])};this.elementRemoved=function(f){this.destroyDraggable(f),this.destroyDroppable(f)},this.destroyDraggable=function(f){r(f,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(f){r(f,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},ap=[],ao={},q={}};var q={},p=function(i,o,n){var m=aj(o)?o:o.id,l=aj(o)?!0:o.active!==!1,k=q[m]||function(){var f={name:m,members:[]};return q[m]=f,f}();return K(i,function(f){if(f._katavorioDrag){if(n&&null!=f._katavorioDrag.posseRoles[k.name]){return}am(k.members,f._katavorioDrag),am(f._katavorioDrag.posses,k.name),f._katavorioDrag.posseRoles[k.name]=l}}),k};this.addToPosse=function(g){for(var f=[],h=1;h<arguments.length;h++){f.push(p(g,arguments[h]))}return 1==f.length?f[0]:f},this.setPosse=function(g){for(var f=[],h=1;h<arguments.length;h++){f.push(p(g,arguments[h],!0).name)}return K(g,function(i){if(i._katavorioDrag){var m=ak(i._katavorioDrag.posses,f),l=[];Array.prototype.push.apply(l,i._katavorioDrag.posses);for(var k=0;k<m.length;k++){this.removeFromPosse(i,m[k])}}}.bind(this)),1==f.length?f[0]:f},this.removeFromPosse=function(g,f){if(arguments.length<2){throw new TypeError("No posse id provided for remove operation")}for(var h=1;h<arguments.length;h++){f=arguments[h],K(g,function(i){if(i._katavorioDrag&&i._katavorioDrag.posses){var k=i._katavorioDrag;K(f,function(l){al(q[l].members,k),al(k.posses,l),delete k.posseRoles[l]})}})}},this.removeFromAllPosses=function(f){K(f,function(h){if(h._katavorioDrag&&h._katavorioDrag.posses){var g=h._katavorioDrag;K(g.posses,function(i){al(q[i].members,g)}),g.posses.length=0,g.posseRoles={}}})},this.setPosseState=function(g,f,i){var h=q[f];h&&K(g,function(k){k._katavorioDrag&&k._katavorioDrag.posses&&(k._katavorioDrag.posseRoles[h.name]=i)})}}}.call("undefined"!=typeof window?window:this),function(){var v=function(b){return"[object Array]"===Object.prototype.toString.call(b)},u=function(b){return"[object Number]"===Object.prototype.toString.call(b)},t=function(b){return"string"==typeof b},s=function(b){return"boolean"==typeof b},r=function(b){return null==b},q=function(b){return null==b?!1:"[object Object]"===Object.prototype.toString.call(b)},p=function(b){return"[object Date]"===Object.prototype.toString.call(b)},o=function(b){return"[object Function]"===Object.prototype.toString.call(b)},n=function(d){for(var c in d){if(d.hasOwnProperty(c)){return !1}}return !0},m=this,l=m.jsPlumbUtil={isArray:v,isString:t,isBoolean:s,isNull:r,isObject:q,isDate:p,isFunction:o,isEmpty:n,isNumber:u,clone:function(a){if(t(a)){return""+a}if(s(a)){return !!a}if(p(a)){return new Date(a.getTime())}if(o(a)){return a}if(v(a)){for(var g=[],f=0;f<a.length;f++){g.push(this.clone(a[f]))}return g}if(q(a)){var d={};for(var c in a){d[c]=this.clone(a[c])}return d}return a},merge:function(a,z,y){var x,w,f={};for(y=y||[],w=0;w<y.length;w++){f[y[w]]=!0}var d=this.clone(a);for(w in z){if(null==d[w]){d[w]=z[w]}else{if(t(z[w])||s(z[w])){f[w]?(x=[],x.push.apply(x,v(d[w])?d[w]:[d[w]]),x.push.apply(x,v(z[w])?z[w]:[z[w]]),d[w]=x):d[w]=z[w]}else{if(v(z[w])){x=[],v(d[w])&&x.push.apply(x,d[w]),x.push.apply(x,z[w]),d[w]=x}else{if(q(z[w])){q(d[w])||(d[w]={});for(var c in z[w]){d[w][c]=z[w][c]}}}}}}return d},replace:function(g,f,k){if(null!=g){var i=g,h=i;return f.replace(/([^\.])+/g,function(e,c,B,A){var z=e.match(/([^\[0-9]+){1}(\[)([0-9+])/),y=B+e.length>=A.length,x=function(){return h[z[1]]||function(){return h[z[1]]=[],h[z[1]]}()};if(y){z?x()[z[3]]=k:h[e]=k}else{if(z){var w=x();h=w[z[3]]||function(){return w[z[3]]={},w[z[3]]}()}else{h=h[e]||function(){return h[e]={},h[e]}()}}}),g}},functionChain:function(g,f,k){for(var i=0;i<k.length;i++){var h=k[i][0][k[i][1]].apply(k[i][0],k[i][2]);if(h===f){return h}}return g},populate:function(a,k,h){var f=function(g){var d=g.match(/(\${.*?})/g);if(null!=d){for(var w=0;w<d.length;w++){var i=k[d[w].substring(2,d[w].length-1)]||"";null!=i&&(g=g.replace(d[w],i))}}return g},c=function(e){if(null!=e){if(t(e)){return f(e)}if(!o(e)||null!=h&&0!==(e.name||"").indexOf(h)){if(v(e)){for(var w=[],i=0;i<e.length;i++){w.push(c(e[i]))}return w}if(q(e)){var g={};for(var d in e){g[d]=c(e[d])}return g}return e}return e(k)}};return c(a)},findWithFunction:function(e,d){if(e){for(var f=0;f<e.length;f++){if(d(e[f])){return f}}}return -1},removeWithFunction:function(e,d){var f=l.findWithFunction(e,d);return f>-1&&e.splice(f,1),-1!=f},remove:function(e,d){var f=e.indexOf(d);return f>-1&&e.splice(f,1),-1!=f},addWithFunction:function(e,d,f){-1==l.findWithFunction(e,f)&&e.push(d)},addToList:function(g,f,k,i){var h=g[f];return null==h&&(h=[],g[f]=h),h[i?"unshift":"push"](k),h},suggest:function(e,d,f){return -1===e.indexOf(d)?(f?e.unshift(d):e.push(d),!0):!1},extend:function(a,x){var w;for(x=v(x)?x:[x],w=0;w<x.length;w++){for(var k in x[w].prototype){x[w].prototype.hasOwnProperty(k)&&(a.prototype[k]=x[w].prototype[k])}}var i=function(d,c){return function(){for(w=0;w<x.length;w++){x[w].prototype[d]&&x[w].prototype[d].apply(this,arguments)}return c.apply(this,arguments)}},h=function(b){for(var d in b){a.prototype[d]=i(d,b[d])}};if(arguments.length>2){for(w=2;w<arguments.length;w++){h(arguments[w])}}return a},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=0|16*Math.random(),f="x"==e?d:8|3&d;return f.toString(16)})},logEnabled:!0,log:function(){if(l.logEnabled&&"undefined"!=typeof console){try{var d=arguments[arguments.length-1];console.log(d)}catch(c){}}},wrap:function(e,d,f){return e=e||function(){},d=d||function(){},function(){var b=null;try{b=d.apply(this,arguments)}catch(a){l.log("jsPlumb function failed : "+a)}if(null==f||b!==f){try{b=e.apply(this,arguments)}catch(a){l.log("wrapped function failed : "+a)}}return b}}};l.EventGenerator=function(){var e={},d=!1,f={ready:!0};this.bind=function(a,k,i){var h=function(c){l.addToList(e,c,k,i),k.__jsPlumb=k.__jsPlumb||{},k.__jsPlumb[m.jsPlumbUtil.uuid()]=c};if("string"==typeof a){h(a)}else{if(null!=a.length){for(var g=0;g<a.length;g++){h(a[g])}}}return this},this.fire=function(z,y,x){if(!d&&e[z]){var w=e[z].length,k=0,c=!1,b=null;if(!this.shouldFireEvent||this.shouldFireEvent(z,y,x)){for(;!c&&w>k&&b!==!1;){if(f[z]){e[z][k].apply(this,[y,x])}else{try{b=e[z][k].apply(this,[y,x])}catch(a){l.log("jsPlumb: fire failed for event "+z+" : "+a)}}k++,(null==e||null==e[z])&&(c=!0)}}}return this},this.unbind=function(a,i){if(0===arguments.length){e={}}else{if(1===arguments.length){if("string"==typeof a){delete e[a]}else{if(a.__jsPlumb){var h;for(var g in a.__jsPlumb){h=a.__jsPlumb[g],l.remove(e[h]||[],a)}}}}else{2===arguments.length&&l.remove(e[a]||[],i)}}return this},this.getListener=function(a){return e[a]},this.setSuspendEvents=function(b){d=b},this.isSuspendEvents=function(){return d},this.silently=function(g){this.setSuspendEvents(!0);try{g()}catch(c){m.jsPlumbUtil.log("Cannot execute silent function "+c)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var a in e){e[a]=null}}},l.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}}}.call("undefined"!=typeof window?window:this),function(){var d=this,c=d.jsPlumbUtil;c.matchesSelector=function(g,f,k){k=k||g.parentNode;for(var i=k.querySelectorAll(f),h=0;h<i.length;h++){if(i[h]===g){return !0}}return !1},c.consume=function(f,e){f.stopPropagation?f.stopPropagation():f.returnValue=!1,!e&&f.preventDefault&&f.preventDefault()},c.sizeElement=function(g,f,k,i,h){g&&(g.style.height=h+"px",g.height=h,g.style.width=i+"px",g.width=i,g.style.left=f+"px",g.style.top=k+"px")}}.call("undefined"!=typeof window?window:this),function(){var J,I=this,H=[],G=I.jsPlumbUtil,F=function(){return""+(new Date).getTime()},E=function(d){if(d._jsPlumb.paintStyle&&d._jsPlumb.hoverPaintStyle){var c={};s.extend(c,d._jsPlumb.paintStyle),s.extend(c,d._jsPlumb.hoverPaintStyle),delete d._jsPlumb.hoverPaintStyle,c.gradient&&d._jsPlumb.paintStyle.fillStyle&&delete c.gradient,d._jsPlumb.hoverPaintStyle=c}},D=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],C=function(i,h,o,n){var m=i.getAttachedElements();if(m){for(var l=0,k=m.length;k>l;l++){n&&n==m[l]||m[l].setHover(h,!0,o)}}},B=function(b){return null==b?null:b.split(" ")},A=function(f,e,h){for(var g in e){f[g]=h}},z=function(f,d){d=G.isArray(d)||null!=d.length&&!G.isString(d)?d:[d];for(var h=0;h<d.length;h++){try{f.apply(d[h],[d[h]])}catch(g){G.log(".each iteration failed : "+g)}}},y=function(O,N,M){if(O.getDefaultType){var L=O.getTypeDescriptor(),K={},r=O.getDefaultType(),q=G.merge({},r);A(K,r,"__default");for(var p=0,o=O._jsPlumb.types.length;o>p;p++){var n=O._jsPlumb.types[p];if("__default"!==n){var d=O._jsPlumb.instance.getType(n,L);null!=d&&(q=G.merge(q,d,["cssClass"]),A(K,d,n))}}N&&(q=G.populate(q,N,"_")),O.applyType(q,M,K),M||O.repaint()}},x=I.jsPlumbUIComponent=function(N){G.EventGenerator.apply(this,arguments);var M=this,L=arguments,K=M.idPrefix,r=K+(new Date).getTime();this._jsPlumb={instance:N._jsPlumb,parameters:N.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:N.beforeDetach,beforeDrop:N.beforeDrop,overlayPlacements:[],hoverClass:N.hoverClass||N._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(f,e,g){this._jsPlumb.typeCache[g]=this._jsPlumb.typeCache[g]||{},this._jsPlumb.typeCache[g][f]=e},this.getCachedTypeItem=function(e,c){return this._jsPlumb.typeCache[c]?this._jsPlumb.typeCache[c][e]:null},this.getId=function(){return r};var q=N.overlays||[],p={};if(this.defaultOverlayKeys){for(var o=0;o<this.defaultOverlayKeys.length;o++){Array.prototype.push.apply(q,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[o]]||[])}for(o=0;o<q.length;o++){var n=s.convertToFullOverlaySpec(q[o]);p[n[1].id]=n}}var m={overlays:p,parameters:N.parameters||{},scope:N.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return m},this.appendToDefaultType=function(e){for(var c in e){m[c]=e[c]}},N.events){for(o in N.events){M.bind(o,N.events[o])}}this.clone=function(){var b=Object.create(this.constructor.prototype);return this.constructor.apply(b,L),b}.bind(this),this.isDetachAllowed=function(f){var e=!0;if(this._jsPlumb.beforeDetach){try{e=this._jsPlumb.beforeDetach(f)}catch(g){G.log("jsPlumb: beforeDetach callback failed",g)}}return e},this.isDropAllowed=function(U,T,S,R,Q,P,O){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:U,targetId:T,scope:S,connection:R,dropEndpoint:Q,source:P,target:O});if(this._jsPlumb.beforeDrop){try{l=this._jsPlumb.beforeDrop({sourceId:U,targetId:T,scope:S,connection:R,dropEndpoint:Q,source:P,target:O})}catch(k){G.log("jsPlumb: beforeDrop callback failed",k)}}return l};var d=[];this.setListenerComponent=function(e){for(var c=0;c<d.length;c++){d[c][3]=e}}},w=function(f,e){var h=f._jsPlumb.types[e],g=f._jsPlumb.instance.getType(h,f.getTypeDescriptor());null!=g&&g.cssClass&&f.canvas&&f._jsPlumb.instance.removeClass(f.canvas,g.cssClass)};G.extend(I.jsPlumbUIComponent,G.EventGenerator,{getParameter:function(b){return this._jsPlumb.parameters[b]},setParameter:function(d,c){this._jsPlumb.parameters[d]=c},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(b){this._jsPlumb.parameters=b},getClass:function(){return s.getClass(this.canvas)},hasClass:function(b){return s.hasClass(this.canvas,b)},addClass:function(b){s.addClass(this.canvas,b)},removeClass:function(b){s.removeClass(this.canvas,b)},updateClasses:function(d,c){s.updateClasses(this.canvas,d,c)},setType:function(e,d,f){this.clearTypes(),this._jsPlumb.types=B(e)||[],y(this,d,f)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(d,c){y(this,d,c)},hasType:function(b){return -1!=this._jsPlumb.types.indexOf(b)},addType:function(i,h,o){var n=B(i),m=!1;if(null!=n){for(var l=0,k=n.length;k>l;l++){this.hasType(n[l])||(this._jsPlumb.types.push(n[l]),m=!0)}m&&y(this,h,o)}},removeType:function(k,i,q){var p=B(k),o=!1,n=function(d){var c=this._jsPlumb.types.indexOf(d);return -1!=c?(w(this,c),this._jsPlumb.types.splice(c,1),!0):!1}.bind(this);if(null!=p){for(var m=0,l=p.length;l>m;m++){o=n(p[m])||o}o&&y(this,i,q)}},clearTypes:function(f,e){for(var h=this._jsPlumb.types.length,g=0;h>g;g++){w(this,0),this._jsPlumb.types.splice(0,1)}y(this,f,e)},toggleType:function(i,h,o){var n=B(i);if(null!=n){for(var m=0,l=n.length;l>m;m++){var k=this._jsPlumb.types.indexOf(n[m]);-1!=k?(w(this,k),this._jsPlumb.types.splice(k,1)):this._jsPlumb.types.push(n[m])}y(this,h,o)}},applyType:function(e,d){if(this.setPaintStyle(e.paintStyle,d),this.setHoverPaintStyle(e.hoverPaintStyle,d),e.parameters){for(var f in e.parameters){this.setParameter(f,e.parameters[f])}}this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(d,c){this._jsPlumb.paintStyle=d,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,E(this),c||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(d,c){this._jsPlumb.hoverPaintStyle=d,E(this),c||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(b){(b||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(f,e,h){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=f,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var g=f?"addClass":"removeClass";this._jsPlumb.instance[g](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[g](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=f?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(h=h||F(),this.repaint({timestamp:h,recalc:!1}))),this.getAttachedElements&&!e&&C(this,f,F(),this)}}});var v=0,u=function(){var b=v+1;return v++,b},t=I.jsPlumbInstance=function(ar){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},ar&&s.extend(this.Defaults,ar),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},G.EventGenerator.apply(this);var aq=this,ap=u(),an=aq.bind,am={},al=1,aj=function(h){if(null==h){return null}if(3==h.nodeType||8==h.nodeType){return{el:h,text:!0}}var f=aq.getElement(h);return{el:f,id:G.isString(h)&&null==f?h:aw(f)}};this.getInstanceIndex=function(){return ap},this.setZoom=function(h,f){return al=h,aq.fire("zoom",al),f&&aq.repaintEverything(),!0},this.getZoom=function(){return al};for(var ai in this.Defaults){am[ai]=this.Defaults[ai]}var ah,ag=[];this.unbindContainer=function(){if(null!=ah&&ag.length>0){for(var f=0;f<ag.length;f++){aq.off(ah,ag[f][0],ag[f][1])}}},this.setContainer=function(l){this.unbindContainer(),l=this.getElement(l),this.select().each(function(f){f.moveParent(l)}),this.selectEndpoints().each(function(f){f.moveParent(l)});var h=ah;ah=l,ag.length=0;for(var M=function(i,f){var O=f.srcElement||f.target,N=(O&&O.parentNode?O.parentNode._jsPlumb:null)||(O?O._jsPlumb:null)||(O&&O.parentNode&&O.parentNode.parentNode?O.parentNode.parentNode._jsPlumb:null);N&&(N.fire(i,N,f),aq.fire(i,N.component||N,f))},L=function(i,f,N){ag.push([i,N]),aq.on(ah,i,f,N)},K=function(f){L(f,".jsplumb-connector > *",function(i){M(f,i)}),L(f,".jsplumb-endpoint, .jsplumb-endpoint > *, .jsplumb-endpoint svg *",function(i){M(f,i)}),L(f,".jsplumb-overlay, .jsplumb-overlay *",function(i){M(f,i)})},q=0;q<D.length;q++){K(D[q])}for(var o in r){var n=r[o].el;n.parentNode===h&&(h.removeChild(n),ah.appendChild(n))}},this.getContainer=function(){return ah},this.bind=function(h,f){"ready"===h&&ae?f():an.apply(aq,[h,f])},aq.importDefaults=function(h){for(var f in h){aq.Defaults[f]=h[f]}return h.Container&&aq.setContainer(h.Container),aq},aq.restoreDefaults=function(){return aq.Defaults=s.extend({},am),aq};var af=null,ae=!1,ad=[],ac={},aa={},r={},aY={},aX={},aW={},aV=!1,aU=[],aS=!1,aR=null,aQ=this.Defaults.Scope,aP=1,aO=function(){return""+aP++},aM=function(h,f){ah?ah.appendChild(h):f?this.getElement(f).appendChild(h):this.appendToRoot(h)}.bind(this),aL=function(N,M,L,K){if(!s.headless&&!aS){var q=aw(N),o=aq.getDragManager().getElementsForDraggable(q);null==L&&(L=F());var n=bc({elId:q,offset:M,recalc:!1,timestamp:L});if(o){for(var l in o){bc({elId:o[l].id,offset:{left:n.o.left+o[l].offset.left,top:n.o.top+o[l].offset.top},recalc:!1,timestamp:L})}}if(aq.anchorManager.redraw(q,M,L,null,K),o){for(var h in o){aq.anchorManager.redraw(o[h].id,M,L,o[h].offset,K,!0)}}}},aK=function(f){return aa[f]},aJ=function(X,W,V,U,T){if(!s.headless){var S=null==W?!1:W;if(S&&s.isDragSupported(X,aq)){var R=V||aq.Defaults.DragOptions;if(R=s.extend({},R),s.isAlreadyDraggable(X,aq)){V.force&&aq.initDraggable(X,R)}else{var Q=s.dragEvents.drag,P=s.dragEvents.stop,O=s.dragEvents.start,N=aq.getElement(X),M=aq.getDragManager().getDragAncestor(N),L={left:0,top:0},K=L,h=!1;d(U,X),R[O]=G.wrap(R[O],function(){return K=null!=M?aq.getOffset(M):L,aq.setHoverSuspended(!0),aq.select({source:X}).addClass(aq.elementDraggingClass+" "+aq.sourceElementDraggingClass,!0),aq.select({target:X}).addClass(aq.elementDraggingClass+" "+aq.targetElementDraggingClass,!0),aq.setConnectionBeingDragged(!0),R.canDrag?V.canDrag():void 0},!1),R[Q]=G.wrap(R[Q],function(){var f=aq.getUIPosition(arguments,aq.getZoom());null!=f&&(f.left+=K.left,f.top+=K.top,aL(X,f,null,!0),h&&aq.addClass(X,"jsplumb-dragged"),h=!0)}),R[P]=G.wrap(R[P],function(){for(var i=arguments[0].selection,f=aq.getUIPosition(arguments),n=function(o){null!=f&&aL(o[0],f),aq.removeClass(o[0],"jsplumb-dragged"),aq.select({source:o[0]}).removeClass(aq.elementDraggingClass+" "+aq.sourceElementDraggingClass,!0),aq.select({target:o[0]}).removeClass(aq.elementDraggingClass+" "+aq.targetElementDraggingClass,!0),aq.getDragManager().dragEnded(o[0])},l=0;l<i.length;l++){n(i[l])}h=!1,aq.setHoverSuspended(!1),aq.setConnectionBeingDragged(!1)});var Z=aw(X);aW[Z]=!0;var Y=aW[Z];R.disabled=null==Y?!1:!Y,aq.initDraggable(X,R),aq.getDragManager().register(X),T&&aq.fire("elementDraggable",{el:X,options:R})}}}},aI=function(i,h){for(var q=i.scope.split(/\s/),o=h.scope.split(/\s/),n=0;n<q.length;n++){for(var l=0;l<o.length;l++){if(o[l]==q[n]){return !0}}}return !1},aH=function(l,h){var M=s.extend({},l);if(h&&s.extend(M,h),M.source&&(M.source.endpoint?M.sourceEndpoint=M.source:M.source=aq.getElement(M.source)),M.target&&(M.target.endpoint?M.targetEndpoint=M.target:M.target=aq.getElement(M.target)),l.uuids&&(M.sourceEndpoint=aK(l.uuids[0]),M.targetEndpoint=aK(l.uuids[1])),M.sourceEndpoint&&M.sourceEndpoint.isFull()){return G.log(aq,"could not add connection; source endpoint is full"),void 0}if(M.targetEndpoint&&M.targetEndpoint.isFull()){return G.log(aq,"could not add connection; target endpoint is full"),void 0}if(!M.type&&M.sourceEndpoint&&(M.type=M.sourceEndpoint.connectionType),M.sourceEndpoint&&M.sourceEndpoint.connectorOverlays){M.overlays=M.overlays||[];for(var L=0,K=M.sourceEndpoint.connectorOverlays.length;K>L;L++){M.overlays.push(M.sourceEndpoint.connectorOverlays[L])}}M.sourceEndpoint&&M.sourceEndpoint.scope&&(M.scope=M.sourceEndpoint.scope),!M["pointer-events"]&&M.sourceEndpoint&&M.sourceEndpoint.connectorPointerEvents&&(M["pointer-events"]=M.sourceEndpoint.connectorPointerEvents);var q=function(i,f){var O=s.extend({},i);for(var N in f){f[N]&&(O[N]=f[N])}return O},o=function(i,f,N){return aq.addEndpoint(i,q(f,{anchor:M.anchors?M.anchors[N]:M.anchor,endpoint:M.endpoints?M.endpoints[N]:M.endpoint,paintStyle:M.endpointStyles?M.endpointStyles[N]:M.endpointStyle,hoverPaintStyle:M.endpointHoverStyles?M.endpointHoverStyles[N]:M.endpointHoverStyle}))},n=function(N,i,S,R){if(M[N]&&!M[N].endpoint&&!M[N+"Endpoint"]&&!M.newConnection){var Q=aw(M[N]),P=S[Q];if(P=P?P[R]:null){if(!P.enabled){return !1}var O=null!=P.endpoint&&P.endpoint._jsPlumb?P.endpoint:o(M[N],P.def,i);if(O.isFull()){return !1}M[N+"Endpoint"]=O,O._doNotDeleteOnDetach=!1,O._deleteOnDetach=!0,P.uniqueEndpoint&&(P.endpoint?O.finalEndpoint=P.endpoint:(P.endpoint=O,O._deleteOnDetach=!1,O._doNotDeleteOnDetach=!0))}}};return n("source",0,this.sourceEndpointDefinitions,M.type||"default")!==!1&&n("target",1,this.targetEndpointDefinitions,M.type||"default")!==!1?(M.sourceEndpoint&&M.targetEndpoint&&(aI(M.sourceEndpoint,M.targetEndpoint)||(M=null)),M):void 0}.bind(aq),aF=function(h){var f=aq.Defaults.ConnectionType||aq.getDefaultConnectionType();h._jsPlumb=aq,h.newConnection=aF,h.newEndpoint=aD,h.endpointsByUUID=aa,h.endpointsByElement=ac,h.finaliseConnection=aE,h.id="con_"+aO();var i=new f(h);return i.isDetachable()&&(i.endpoints[0].initDraggable("_jsPlumbSource"),i.endpoints[1].initDraggable("_jsPlumbTarget")),i},aE=aq.finaliseConnection=function(h,f,n,l){if(f=f||{},h.suspendedEndpoint||ad.push(h),h.pending=null,h.endpoints[0].isTemporarySource=!1,l!==!1&&aq.anchorManager.newConnection(h),aL(h.source),!f.doNotFireConnectionEvent&&f.fireEvent!==!1){var i={connection:h,source:h.source,target:h.target,sourceId:h.sourceId,targetId:h.targetId,sourceEndpoint:h.endpoints[0],targetEndpoint:h.endpoints[1]};aq.fire("connection",i,n)}},aD=function(h,f){var n=aq.Defaults.EndpointType||s.Endpoint,l=s.extend({},h);l._jsPlumb=aq,l.newConnection=aF,l.newEndpoint=aD,l.endpointsByUUID=aa,l.endpointsByElement=ac,l.fireDetachEvent=a1,l.elementId=f||aw(l.source);var i=new n(l);return i.id="ep_"+aO(),d(l.elementId,l.source),s.headless||aq.getDragManager().endpointAdded(l.source,f),i},aC=function(O,N,M){var L=ac[O];if(L&&L.length){for(var K=0,q=L.length;q>K;K++){for(var o=0,n=L[K].connections.length;n>o;o++){var l=N(L[K].connections[o]);if(l){return}}M&&M(L[K])}}},aB=function(h,f){return s.each(h,function(i){aq.isDragSupported(i)&&(aW[aq.getAttribute(i,"id")]=f,aq.setElementDraggable(i,f))})},aA=function(h,f,n){f="block"===f;var l=null;n&&(l=function(o){o.setVisible(f,!0,!0)});var i=aj(h);aC(i.id,function(o){if(f&&n){var q=o.sourceId===i.id?1:0;o.endpoints[q].isVisible()&&o.setVisible(!0)}else{o.setVisible(f)}},l)},az=function(h){var f;return s.each(h,function(i){var l=aq.getAttribute(i,"id");return f=null==aW[l]?!1:aW[l],f=!f,aW[l]=f,aq.setDraggable(i,f),f}.bind(this)),f},ay=function(h,f){var i=null;f&&(i=function(n){var l=n.isVisible();n.setVisible(!l)}),aC(h,function(n){var l=n.isVisible();n.setVisible(!l)},i)},ax=function(h){var f=aY[h];return f?{o:f,s:aU[h]}:bc({elId:h})},aw=function(h,f,l){if(G.isString(h)){return h}if(null==h){return null}var i=aq.getAttribute(h,"id");return i&&"undefined"!==i||(2==arguments.length&&void 0!==arguments[1]?i=f:(1==arguments.length||3==arguments.length&&!arguments[2])&&(i="jsPlumb_"+ap+"_"+aO()),l||aq.setAttribute(h,"id",i)),i};this.setConnectionBeingDragged=function(f){aV=f},this.isConnectionBeingDragged=function(){return aV},this.getManagedElements=function(){return r},this.getRenderMode=function(){return"svg"},this.connectorClass="jsplumb-connector",this.connectorOutlineClass="jsplumb-connector-outline",this.editableConnectorClass="jsplumb-connector-editable",this.connectedClass="jsplumb-connected",this.hoverClass="jsplumb-hover",this.endpointClass="jsplumb-endpoint",this.endpointConnectedClass="jsplumb-endpoint-connected",this.endpointFullClass="jsplumb-endpoint-full",this.endpointDropAllowedClass="jsplumb-endpoint-drop-allowed",this.endpointDropForbiddenClass="jsplumb-endpoint-drop-forbidden",this.overlayClass="jsplumb-overlay",this.draggingClass="jsplumb-dragging",this.elementDraggingClass="jsplumb-element-dragging",this.sourceElementDraggingClass="jsplumb-source-element-dragging",this.targetElementDraggingClass="jsplumb-target-element-dragging",this.endpointAnchorClassPrefix="jsplumb-endpoint-anchor",this.hoverSourceClass="jsplumb-source-hover",this.hoverTargetClass="jsplumb-target-hover",this.dragSelectClass="jsplumb-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(Q,P,O){O=O||{};var N=s.extend({},O);s.extend(N,P),N.endpoint=N.endpoint||aq.Defaults.Endpoint,N.paintStyle=N.paintStyle||aq.Defaults.EndpointStyle;for(var M=[],L=G.isArray(Q)||null!=Q.length&&!G.isString(Q)?Q:[Q],K=0,q=L.length;q>K;K++){N.source=aq.getElement(L[K]),at(N.source);var o=aw(N.source),n=aD(N,o),h=d(o,N.source).info.o;G.addToList(ac,o,n),aS||n.paint({anchorLoc:n.anchor.compute({xy:[h.left,h.top],wh:aU[o],element:n,timestamp:aR}),timestamp:aR}),M.push(n),n._doNotDeleteOnDetach=!0}return 1==M.length?M[0]:M},this.addEndpoints=function(l,h,L){for(var K=[],q=0,o=h.length;o>q;q++){var n=aq.addEndpoint(l,h[q],L);G.isArray(n)?Array.prototype.push.apply(K,n):K.push(n)}return K},this.animate=function(l,h,L){if(!this.animationSupported){return !1}L=L||{};var K=aq.getElement(l),q=aw(K),o=s.animEvents.step,n=s.animEvents.complete;L[o]=G.wrap(L[o],function(){aq.revalidate(q)}),L[n]=G.wrap(L[n],function(){aq.revalidate(q)}),aq.doAnimate(K,h,L)},this.checkCondition=function(l){var h=aq.getListener(l),L=!0;if(h&&h.length>0){var K=Array.prototype.slice.call(arguments,1);try{for(var q=0,o=h.length;o>q;q++){L=L&&h[q].apply(h[q],K)}}catch(n){G.log(aq,"cannot check condition ["+l+"]"+n)}}return L},this.connect=function(h,f){var l,i=aH(h,f);if(i){if(null==i.source&&null==i.sourceEndpoint){return G.log("Cannot establish connection - source does not exist"),void 0}if(null==i.target&&null==i.targetEndpoint){return G.log("Cannot establish connection - target does not exist"),void 0}at(i.source),l=aF(i),aE(l,i)}return l};var a5=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],av=function(S,R,Q,P){var O,N,M,L=a5[Q],K=S[L.elId],q=(S[L.el],S.endpoints[Q]),o={index:Q,originalSourceId:0===Q?K:S.sourceId,newSourceId:S.sourceId,originalTargetId:1==Q?K:S.targetId,newTargetId:S.targetId,connection:S};if(R.constructor==s.Endpoint){O=R,O.addConnection(S),R=O.element}else{if(N=aw(R),M=this[L.epDefs][N],N===S[L.elId]){O=null}else{if(M){for(var n in M){if(!M[n].enabled){return}O=null!=M[n].endpoint&&M[n].endpoint._jsPlumb?M[n].endpoint:this.addEndpoint(R,M[n].def),M[n].uniqueEndpoint&&(M[n].endpoint=O),O._doNotDeleteOnDetach=!1,O._deleteOnDetach=!0,O.addConnection(S)}}else{O=S.makeEndpoint(0===Q,R,N),O._doNotDeleteOnDetach=!1,O._deleteOnDetach=!0}}}return null!=O&&(q.detachFromConnection(S),S.endpoints[Q]=O,S[L.el]=O.element,S[L.elId]=O.elementId,o[0===Q?"newSourceId":"newTargetId"]=O.elementId,aG(o),P||S.repaint()),o.element=R,o}.bind(this);this.setSource=function(h,f,l){var i=av(h,f,0,l);this.anchorManager.sourceChanged(i.originalSourceId,i.newSourceId,h,i.el)},this.setTarget=function(h,f,l){var i=av(h,f,1,l);this.anchorManager.updateOtherEndpoint(i.originalSourceId,i.originalTargetId,i.newTargetId,h)},this.deleteEndpoint=function(h,f,l){var i="string"==typeof h?aa[h]:h;return i&&aq.deleteObject({endpoint:i,dontUpdateHover:f,deleteAttachedObjects:l}),aq},this.deleteEveryEndpoint=function(){var h=aq.setSuspendDrawing(!0);for(var f in ac){var n=ac[f];if(n&&n.length){for(var l=0,i=n.length;i>l;l++){aq.deleteEndpoint(n[l],!0)}}}return ac={},r={},aa={},aY={},aX={},aq.anchorManager.reset(),aq.getDragManager().reset(),h||aq.setSuspendDrawing(!1),aq};var a1=function(i,h,q){var o=aq.Defaults.ConnectionType||aq.getDefaultConnectionType(),n=i.constructor==o,l=n?{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]}:i;h&&aq.fire("connectionDetached",l,q),aq.anchorManager.connectionDetached(l)},aG=aq.fireMoveEvent=function(h,f){aq.fire("connectionMoved",h,f)};this.unregisterEndpoint=function(i){i._jsPlumb.uuid&&(aa[i._jsPlumb.uuid]=null),aq.anchorManager.deleteEndpoint(i);for(var h in ac){var q=ac[h];if(q){for(var o=[],n=0,l=q.length;l>n;n++){q[n]!=i&&o.push(q[n])}ac[h]=o}ac[h].length<1&&delete ac[h]}},this.detach=function(){if(0!==arguments.length){var P=aq.Defaults.ConnectionType||aq.getDefaultConnectionType(),O=arguments[0].constructor==P,N=2==arguments.length?O?arguments[1]||{}:arguments[0]:arguments[0],M=N.fireEvent!==!1,L=N.forceDetach,K=O?arguments[0]:N.connection,q=O?null:N.deleteAttachedObjects;if(K){(L||G.functionChain(!0,!1,[[K.endpoints[0],"isDetachAllowed",[K]],[K.endpoints[1],"isDetachAllowed",[K]],[K,"isDetachAllowed",[K]],[aq,"checkCondition",["beforeDetach",K]]]))&&K.endpoints[0].detach({connection:K,ignoreTarget:!1,forceDetach:!0,fireEvent:M,deleteAttachedObjects:q})}else{var o=s.extend({},N);if(o.uuids){aK(o.uuids[0]).detachFrom(aK(o.uuids[1]),M)}else{if(o.sourceEndpoint&&o.targetEndpoint){o.sourceEndpoint.detachFrom(o.targetEndpoint)}else{var n=aw(aq.getElement(o.source)),h=aw(aq.getElement(o.target));aC(n,function(f){(f.sourceId==n&&f.targetId==h||f.targetId==n&&f.sourceId==h)&&aq.checkCondition("beforeDetach",f)&&f.endpoints[0].detach({connection:f,ignoreTarget:!1,forceDetach:!0,fireEvent:M})})}}}}},this.detachAllConnections=function(i,h){h=h||{},i=aq.getElement(i);var q=aw(i),o=ac[q];if(o&&o.length){for(var n=0,l=o.length;l>n;n++){o[n].detachAll(h.fireEvent!==!1,h.forceDetach)}}return aq},this.detachEveryConnection=function(f){return f=f||{},aq.batch(function(){for(var h in ac){var n=ac[h];if(n&&n.length){for(var l=0,i=n.length;i>l;l++){n[l].detachAll(f.fireEvent!==!1,f.forceDetach)}}}ad.length=0}),aq},this.deleteObject=function(P){var O={endpoints:{},connections:{},endpointCount:0,connectionCount:0},N=(P.fireEvent!==!1,P.deleteAttachedObjects!==!1),M=function(i){if(null!=i&&null==O.connections[i.id]&&(P.dontUpdateHover||null==i._jsPlumb||i.setHover(!1),O.connections[i.id]=i,O.connectionCount++,N)){for(var f=0;f<i.endpoints.length;f++){i.endpoints[f]._deleteOnDetach&&L(i.endpoints[f])}}},L=function(Q){if(null!=Q&&null==O.endpoints[Q.id]&&(P.dontUpdateHover||null==Q._jsPlumb||Q.setHover(!1),O.endpoints[Q.id]=Q,O.endpointCount++,N)){for(var l=0;l<Q.connections.length;l++){var i=Q.connections[l];M(i)}}};P.connection?M(P.connection):L(P.endpoint);for(var K in O.connections){var q=O.connections[K];if(q._jsPlumb){G.removeWithFunction(ad,function(f){return q.id==f.id}),a1(q,P.fireEvent===!1?!1:!q.pending,P.originalEvent);var o=null==P.deleteAttachedObjects?null:!P.deleteAttachedObjects;q.endpoints[0].detachFromConnection(q,null,o),q.endpoints[1].detachFromConnection(q,null,o),q.cleanup(!0),q.destroy(!0)}}for(var n in O.endpoints){var h=O.endpoints[n];h._jsPlumb&&(aq.unregisterEndpoint(h),h.cleanup(!0),h.destroy(!0))}return O},this.draggable=function(h,f){var i;return z(function(l){i=aj(l),i.el&&aJ(i.el,!0,f,i.id,!0)},h),aq},this.droppable=function(h,f){var i;return f=f||{},f.allowLoopback=!1,z(function(l){i=aj(l),i.el&&aq.initDroppable(i.el,f)},h),aq};var ak=function(i,h,q,o){for(var n=0,l=i.length;l>n;n++){i[n][h].apply(i[n],q)}return o(i)},g=function(i,h,q){for(var o=[],n=0,l=i.length;l>n;n++){o.push([i[n][h].apply(i[n],q),i[n]])}return o},b=function(h,f,i){return function(){return ak(h,f,arguments,i)}},a8=function(h,f){return function(){return g(h,f,arguments)}},a2=function(h,f){var n=[];if(h){if("string"==typeof h){if("*"===h){return h}n.push(h)}else{if(f){n=h}else{if(h.length){for(var l=0,i=h.length;i>l;l++){n.push(aj(h[l]).id)}}else{n.push(aj(h).id)}}}}return n},aN=function(h,f,i){return"*"===h?!0:h.length>0?-1!=h.indexOf(f):!i};this.getConnections=function(T,S){T?T.constructor==String&&(T={scope:T}):T={};for(var R=T.scope||aq.getDefaultScope(),Q=a2(R,!0),P=a2(T.source),O=a2(T.target),N=!S&&Q.length>1?{}:[],M=function(f,l){if(!S&&Q.length>1){var i=N[f];null==i&&(i=N[f]=[]),i.push(l)}else{N.push(l)}},L=0,K=ad.length;K>L;L++){var q=ad[L],o=q.proxies&&q.proxies[0]?q.proxies[0].originalEp.elementId:q.sourceId,h=q.proxies&&q.proxies[1]?q.proxies[1].originalEp.elementId:q.targetId;aN(Q,q.scope)&&aN(P,o)&&aN(O,h)&&M(q.scope,q)}return N};var ao=function(h,f){return function(n){for(var l=0,i=h.length;i>l;l++){n(h[l])}return f(h)}},k=function(f){return function(h){return f[h]}},c=function(i,h){var K,q,o={length:i.length,each:ao(i,h),get:k(i)},n=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],l=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(K=0,q=n.length;q>K;K++){o[n[K]]=b(i,n[K],h)}for(K=0,q=l.length;q>K;K++){o[l[K]]=a8(i,l[K])}return o},ba=function(h){var f=c(h,ba);return s.extend(f,{setDetachable:b(h,"setDetachable",ba),setReattach:b(h,"setReattach",ba),setConnector:b(h,"setConnector",ba),detach:function(){for(var i=0,l=h.length;l>i;i++){aq.detach(h[i])}},isDetachable:a8(h,"isDetachable"),isReattach:a8(h,"isReattach")})},a4=function(h){var f=c(h,a4);return s.extend(f,{setEnabled:b(h,"setEnabled",a4),setAnchor:b(h,"setAnchor",a4),isEnabled:a8(h,"isEnabled"),detachAll:function(){for(var i=0,l=h.length;l>i;i++){h[i].detachAll()}},remove:function(){for(var i=0,l=h.length;l>i;i++){aq.deleteObject({endpoint:h[i]})}}})};this.select=function(f){return f=f||{},f.scope=f.scope||"*",ba(f.connections||aq.getConnections(f,!0))},this.selectEndpoints=function(bb){bb=bb||{},bb.scope=bb.scope||"*";var ab=!bb.element&&!bb.source&&!bb.target,Z=ab?"*":a2(bb.element),Y=ab?"*":a2(bb.source),X=ab?"*":a2(bb.target),W=a2(bb.scope,!0),V=[];for(var U in ac){var T=aN(Z,U,!0),S=aN(Y,U,!0),R="*"!=Y,Q=aN(X,U,!0),P="*"!=X;if(T||S||Q){bb:for(var O=0,N=ac[U].length;N>O;O++){var M=ac[U][O];if(aN(W,M.scope,!0)){var L=R&&Y.length>0&&!M.isSource,K=P&&X.length>0&&!M.isTarget;if(L||K){continue bb}V.push(M)}}}}return a4(V)},this.getAllConnections=function(){return ad},this.getDefaultScope=function(){return aQ},this.getEndpoint=aK,this.getEndpoints=function(f){return ac[aj(f).id]},this.getDefaultEndpointType=function(){return s.Endpoint},this.getDefaultConnectionType=function(){return s.Connection},this.getId=aw,this.appendElement=aM;var aT=!1;this.isHoverSuspended=function(){return aT},this.setHoverSuspended=function(f){aT=f},this.hide=function(h,f){return aA(h,"none",f),aq},this.idstamp=aO,this.connectorsInitialized=!1,this.registerConnectorType=function(h,f){H.push([h,f])};var at=function(h){if(!ah&&h){var f=aq.getElement(h);f.offsetParent&&aq.setContainer(f.offsetParent)}},m=function(){aq.Defaults.Container&&aq.setContainer(aq.Defaults.Container)},d=aq.manage=function(h,f,i){return r[h]||(r[h]={el:f,endpoints:[],connections:[]},r[h].info=bc({elId:h,timestamp:aR}),i||aq.fire("manageElement",{id:h,info:r[h].info,el:f})),r[h]},bc=this.updateOffset=function(i){var h,q=i.timestamp,o=i.recalc,n=i.offset,l=i.elId;return aS&&!q&&(q=aR),!o&&q&&q===aX[l]?{o:i.offset||aY[l],s:aU[l]}:(o||!n&&null==aY[l]?(h=r[l]?r[l].el:null,null!=h&&(aU[l]=aq.getSize(h),aY[l]=aq.getOffset(h),aX[l]=q)):(aY[l]=n||aY[l],null==aU[l]&&(h=r[l].el,null!=h&&(aU[l]=aq.getSize(h))),aX[l]=q),aY[l]&&!aY[l].right&&(aY[l].right=aY[l].left+aU[l][0],aY[l].bottom=aY[l].top+aU[l][1],aY[l].width=aU[l][0],aY[l].height=aU[l][1],aY[l].centerx=aY[l].left+aY[l].width/2,aY[l].centery=aY[l].top+aY[l].height/2),{o:aY[l],s:aU[l]})};this.init=function(){J=I.jsPlumb.getRenderModes();var l=function(f,o,n){I.jsPlumb.Connectors[f][o]=function(){n.apply(this,arguments),I.jsPlumb.ConnectorRenderers[f].apply(this,arguments)},G.extend(I.jsPlumb.Connectors[f][o],[n,I.jsPlumb.ConnectorRenderers[f]])};if(!I.jsPlumb.connectorsInitialized){for(var i=0;i<H.length;i++){for(var h=0;h<J.length;h++){l(J[h],H[i][1],H[i][0])}}I.jsPlumb.connectorsInitialized=!0}ae||(m(),aq.anchorManager=new I.jsPlumb.AnchorManager({jsPlumbInstance:aq}),ae=!0,aq.fire("ready",aq))}.bind(this),this.log=af,this.jsPlumbUIComponent=x,this.makeAnchor=function(){var h,K=function(f,i){if(I.jsPlumb.Anchors[f]){return new I.jsPlumb.Anchors[f](i)}if(!aq.Defaults.DoNotThrowErrors){throw {msg:"jsPlumb: unknown anchor type '"+f+"'"}}};if(0===arguments.length){return null}var q=arguments[0],o=arguments[1],n=(arguments[2],null);if(q.compute&&q.getOrientation){return q}if("string"==typeof q){n=K(arguments[0],{elementId:o,jsPlumbInstance:aq})}else{if(G.isArray(q)){if(G.isArray(q[0])||G.isString(q[0])){2==q.length&&G.isObject(q[1])?G.isString(q[0])?(h=I.jsPlumb.extend({elementId:o,jsPlumbInstance:aq},q[1]),n=K(q[0],h)):(h=I.jsPlumb.extend({elementId:o,jsPlumbInstance:aq,anchors:q[0]},q[1]),n=new I.jsPlumb.DynamicAnchor(h)):n=new s.DynamicAnchor({anchors:q,selector:null,elementId:o,jsPlumbInstance:aq})}else{var l={x:q[0],y:q[1],orientation:q.length>=4?[q[2],q[3]]:[0,0],offsets:q.length>=6?[q[4],q[5]]:[0,0],elementId:o,jsPlumbInstance:aq,cssClass:7==q.length?q[6]:null};n=new I.jsPlumb.Anchor(l),n.clone=function(){return new I.jsPlumb.Anchor(l)}}}}return n.id||(n.id="anchor_"+aO()),n},this.makeAnchors=function(h,K,q){for(var o=[],n=0,l=h.length;l>n;n++){"string"==typeof h[n]?o.push(I.jsPlumb.Anchors[h[n]]({elementId:K,jsPlumbInstance:q})):G.isArray(h[n])&&o.push(aq.makeAnchor(h[n],K,q))}return o},this.makeDynamicAnchor=function(f,h){return new I.jsPlumb.DynamicAnchor({anchors:f,selector:h,elementId:null,jsPlumbInstance:aq})},this.targetEndpointDefinitions={};var a6=function(){};this.sourceEndpointDefinitions={};var aZ=function(O,N,M,L,K){for(var q=O.target||O.srcElement,o=!1,n=L.getSelector(N,M),l=0;l<n.length;l++){if(n[l]==q){o=!0;break}}return K?!o:o},au=function(h,M,L,K,q){var o=new x(M),n=M._jsPlumb.EndpointDropHandler({jsPlumb:aq,enabled:function(){return h.def.enabled},isFull:function(){var f=aq.select({target:h.id}).length;return h.def.maxConnections>0&&f>=h.def.maxConnections},element:h.el,elementId:h.id,isSource:K,isTarget:q,addClass:function(f){aq.addClass(h.el,f)},removeClass:function(f){aq.removeClass(h.el,f)},onDrop:function(i){var f=i.endpoints[0];f.anchor.locked=!1},isDropAllowed:function(){return o.isDropAllowed.apply(o,arguments)},isRedrop:function(f){return null!=f.suspendedElement&&null!=f.suspendedEndpoint&&f.suspendedEndpoint.element===h.el},getEndpoint:function(U){var T=h.def.endpoint;if(null==T||null==T._jsPlumb){var S=aq.deriveEndpointAndAnchorSpec(U.getType().join(" "),!0),R=S.endpoints?I.jsPlumb.extend(M,{endpoint:h.def.def.endpoint||S.endpoints[1]}):M;S.anchors&&(R=I.jsPlumb.extend(R,{anchor:h.def.def.anchor||S.anchors[1]})),T=aq.addEndpoint(h.el,R),T._mtNew=!0}if(M.uniqueEndpoint&&(h.def.endpoint=T),T._doNotDeleteOnDetach=!1,T._deleteOnDetach=!0,U.isDetachable()&&T.initDraggable(),null!=T.anchor.positionFinder){var Q=aq.getUIPosition(arguments,aq.getZoom()),P=aq.getOffset(h.el),O=aq.getSize(h.el),N=null==Q?[0,0]:T.anchor.positionFinder(Q,P,O,T.anchor.constructorParams);T.anchor.x=N[0],T.anchor.y=N[1]}return T},maybeCleanup:function(f){f._mtNew&&0===f.connections.length?aq.deleteObject({endpoint:f}):delete f._mtNew}}),l=I.jsPlumb.dragEvents.drop;return L.scope=L.scope||M.scope||aq.Defaults.Scope,L[l]=G.wrap(L[l],n,!0),q&&(L[I.jsPlumb.dragEvents.over]=function(){return !0}),M.allowLoopback===!1&&(L.canDrop=function(f){var i=f.getDragElement()._jsPlumbRelatedElement;return i!=h.el}),aq.initDroppable(h.el,L,"internal"),n};this.makeTarget=function(O,N,M){var L=I.jsPlumb.extend({_jsPlumb:this},M);I.jsPlumb.extend(L,N),a6(L,1,this);for(var K=(!(L.deleteEndpointsOnDetach===!1),L.maxConnections||-1),q=function(f){var T=aj(f),S=T.id,R=I.jsPlumb.extend({},L.dropOptions||{}),Q="default";this.targetEndpointDefinitions[S]=this.targetEndpointDefinitions[S]||{},at(S);var P={def:I.jsPlumb.extend({},L),uniqueEndpoint:L.uniqueEndpoint,maxConnections:K,enabled:!0};T.def=P,this.targetEndpointDefinitions[S][Q]=P,au(T,L,R,L.isSource===!0,!0),T.el._katavorioDrop[T.el._katavorioDrop.length-1].targetDef=P}.bind(this),o=O.length&&O.constructor!=String?O:[O],n=0,l=o.length;l>n;n++){q(o[n])}return this},this.unmakeTarget=function(h,f){var i=aj(h);return aq.destroyDroppable(i.el,"internal"),f||delete this.targetEndpointDefinitions[i.id],this},this.makeSource=function(S,R,Q){var P=I.jsPlumb.extend({_jsPlumb:this},Q);I.jsPlumb.extend(P,R);var O=P.connectionType||"default",N=aq.deriveEndpointAndAnchorSpec(O);P.endpoint=P.endpoint||N.endpoints[0],P.anchor=P.anchor||N.anchors[0],a6(P,0,this);for(var M=P.maxConnections||-1,L=P.onMaxConnections,K=function(bb){var ab=bb.id,Z=this.getElement(bb.el);this.sourceEndpointDefinitions[ab]=this.sourceEndpointDefinitions[ab]||{},at(ab);var Y={def:I.jsPlumb.extend({},P),uniqueEndpoint:P.uniqueEndpoint,maxConnections:M,enabled:!0};this.sourceEndpointDefinitions[ab][O]=Y,bb.def=Y;var X=I.jsPlumb.dragEvents.stop,W=I.jsPlumb.dragEvents.drag,V=I.jsPlumb.extend({},P.dragOptions||{}),U=V.drag,T=V.stop,f=null,bf=!1;V.scope=V.scope||P.scope,V[W]=G.wrap(V[W],function(){U&&U.apply(this,arguments),bf=!1}),V[X]=G.wrap(V[X],function(){if(T&&T.apply(this,arguments),this.currentlyDragging=!1,null!=f._jsPlumb){var bn=P.anchor||this.Defaults.Anchor,bm=f.anchor,bl=f.connections[0],bk=this.makeAnchor(bn,ab,this),bj=f.element;if(null!=bk.positionFinder){var bi=aq.getOffset(bj),bh=this.getSize(bj),bg={left:bi.left+bm.x*bh[0],top:bi.top+bm.y*bh[1]},q=bk.positionFinder(bg,bi,bh,bk.constructorParams);bk.x=q[0],bk.y=q[1]}f.setAnchor(bk,!0),f.repaint(),this.repaint(f.elementId),null!=bl&&this.repaint(bl.targetId)}}.bind(this));var be=function(bk){if(3!==bk.which&&2!==bk.button){var bj=this.sourceEndpointDefinitions[ab][O];if(bj.enabled){if(ab=this.getId(this.getElement(bb.el)),P.filter){var bi=G.isString(P.filter)?aZ(bk,bb.el,P.filter,this,P.filterExclude):P.filter(bk,bb.el);if(bi===!1){return}}var bh=this.select({source:ab}).length;if(bj.maxConnections>=0&&bh>=bj.maxConnections){return L&&L({element:bb.el,maxConnections:M},bk),!1}var bg=I.jsPlumb.getPositionOnElement(bk,Z,al),bp={};I.jsPlumb.extend(bp,P),bp.isTemporarySource=!0,bp.anchor=[bg[0],bg[1],0,0],bp.dragOptions=V,bj.def.scope&&(bp.scope=bj.def.scope),f=this.addEndpoint(ab,bp),bf=!0,f._doNotDeleteOnDetach=!1,f._deleteOnDetach=!0,bj.uniqueEndpoint&&(bj.endpoint?f.finalEndpoint=bj.endpoint:(bj.endpoint=f,f._deleteOnDetach=!1,f._doNotDeleteOnDetach=!0));var bo=function(){aq.off(f.canvas,"mouseup",bo),aq.off(bb.el,"mouseup",bo),bf&&(bf=!1,aq.deleteEndpoint(f))};aq.on(f.canvas,"mouseup",bo),aq.on(bb.el,"mouseup",bo);var bn={};if(bj.def.extract){for(var bm in bj.def.extract){var bl=(bk.srcElement||bk.target).getAttribute(bm);bl&&(bn[bj.def.extract[bm]]=bl)}}aq.trigger(f.canvas,"mousedown",bk,bn),G.consume(bk)}}}.bind(this);this.on(bb.el,"mousedown",be),Y.trigger=be,P.filter&&(G.isString(P.filter)||G.isFunction(P.filter))&&aq.setDragFilter(bb.el,P.filter);var bd=I.jsPlumb.extend({},P.dropOptions||{});au(bb,P,bd,!0,P.isTarget===!0)}.bind(this),o=S.length&&S.constructor!=String?S:[S],n=0,h=o.length;h>n;n++){K(aj(o[n]))}return this},this.unmakeSource=function(i,h,K){var q=aj(i);aq.destroyDroppable(q.el,"internal");var o=this.sourceEndpointDefinitions[q.id];if(o){for(var n in o){if(null==h||h===n){var l=o[n].trigger;l&&aq.off(q.el,"mousedown",l),K||delete this.sourceEndpointDefinitions[q.id][n]}}}return this},this.unmakeEverySource=function(){for(var f in this.sourceEndpointDefinitions){aq.unmakeSource(f,null,!0)}return this.sourceEndpointDefinitions={},this};var p=function(i,h,q){h=G.isArray(h)?h:[h];var o=aw(i);q=q||"default";for(var n=0;n<h.length;n++){var l=this[h[n]][o];if(l&&l[q]){return l[q].def.scope||this.Defaults.Scope}}}.bind(this),e=function(l,i,L,K){L=G.isArray(L)?L:[L];var q=aw(l);K=K||"default";for(var o=0;o<L.length;o++){var n=this[L[o]][q];n&&n[K]&&(n[K].def.scope=i)}}.bind(this);this.getScope=function(f){return p(f,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(f){return p(f,"sourceEndpointDefinitions")},this.getTargetScope=function(f){return p(f,"targetEndpointDefinitions")},this.setScope=function(h,f,i){this.setSourceScope(h,f,i),this.setTargetScope(h,f,i)},this.setSourceScope=function(h,f,i){e(h,f,"sourceEndpointDefinitions",i),this.setDragScope(h,f)},this.setTargetScope=function(h,f,i){e(h,f,"targetEndpointDefinitions",i),this.setDropScope(h,f)},this.unmakeEveryTarget=function(){for(var f in this.targetEndpointDefinitions){aq.unmakeTarget(f,!0)}return this.targetEndpointDefinitions={},this};var a=function(P,O,N,M,L){var K="source"==P?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(L=L||"default",G.isString(O)&&K[O]&&K[O][L]){K[O][L].enabled=M?!K[O][L].enabled:N}else{if(O.length){for(var q=0,o=O.length;o>q;q++){var n=aj(O[q]);K[n.id]&&K[n.id][L]&&(K[n.id][L].enabled=M?!K[n.id][L].enabled:N)}}else{var l=aj(O).id;K[l]&&K[l][L]&&(K[l][L].enabled=M?!K[l][L].enabled:N)}}return this}.bind(this),a7=function(h,f){return G.isString(h)||!h.length?f.apply(this,[h]):h.length?f.apply(this,[h[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(h,f){return a("source",h,null,!0,f),this.isSourceEnabled(h,f)},this.setSourceEnabled=function(h,f,i){return a("source",h,f,null,i)},this.isSource=function(h,f){return f=f||"default",a7(h,function(i){var l=this.sourceEndpointDefinitions[aj(i).id];return null!=l&&null!=l[f]}.bind(this))},this.isSourceEnabled=function(h,f){return f=f||"default",a7(h,function(i){var l=this.sourceEndpointDefinitions[aj(i).id];return l&&l[f]&&l[f].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(h,f){return a("target",h,null,!0,f),this.isTargetEnabled(h,f)},this.isTarget=function(h,f){return f=f||"default",a7(h,function(i){var l=this.targetEndpointDefinitions[aj(i).id];return null!=l&&null!=l[f]}.bind(this))},this.isTargetEnabled=function(h,f){return f=f||"default",a7(h,function(i){var l=this.targetEndpointDefinitions[aj(i).id];return l&&l[f]&&l[f].enabled===!0}.bind(this))},this.setTargetEnabled=function(h,f,i){return a("target",h,f,null,i)},this.ready=function(f){aq.bind("ready",f)};var a0=function(h,f){if("object"==typeof h&&h.length){for(var l=0,i=h.length;i>l;l++){f(h[l])}}else{f(h)}return aq};this.repaint=function(h,f,i){return a0(h,function(l){aL(l,f,i)})},this.revalidate=function(h,f,i){return a0(h,function(l){var n=i?l:aq.getId(l);aq.updateOffset({elId:n,recalc:!0,timestamp:f}),aq.repaint(l)})},this.repaintEverything=function(){var h,f=F();for(h in ac){aq.updateOffset({elId:h,recalc:!0,timestamp:f})}for(h in ac){aL(h,null,f)}return this},this.removeAllEndpoints=function(h,f,l){l=l||[];var i=function(n){var L,K,q=aj(n),o=ac[q.id];if(o){for(l.push(q),L=0,K=o.length;K>L;L++){aq.deleteEndpoint(o[L],!1)}}if(delete ac[q.id],f&&q.el&&3!=q.el.nodeType&&8!=q.el.nodeType){for(L=0,K=q.el.childNodes.length;K>L;L++){i(q.el.childNodes[L])}}};return i(h),this};var a9=function(h,f){aq.removeAllEndpoints(h.id,!0,f);for(var l=function(n){aq.getDragManager().elementRemoved(n.id),aq.anchorManager.clearFor(n.id),aq.anchorManager.removeFloatingConnection(n.id),aq.isSource(n.el)&&aq.unmakeSource(n.el),aq.isTarget(n.el)&&aq.unmakeTarget(n.el),aq.destroyDraggable(n.el),aq.destroyDroppable(n.el),delete aq.floatingConnections[n.id],delete r[n.id],delete aY[n.id],n.el&&(aq.removeElement(n.el),n.el._jsPlumb=null)},i=1;i<f.length;i++){l(f[i])}l(h)};this.remove=function(h,f){var l=aj(h),i=[];return l.text?l.el.parentNode.removeChild(l.el):l.id&&aq.batch(function(){a9(l,i)},f===!1),aq},this.empty=function(h,f){var l=[],i=function(o,n){var q=aj(o);if(q.text){q.el.parentNode.removeChild(q.el)}else{if(q.el){for(;q.el.childNodes.length>0;){i(q.el.childNodes[0])}n||a9(q,l)}}};return aq.batch(function(){i(h,!0)},f===!1),aq},this.reset=function(){aq.silently(function(){aq.removeAllGroups(),aq.removeGroupManager(),aq.deleteEveryEndpoint(),aq.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},ad.length=0,this.doReset&&this.doReset()}.bind(this))};var a3=function(f){f.canvas&&f.canvas.parentNode&&f.canvas.parentNode.removeChild(f.canvas),f.cleanup(),f.destroy()};this.clear=function(){aq.select().each(a3),aq.selectEndpoints().each(a3),ac={},aa={}},this.setDefaultScope=function(f){return aQ=f,aq},this.setDraggable=aB,this.deriveEndpointAndAnchorSpec=function(N,M){for(var L=((M?"":"default ")+N).split(/[\s]/),K=null,q=null,o=null,n=null,l=0;l<L.length;l++){var h=aq.getType(L[l],"connection");h&&(h.endpoints&&(K=h.endpoints),h.endpoint&&(q=h.endpoint),h.anchors&&(n=h.anchors),h.anchor&&(o=h.anchor))}return{endpoints:K?K:[q,q],anchors:n?n:[o,o]}},this.setId=function(O,N,M){var L;G.isString(O)?L=O:(O=this.getElement(O),L=this.getId(O));var K=this.getConnections({source:L,scope:"*"},!0),q=this.getConnections({target:L,scope:"*"},!0);N=""+N,M?O=this.getElement(N):(O=this.getElement(L),this.setAttribute(O,"id",N)),ac[N]=ac[L]||[];for(var o=0,n=ac[N].length;n>o;o++){ac[N][o].setElementId(N),ac[N][o].setReferenceElement(O)}delete ac[L],this.sourceEndpointDefinitions[N]=this.sourceEndpointDefinitions[L],delete this.sourceEndpointDefinitions[L],this.targetEndpointDefinitions[N]=this.targetEndpointDefinitions[L],delete this.targetEndpointDefinitions[L],this.anchorManager.changeId(L,N),this.getDragManager().changeId(L,N),r[N]=r[L],delete r[L];var l=function(R,Q,P){for(var i=0,h=R.length;h>i;i++){R[i].endpoints[Q].setElementId(N),R[i].endpoints[Q].setReferenceElement(O),R[i][P+"Id"]=N,R[i][P]=O}};l(K,0,"source"),l(q,1,"target"),this.repaint(N)},this.setDebugLog=function(f){af=f},this.setSuspendDrawing=function(h,f){var i=aS;return aS=h,aR=h?(new Date).getTime():null,f&&this.repaintEverything(),i},this.isSuspendDrawing=function(){return aS},this.getSuspendedAt=function(){return aR},this.batch=function(h,f){var l=this.isSuspendDrawing();l||this.setSuspendDrawing(!0);try{h()}catch(i){G.log("Function run while suspended failed",i)}l||this.setSuspendDrawing(!1,!f)},this.doWhileSuspended=this.batch,this.getCachedData=ax,this.timestamp=F,this.show=function(h,f){return aA(h,"block",f),aq},this.toggleVisible=ay,this.toggleDraggable=az,this.addListener=this.bind};G.extend(I.jsPlumbInstance,G.EventGenerator,{setAttribute:function(e,d,f){this.setAttribute(e,d,f)},getAttribute:function(b,d){return this.getAttribute(I.jsPlumb.getElement(b),d)},convertToFullOverlaySpec:function(b){return G.isString(b)&&(b=[b,{}]),b[1].id=b[1].id||G.uuid(),b},registerConnectionType:function(b,k){if(this._connectionTypes[b]=I.jsPlumb.extend({},k),k.overlays){for(var i={},h=0;h<k.overlays.length;h++){var g=this.convertToFullOverlaySpec(k.overlays[h]);i[g[1].id]=g}this._connectionTypes[b].overlays=i}},registerConnectionTypes:function(d){for(var c in d){this.registerConnectionType(c,d[c])}},registerEndpointType:function(b,k){if(this._endpointTypes[b]=I.jsPlumb.extend({},k),k.overlays){for(var i={},h=0;h<k.overlays.length;h++){var g=this.convertToFullOverlaySpec(k.overlays[h]);i[g[1].id]=g}this._endpointTypes[b].overlays=i}},registerEndpointTypes:function(d){for(var c in d){this.registerEndpointType(c,d[c])}},getType:function(d,c){return"connection"===c?this._connectionTypes[d]:this._endpointTypes[d]},setIdChanged:function(d,c){this.setId(d,c,!0)},setParent:function(h,g){var m=this.getElement(h),l=this.getId(m),k=this.getElement(g),i=this.getId(k);m.parentNode.removeChild(m),k.appendChild(m),this.getDragManager().setParent(m,l,k,i)},extend:function(f,e,h){var g;if(h){for(g=0;g<h.length;g++){f[h[g]]=e[h[g]]}}else{for(g in e){f[g]=e[g]}}return f},floatingConnections:{},getFloatingAnchorIndex:function(b){return b.endpoints[0].isFloating()?0:b.endpoints[1].isFloating()?1:-1}});var s=new t;I.jsPlumb=s,s.getInstance=function(d){var c=new t(d);return c.init(),c},s.each=function(e,d){if(null!=e){if("string"==typeof e){d(s.getElement(e))}else{if(null!=e.length){for(var f=0;f<e.length;f++){d(s.getElement(e[f]))}}else{d(e)}}}},"function"==typeof define&&(define("jsplumb",[],function(){return s}),define("jsplumbinstance",[],function(){return s.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=s),"undefined"!=typeof module&&(module.exports=s)}.call("undefined"!=typeof window?window:this),function(){var z=this,y=z.jsPlumbUtil,x=(!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),function(f,e){if(null==f){return[0,0]}var h=s(f),g=t(h,0);return[g[e+"X"],g[e+"Y"]]}),w=function(b){return null==b?[0,0]:x(b,"page")},v=function(b){return x(b,"screen")},u=function(b){return x(b,"client")},t=function(d,c){return d.item?d.item(c):d[c]},s=function(b){return b.touches&&b.touches.length>0?b.touches:b.changedTouches&&b.changedTouches.length>0?b.changedTouches:b.targetTouches&&b.targetTouches.length>0?b.targetTouches:[b]},r=function(h){var g={},m=[],l={},k={},i={};this.register=function(d){var c=h.getId(d),b=h.getOffset(d);g[c]||(g[c]=d,m.push(d),l[c]={});var a=function(e){if(e){for(var C=0;C<e.childNodes.length;C++){if(3!=e.childNodes[C].nodeType&&8!=e.childNodes[C].nodeType){var B=jsPlumb.getElement(e.childNodes[C]),A=h.getId(e.childNodes[C],null,!0);if(A&&k[A]&&k[A]>0){var f=h.getOffset(B);l[c][A]={id:A,offset:{left:f.left-b.left,top:f.top-b.top}},i[A]=c}a(e.childNodes[C])}}}};a(d)},this.updateOffsets=function(F,E){if(null!=F){E=E||{};var D=jsPlumb.getElement(F),C=h.getId(D),B=l[C],A=h.getOffset(D);if(B){for(var f in B){if(B.hasOwnProperty(f)){var d=jsPlumb.getElement(f),a=E[f]||h.getOffset(d);if(null==d.offsetParent&&null!=l[C][f]){continue}l[C][f]={id:f,offset:{left:a.left-A.left,top:a.top-A.top}},i[f]=C}}}}},this.endpointAdded=function(B,A){A=A||h.getId(B);var f=document.body,e=B.parentNode;for(k[A]=k[A]?k[A]+1:1;null!=e&&e!=f;){var d=h.getId(e,null,!0);if(d&&g[d]){var b=h.getOffset(e);if(null==l[d][A]){var a=h.getOffset(B);l[d][A]={id:A,offset:{left:a.left-b.left,top:a.top-b.top}},i[A]=d}break}e=e.parentNode}},this.endpointDeleted=function(d){if(k[d.elementId]&&(k[d.elementId]--,k[d.elementId]<=0)){for(var c in l){l.hasOwnProperty(c)&&l[c]&&(delete l[c][d.elementId],delete i[d.elementId])}}},this.changeId=function(d,c){l[c]=l[d],l[d]={},i[c]=i[d],i[d]=null},this.getElementsForDraggable=function(b){return l[b]},this.elementRemoved=function(d){var c=i[d];c&&(delete l[c][d],delete i[d])},this.reset=function(){g={},m=[],l={},k={}},this.dragEnded=function(a){if(null!=a.offsetParent){var f=h.getId(a),e=i[f];e&&this.updateOffsets(e)}},this.setParent=function(a,E,D,C,B){var A=i[E];l[C]||(l[C]={});var f=h.getOffset(D),d=B||h.getOffset(a);A&&delete l[A][E],l[C][E]={id:E,offset:{left:d.left-f.left,top:d.top-f.top}},i[E]=C},this.clearParent=function(e,d){var f=i[d];f&&(delete l[f][d],delete i[d])},this.revalidateParent=function(a,C,B){var A=i[C];if(A){var f={};f[C]=B,this.updateOffsets(A,f),h.revalidate(A)}},this.getDragAncestor=function(a){var B=jsPlumb.getElement(a),A=h.getId(B),f=i[A];return f?jsPlumb.getElement(f):null}},q=function(b){return null==b?null:b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},p=function(d,c){c=q(c),"undefined"!=typeof d.className.baseVal?d.className.baseVal=c:d.className=c},o=function(b){return"undefined"==typeof b.className.baseVal?b.className:b.className.baseVal},n=function(b,m,l){m=null==m?[]:y.isArray(m)?m:m.split(/\s+/),l=null==l?[]:y.isArray(l)?l:l.split(/\s+/);var k=o(b),i=k.split(/\s+/),h=function(f,e){for(var A=0;A<e.length;A++){if(f){-1==i.indexOf(e[A])&&i.push(e[A])}else{var g=i.indexOf(e[A]);-1!=g&&i.splice(g,1)}}};h(!0,m),h(!1,l),p(b,i.join(" "))};z.jsPlumb.extend(z.jsPlumbInstance.prototype,{headless:!1,pageLocation:w,screenLocation:v,clientLocation:u,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new r(this)),this.dragManager},recalculateOffsets:function(b){this.getDragManager().updateOffsets(b)},createElement:function(f,e,h,g){return this.createElementNS(null,f,e,h,g)},createElementNS:function(i,h,B,A,m){var l,k=null==i?document.createElement(h):document.createElementNS(i,h);B=B||{};for(l in B){k.style[l]=B[l]}A&&(k.className=A),m=m||{};for(l in m){k.setAttribute(l,""+m[l])}return k},getAttribute:function(d,c){return null!=d.getAttribute?d.getAttribute(c):null},setAttribute:function(e,d,f){null!=e.setAttribute&&e.setAttribute(d,f)},setAttributes:function(e,d){for(var f in d){d.hasOwnProperty(f)&&e.setAttribute(f,d[f])}},appendToRoot:function(b){document.body.appendChild(b)},getRenderModes:function(){return["svg"]},getClass:o,addClass:function(d,c){jsPlumb.each(d,function(b){n(b,c)})},hasClass:function(d,c){return d=jsPlumb.getElement(d),d.classList?d.classList.contains(c):-1!=o(d).indexOf(c)},removeClass:function(d,c){jsPlumb.each(d,function(b){n(b,null,c)})},updateClasses:function(e,d,f){jsPlumb.each(e,function(b){n(b,d,f)})},setClass:function(d,c){jsPlumb.each(d,function(b){p(b,c)})},setPosition:function(d,c){d.style.left=c.left+"px",d.style.top=c.top+"px"},getPosition:function(d){var c=function(a){var e=d.style[a];return e?e.substring(0,e.length-2):0};return{left:c("left"),top:c("top")}},getStyle:function(d,c){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(d,null).getPropertyValue(c):d.currentStyle[c]},getSelector:function(e,d){var f=null;return f=1==arguments.length?null!=e.nodeType?e:document.querySelectorAll(e):e.querySelectorAll(d)},getOffset:function(k,i,D){k=jsPlumb.getElement(k),D=D||this.getContainer();for(var C={left:k.offsetLeft,top:k.offsetTop},B=i||null!=D&&k!=D&&k.offsetParent!=D?k.offsetParent:null,A=function(b){null!=b&&b!==document.body&&(b.scrollTop>0||b.scrollLeft>0)&&(C.left-=b.scrollLeft,C.top-=b.scrollTop)}.bind(this);null!=B;){C.left+=B.offsetLeft,C.top+=B.offsetTop,A(B),B=i?B.offsetParent:B.offsetParent==D?null:B.offsetParent}if(null!=D&&!i&&(D.scrollTop>0||D.scrollLeft>0)){var m=null!=k.offsetParent?this.getStyle(k.offsetParent,"position"):"static",l=this.getStyle(k,"position");"absolute"!==l&&"fixed"!==l&&"absolute"!==m&&"fixed"!=m&&(C.left-=D.scrollLeft,C.top-=D.scrollTop)}return C},getPositionOnElement:function(S,R,Q){var P="undefined"!=typeof R.getBoundingClientRect?R.getBoundingClientRect():{left:0,top:0,width:0,height:0},O=document.body,N=document.documentElement,M=window.pageYOffset||N.scrollTop||O.scrollTop,L=window.pageXOffset||N.scrollLeft||O.scrollLeft,K=N.clientTop||O.clientTop||0,J=N.clientLeft||O.clientLeft||0,I=0,H=0,G=P.top+M-K+I*Q,F=P.left+L-J+H*Q,E=jsPlumb.pageLocation(S),D=P.width||R.offsetWidth*Q,C=P.height||R.offsetHeight*Q,B=(E[0]-F)/D,A=(E[1]-G)/C;return[B,A]},getAbsolutePosition:function(d){var c=function(a){var e=d.style[a];return e?parseFloat(e.substring(0,e.length-2)):void 0};return[c("left"),c("top")]},setAbsolutePosition:function(f,e,h,g){h?this.animate(f,{left:"+="+(e[0]-h[0]),top:"+="+(e[1]-h[1])},g):(f.style.left=e[0]+"px",f.style.top=e[1]+"px")},getSize:function(b){return[b.offsetWidth,b.offsetHeight]},getWidth:function(b){return b.offsetWidth},getHeight:function(b){return b.offsetHeight}})}.call("undefined"!=typeof window?window:this),function(){var h=this,g=h.jsPlumb,m=h.jsPlumbUtil,l="__label",k=function(b,o){var n={cssClass:o.cssClass,labelStyle:b.labelStyle,id:l,component:b,_jsPlumb:b._jsPlumb.instance},d=g.extend(n,o);return new (g.Overlays[b._jsPlumb.instance.getRenderMode()].Label)(d)},i=function(b,p){var o=null;if(m.isArray(p)){var n=p[0],c=g.extend({component:b,_jsPlumb:b._jsPlumb.instance},p[1]);3==p.length&&g.extend(c,p[2]),o=new (g.Overlays[b._jsPlumb.instance.getRenderMode()][n])(c)}else{o=p.constructor==String?new (g.Overlays[b._jsPlumb.instance.getRenderMode()][p])({component:b,_jsPlumb:b._jsPlumb.instance}):p}return o.id=o.id||m.uuid(),b.cacheTypeItem("overlay",o,o.id),b._jsPlumb.overlays[o.id]=o,o};g.OverlayCapableJsPlumbUIComponent=function(a){h.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},a.label&&(this.getDefaultType().overlays[l]=["Label",{label:a.label,location:a.labelLocation||this.defaultLabelLocation||0.5,labelStyle:a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:l}]),this.setListenerComponent=function(d){if(this._jsPlumb){for(var c in this._jsPlumb.overlays){this._jsPlumb.overlays[c].setListenerComponent(d)}}}},g.OverlayCapableJsPlumbUIComponent.applyType=function(o,n){if(n.overlays){var s,r={};for(s in n.overlays){var q=o._jsPlumb.overlays[n.overlays[s][1].id];if(q){q.updateFrom(n.overlays[s][1]),r[n.overlays[s][1].id]=!0}else{var p=o.getCachedTypeItem("overlay",n.overlays[s][1].id);null!=p?(p.reattach(o._jsPlumb.instance),p.updateFrom(n.overlays[s][1]),o._jsPlumb.overlays[p.id]=p):p=o.addOverlay(n.overlays[s],!0),r[p.id]=!0}}for(s in o._jsPlumb.overlays){null==r[o._jsPlumb.overlays[s].id]&&o.removeOverlay(o._jsPlumb.overlays[s].id,!0)}}},m.extend(g.OverlayCapableJsPlumbUIComponent,h.jsPlumbUIComponent,{setHover:function(d){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){for(var c in this._jsPlumb.overlays){this._jsPlumb.overlays[c][d?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)}}},addOverlay:function(e,d){var f=i(this,e);return d||this.repaint(),f},getOverlay:function(b){return this._jsPlumb.overlays[b]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(d){var c=this.getOverlay(d);c&&c.hide()},hideOverlays:function(){for(var b in this._jsPlumb.overlays){this._jsPlumb.overlays[b].hide()}},showOverlay:function(d){var c=this.getOverlay(d);c&&c.show()},showOverlays:function(){for(var b in this._jsPlumb.overlays){this._jsPlumb.overlays[b].show()}},removeAllOverlays:function(d){for(var c in this._jsPlumb.overlays){this._jsPlumb.overlays[c].cleanup&&this._jsPlumb.overlays[c].cleanup()}this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,d||this.repaint()},removeOverlay:function(e,d){var f=this._jsPlumb.overlays[e];f&&(!d&&f.cleanup&&f.cleanup(),delete this._jsPlumb.overlays[e],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[e])},removeOverlays:function(){for(var d=0,c=arguments.length;c>d;d++){this.removeOverlay(arguments[d])}},moveParent:function(e){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),e.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),e.appendChild(this.canvas);for(var d in this._jsPlumb.overlays){if(this._jsPlumb.overlays[d].isAppendedAtTopLevel){var f=this._jsPlumb.overlays[d].getElement();f.parentNode.removeChild(f),e.appendChild(f)}}}},getLabel:function(){var b=this.getOverlay(l);return null!=b?b.getLabel():null},getLabelOverlay:function(){return this.getOverlay(l)},setLabel:function(e){var d=this.getOverlay(l);if(d){e.constructor==String||e.constructor==Function?d.setLabel(e):(e.label&&d.setLabel(e.label),e.location&&d.setLocation(e.location))}else{var f=e.constructor==String||e.constructor==Function?{label:e}:e;d=k(this,f),this._jsPlumb.overlays[l]=d}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(d){for(var c in this._jsPlumb.overlays){this._jsPlumb.overlays[c].cleanup(d),this._jsPlumb.overlays[c].destroy(d)}d&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(b){this[b?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(d,c){this._jsPlumb.overlayPositions[d.id]=c},getAbsoluteOverlayPosition:function(b){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[b.id]:null},_clazzManip:function(f,e,o){if(!o){for(var n in this._jsPlumb.overlays){this._jsPlumb.overlays[n][f+"Class"](e)}}},addClass:function(d,c){this._clazzManip("add",d,c)},removeClass:function(d,c){this._clazzManip("remove",d,c)}})}.call("undefined"!=typeof window?window:this),function(){var k=this,i=k.jsPlumb,q=k.jsPlumbUtil,p=function(f,e,h){var g=!1;return{drag:function(){if(g){return g=!1,!0}if(e.element){var a=h.getUIPosition(arguments,h.getZoom());null!=a&&jsPlumb.setPosition(e.element,a),h.repaint(e.element,a),f.paint({anchorPoint:f.anchor.getCurrentLocation({element:f.element})})}},stopDrag:function(){g=!0}}},o=function(h,g,u,t){var s=jsPlumb.createElement("div",{position:"absolute"});g.appendElement(s);var r=g.getId(s);jsPlumb.setPosition(s,u),s.style.width=t[0]+"px",s.style.height=t[1]+"px",g.manage(r,s,!0),h.id=r,h.element=s},n=function(y,x,w,v,u,t,s,r){var b=new i.FloatingAnchor({reference:x,referenceCanvas:v,jsPlumbInstance:t});return s({paintStyle:y,endpoint:w,anchor:b,source:u,scope:r})},m=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],l=function(f,e){var h=0;if(null!=e){for(var g=0;g<f.connections.length;g++){if(f.connections[g].sourceId==e||f.connections[g].targetId==e){h=g;break}}}return f.connections[h]};i.Endpoint=function(w){var v=w._jsPlumb,u=w.newConnection,t=w.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[0.5,0.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],i.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:w.connectionType,maxConnections:null==w.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:w.maxConnections,paintStyle:w.endpointStyle||w.paintStyle||w.style||this._jsPlumb.instance.Defaults.EndpointStyle||i.Defaults.EndpointStyle,hoverPaintStyle:w.endpointHoverStyle||w.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||i.Defaults.EndpointHoverStyle,connectorStyle:w.connectorStyle,connectorHoverStyle:w.connectorHoverStyle,connectorClass:w.connectorClass,connectorHoverClass:w.connectorHoverClass,connectorOverlays:w.connectorOverlays,connector:w.connector,connectorTooltip:w.connectorTooltip}),this._jsPlumb.enabled=!(w.enabled===!1),this._jsPlumb.visible=!0,this.element=i.getElement(w.source),this._jsPlumb.uuid=w.uuid,this._jsPlumb.floatingEndpoint=null;var h=null;this._jsPlumb.uuid&&(w.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=w.elementId,this.dragProxy=w.dragProxy,this._jsPlumb.connectionCost=w.connectionCost,this._jsPlumb.connectionsDirected=w.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var g=function(){var s=v.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var r=v.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(s),this.addClass(r),jsPlumb.updateClasses(this.element,r,s)}.bind(this);this.prepareAnchor=function(s){var r=this._jsPlumb.instance.makeAnchor(s,this.elementId,v);return r.bind("anchorChanged",function(y){this.fire("anchorChanged",{endpoint:this,anchor:y}),g()}.bind(this)),r},this.setPreparedAnchor=function(s,r){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=s,g(),r||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(s,r){var y=this.prepareAnchor(s);return this.setPreparedAnchor(y,r),this};var f=function(s){if(this.connections.length>0){for(var r=0;r<this.connections.length;r++){this.connections[r].setHover(s,!1)}}else{this.setHover(s)}}.bind(this);this.bind("mouseover",function(){f(!0)}),this.bind("mouseout",function(){f(!1)}),w._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(z,y){var s,r=function(A,C){var B=v.getRenderMode();if(i.Endpoints[B][A]){return new i.Endpoints[B][A](C)}if(!v.Defaults.DoNotThrowErrors){throw {msg:"jsPlumb: unknown endpoint type '"+A+"'"}}},a={_jsPlumb:this._jsPlumb.instance,cssClass:w.cssClass,container:w.container,tooltip:w.tooltip,connectorTooltip:w.connectorTooltip,endpoint:this};return q.isString(z)?s=r(z,a):q.isArray(z)?(a=q.merge(z[1],a),s=r(z[0],a)):s=z.clone(),s.clone=function(){return q.isString(z)?r(z,a):q.isArray(z)?(a=q.merge(z[1],a),r(z[0],a)):void 0}.bind(this),s.typeId=y,s},this.setEndpoint=function(s){var r=this.prepareEndpoint(s);this.setPreparedEndpoint(r,!0)},this.setPreparedEndpoint=function(r){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=r,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},i.extend(this,w,m),this.isSource=w.isSource||!1,this.isTemporarySource=w.isTemporarySource||!1,this.isTarget=w.isTarget||!1,this.connections=w.connections||[],this.connectorPointerEvents=w["connector-pointer-events"],this.scope=w.scope||v.getDefaultScope(),this.timestamp=null,this.reattachConnections=w.reattach||v.Defaults.ReattachConnections,this.connectionsDetachable=v.Defaults.ConnectionsDetachable,(w.connectionsDetachable===!1||w.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=w.dragAllowedWhenFull!==!1,w.onMaxConnections&&this.bind("maxConnections",w.onMaxConnections),this.addConnection=function(r){this.connections.push(r),this[(this.connections.length>0?"add":"remove")+"Class"](v.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](v.endpointFullClass)},this.detachFromConnection=function(s,r,y){r=null==r?this.connections.indexOf(s):r,r>=0&&(this.connections.splice(r,1),this[(this.connections.length>0?"add":"remove")+"Class"](v.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](v.endpointFullClass)),(this._forceDeleteOnDetach||!y&&this._deleteOnDetach)&&0===this.connections.length&&v.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:y!==!0})},this.detach=function(F){var E=F.connectionIndex,D=F.connection,C=F.ignoreTarget,B=F.fireEvent,A=F.originalEvent,z=F.endpointBeingDeleted,y=F.forceDetach,s=null==E?this.connections.indexOf(D):E,r=!1;return B=B!==!1,s>=0&&(y||D._forceDetach||D.isDetachable()&&D.isDetachAllowed(D)&&this.isDetachAllowed(D)&&v.checkCondition("beforeDetach",D,z))&&(v.deleteObject({connection:D,fireEvent:!C&&B,originalEvent:A,deleteAttachedObjects:F.deleteAttachedObjects}),r=!0),r},this.detachAll=function(s,r){for(var z=[];this.connections.length>0;){var y=this.detach({connection:this.connections[0],ignoreTarget:!1,forceDetach:r===!0,fireEvent:s!==!1,originalEvent:null,endpointBeingDeleted:this,connectionIndex:0});y||(z.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=z,this},this.detachFrom=function(s,r,B){for(var A=[],z=0;z<this.connections.length;z++){(this.connections[z].endpoints[1]==s||this.connections[z].endpoints[0]==s)&&A.push(this.connections[z])}for(var y=0;y<A.length;y++){this.detach({connection:A[y],ignoreTarget:!1,forceDetach:!0,fireEvent:r,originalEvent:B})}return this},this.getElement=function(){return this.element},this.setElement=function(a){var s=this._jsPlumb.instance.getId(a),r=this.elementId;return q.removeWithFunction(w.endpointsByElement[this.elementId],function(y){return y.id==this.id}.bind(this)),this.element=jsPlumb.getElement(a),this.elementId=v.getId(this.element),v.anchorManager.rehomeEndpoint(this,r,this.element),v.dragManager.endpointAdded(this.element),q.addToList(w.endpointsByElement,s,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),y=this.anchor.getOrientation(this),s=this.anchor.getCssClass(),r={bind:function(){},compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return y},getCssClass:function(){return s}};return t({dropOptions:w.dropOptions,anchor:r,source:this.element,paintStyle:this.getPaintStyle(),endpoint:w.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var r=this.connections[0];return r?r:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:r},this.setStyle=this.setPaintStyle,this.paint=function(N){N=N||{};var M=N.timestamp,L=!(N.recalc===!1);if(!M||this.timestamp!==M){var K=v.updateOffset({elId:this.elementId,timestamp:M}),J=N.offset?N.offset.o:K.o;if(null!=J){var I=N.anchorPoint,H=N.connectorPaintStyle;if(null==I){var G=N.dimensions||K.s,F={xy:[J.left,J.top],wh:G,element:this,timestamp:M};if(L&&this.anchor.isDynamic&&this.connections.length>0){var E=l(this,N.elementWithPrecedence),D=E.endpoints[0]==this?1:0,C=0===D?E.sourceId:E.targetId,B=v.getCachedData(C),A=B.o,z=B.s;F.txy=[A.left,A.top],F.twh=z,F.tElement=E.endpoints[D]}I=this.anchor.compute(F)}this.endpoint.compute(I,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,H||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=M;for(var y in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(y)){var O=this._jsPlumb.overlays[y];O.isVisible()&&(this._jsPlumb.overlayPlacements[y]=O.draw(this.endpoint,this._jsPlumb.paintStyleInUse),O.paint(this._jsPlumb.overlayPlacements[y]))}}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&i.isDragSupported(this.element)){var F,E={id:null,element:null},D=null,C=!1,B=null,A=p(this,E,v),a=w.dragOptions||{},N={},M=i.dragEvents.start,L=i.dragEvents.stop,K=i.dragEvents.drag,J=i.dragEvents.beforeStart,I=function(r){F=r.e.payload||{}},H=function(){D=this.connectorSelector();var S=!0;this.isEnabled()||(S=!1),null!=D||this.isSource||this.isTemporarySource||(S=!1),!this.isSource||!this.isFull()||null!=D&&this.dragAllowedWhenFull||(S=!1),null==D||D.isDetachable(this)||(S=!1);var Q=v.checkCondition(null==D?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:D});if(Q===!1?S=!1:"object"==typeof Q?jsPlumb.extend(Q,F||{}):Q=F||{},S===!1){return v.stopDrag&&v.stopDrag(this.canvas),A.stopDrag(),!1}for(var P=0;P<this.connections.length;P++){this.connections[P].setHover(!1)}this.addClass("endpointDrag"),v.setConnectionBeingDragged(!0),D&&!this.isFull()&&this.isSource&&(D=null),v.updateOffset({elId:this.elementId});var O=this._jsPlumb.instance.getOffset(this.canvas),z=this.canvas,Y=this._jsPlumb.instance.getSize(this.canvas);o(E,v,O,Y),v.setAttributes(this.canvas,{dragId:E.id,elId:this.elementId});var X=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var W=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);W.endpoints[1]&&(X=W.endpoints[1])}var V=this._jsPlumb.instance.makeAnchor("Center");V.isFloating=!0,this._jsPlumb.floatingEndpoint=n(this.getPaintStyle(),V,X,this.canvas,E.element,v,t,this.scope);var U=this._jsPlumb.floatingEndpoint.anchor;if(null==D){this.setHover(!1,!1),D=u({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:E.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:w.connectorStyle,hoverPaintStyle:w.connectorHoverStyle,connector:w.connector,overlays:w.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:w.scope,data:Q}),D.pending=!0,D.addClass(v.draggingClass),this._jsPlumb.floatingEndpoint.addClass(v.draggingClass),this._jsPlumb.floatingEndpoint.anchor=U,v.fire("connectionDrag",D),v.anchorManager.newConnection(D)}else{C=!0,D.setHover(!1);var T=D.endpoints[0].id==this.id?0:1;this.detachFromConnection(D,null,!0);var R=v.getDragScope(z);v.setAttribute(this.canvas,"originalScope",R),v.fire("connectionDrag",D),0===T?(B=[D.source,D.sourceId,z,R],v.anchorManager.sourceChanged(D.endpoints[T].elementId,E.id,D,E.element)):(B=[D.target,D.targetId,z,R],D.target=E.element,D.targetId=E.id,v.anchorManager.updateOtherEndpoint(D.sourceId,D.endpoints[T].elementId,D.targetId,D)),D.suspendedEndpoint=D.endpoints[T],D.suspendedElement=D.endpoints[T].getElement(),D.suspendedElementId=D.endpoints[T].elementId,D.suspendedElementType=0===T?"source":"target",D.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=D.suspendedEndpoint,D.endpoints[T]=this._jsPlumb.floatingEndpoint,D.addClass(v.draggingClass),this._jsPlumb.floatingEndpoint.addClass(v.draggingClass)}v.floatingConnections[E.id]=D,q.addToList(w.endpointsByElement,E.id,this._jsPlumb.floatingEndpoint),v.currentlyDragging=!0}.bind(this),G=function(){if(v.setConnectionBeingDragged(!1),D&&null!=D.endpoints){var s=v.getDropEvent(arguments),r=v.getFloatingAnchorIndex(D);if(D.endpoints[0===r?1:0].anchor.locked=!1,D.removeClass(v.draggingClass),this._jsPlumb&&(D.deleteConnectionNow||D.endpoints[r]==this._jsPlumb.floatingEndpoint)&&C&&D.suspendedEndpoint){0===r?(D.floatingElement=D.source,D.floatingId=D.sourceId,D.floatingEndpoint=D.endpoints[0],D.floatingIndex=0,D.source=B[0],D.sourceId=B[1]):(D.floatingElement=D.target,D.floatingId=D.targetId,D.floatingEndpoint=D.endpoints[1],D.floatingIndex=1,D.target=B[0],D.targetId=B[1]);var y=this._jsPlumb.floatingEndpoint;v.setDragScope(B[2],B[3]),D.endpoints[r]=D.suspendedEndpoint,D.isReattach()||D._forceReattach||D._forceDetach||!D.endpoints[0===r?1:0].detach({connection:D,ignoreTarget:!1,forceDetach:!1,fireEvent:!0,originalEvent:s,endpointBeingDeleted:!0})?(D.setHover(!1),D._forceDetach=null,D._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(D),D.suspendedEndpoint.addConnection(D),1==r?v.anchorManager.updateOtherEndpoint(D.sourceId,D.floatingId,D.targetId,D):v.anchorManager.sourceChanged(D.floatingId,D.sourceId,D,D.source),v.repaint(B[1])):v.deleteObject({endpoint:y})}this.deleteAfterDragStop?v.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),v.fire("connectionDragStop",D,s),D.pending&&v.fire("connectionAborted",D,s),v.currentlyDragging=!1,D.suspendedElement=null,D.suspendedEndpoint=null,D=null}E&&E.element&&v.remove(E.element,!1,!1),h&&v.deleteObject({endpoint:h}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);a=i.extend(N,a),a.scope=this.scope||a.scope,a[J]=q.wrap(a[J],I,!1),a[M]=q.wrap(a[M],H,!1),a[K]=q.wrap(a[K],A.drag),a[L]=q.wrap(a[L],G),a.multipleDrop=!1,a.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),v.initDraggable(this.canvas,a,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var d=w.endpoint||this._jsPlumb.instance.Defaults.Endpoint||i.Defaults.Endpoint;this.setEndpoint(d,!0);var c=w.anchor?w.anchor:w.anchors?w.anchors:v.Defaults.Anchor||"Top";this.setAnchor(c,!0);var b=["default",w.type||""].join(" ");this.addType(b,w.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var x=function(E,D,C,B){if(i.isDropSupported(this.element)){var A=w.dropOptions||v.Defaults.DropOptions||i.Defaults.DropOptions;A=i.extend({},A),A.scope=A.scope||this.scope;var z=i.dragEvents.drop,y=i.dragEvents.over,s=i.dragEvents.out,r=this,a=v.EndpointDropHandler({getEndpoint:function(){return r},jsPlumb:v,enabled:function(){return null!=C?C.isEnabled():!0},isFull:function(){return C.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(F){r.addClass(F)},removeClass:function(F){r.removeClass(F)},isDropAllowed:function(){return r.isDropAllowed.apply(r,arguments)},reference:B,isRedrop:function(G,F){return G.suspendedEndpoint&&F.reference&&G.suspendedEndpoint.id===F.reference.id}});A[z]=q.wrap(A[z],a,!0),A[y]=q.wrap(A[y],function(){var F=i.getDragObject(arguments),K=v.getAttribute(i.getElement(F),"dragId"),J=v.floatingConnections[K];if(null!=J){var I=v.getFloatingAnchorIndex(J),H=this.isTarget&&0!==I||J.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==J.suspendedEndpoint.id;if(H){var G=v.checkCondition("checkDropAllowed",{sourceEndpoint:J.endpoints[I],targetEndpoint:this,connection:J});this[(G?"add":"remove")+"Class"](v.endpointDropAllowedClass),this[(G?"remove":"add")+"Class"](v.endpointDropForbiddenClass),J.endpoints[I].anchor.over(this.anchor,this)}}}.bind(this)),A[s]=q.wrap(A[s],function(){var F=i.getDragObject(arguments),J=null==F?null:v.getAttribute(i.getElement(F),"dragId"),I=J?v.floatingConnections[J]:null;if(null!=I){var H=v.getFloatingAnchorIndex(I),G=this.isTarget&&0!==H||I.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==I.suspendedEndpoint.id;G&&(this.removeClass(v.endpointDropAllowedClass),this.removeClass(v.endpointDropForbiddenClass),I.endpoints[H].anchor.out())}}.bind(this)),v.initDroppable(E,A,"internal",D)}}.bind(this);return this.anchor.isFloating||x(this.canvas,!(w._transient||this.anchor.isFloating),this,w.reference),this},q.extend(i.Endpoint,i.OverlayCapableJsPlumbUIComponent,{setVisible:function(g,f,s){if(this._jsPlumb.visible=g,this.canvas&&(this.canvas.style.display=g?"block":"none"),this[g?"showOverlays":"hideOverlays"](),!f){for(var r=0;r<this.connections.length;r++){if(this.connections[r].setVisible(g),!s){var h=this===this.connections[r].endpoints[0]?1:0;1==this.connections[r].endpoints[h].connections.length&&this.connections[r].endpoints[h].setVisible(g,!0,!0)}}}},getAttachedElements:function(){return this.connections},applyType:function(b,d){this.setPaintStyle(b.endpointStyle||b.paintStyle,d),this.setHoverPaintStyle(b.endpointHoverStyle||b.hoverPaintStyle,d),null!=b.maxConnections&&(this._jsPlumb.maxConnections=b.maxConnections),b.scope&&(this.scope=b.scope),i.extend(this,b,m),null!=b.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,b.cssClass),i.OverlayCapableJsPlumbUIComponent.applyType(this,b)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(b){this._jsPlumb.enabled=b},cleanup:function(){var b=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,b),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(b){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(b)},isFull:function(){return 0===this._jsPlumb.maxConnections?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(e){var d=!1;if(e){for(var f=0;f<this.connections.length;f++){if(this.connections[f].endpoints[1]==e||this.connections[f].endpoints[0]==e){d=!0;break}}}return d},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(b){this._jsPlumb.connectionCost=b},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(b){this._jsPlumb.connectionsDirected=b},setElementId:function(b){this.elementId=b,this.anchor.elementId=b},setReferenceElement:function(b){this.element=i.getElement(b)},setDragAllowedWhenFull:function(b){this.dragAllowedWhenFull=b},equals:function(b){return this.anchor.equals(b.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(b){return this.anchor.compute(b)}}),k.jsPlumbInstance.prototype.EndpointDropHandler=function(b){return function(C){var B=b.jsPlumb;b.removeClass(B.endpointDropAllowedClass),b.removeClass(B.endpointDropForbiddenClass);var A=B.getDropEvent(arguments),z=B.getDragObject(arguments),y=B.getAttribute(z,"dragId"),x=(B.getAttribute(z,"elId"),B.getAttribute(z,"originalScope")),w=B.floatingConnections[y];if(null!=w){var v=null!=w.suspendedEndpoint;if(!v||null!=w.suspendedEndpoint._jsPlumb){var u=b.getEndpoint(w);if(null!=u){if(b.isRedrop(w,b)){return w._forceReattach=!0,w.setHover(!1),b.maybeCleanup&&b.maybeCleanup(u),void 0}var t=B.getFloatingAnchorIndex(w);if(0===t&&!b.isSource||1===t&&!b.isTarget){return b.maybeCleanup&&b.maybeCleanup(u),void 0}b.onDrop&&b.onDrop(w),x&&B.setDragScope(z,x);var s=b.isFull(C);if(s&&u.fire("maxConnections",{endpoint:this,connection:w,maxConnections:u._jsPlumb.maxConnections},A),!s&&b.enabled()){var r=!0;0===t?(w.floatingElement=w.source,w.floatingId=w.sourceId,w.floatingEndpoint=w.endpoints[0],w.floatingIndex=0,w.source=b.element,w.sourceId=b.elementId):(w.floatingElement=w.target,w.floatingId=w.targetId,w.floatingEndpoint=w.endpoints[1],w.floatingIndex=1,w.target=b.element,w.targetId=b.elementId),v&&w.suspendedEndpoint.id!=u.id&&(w.isDetachAllowed(w)&&w.endpoints[t].isDetachAllowed(w)&&w.suspendedEndpoint.isDetachAllowed(w)&&B.checkCondition("beforeDetach",w)||(r=!1));var c=function(e){w.endpoints[t].detachFromConnection(w),w.suspendedEndpoint&&w.suspendedEndpoint.detachFromConnection(w),w.endpoints[t]=u,u.addConnection(w);var d=u.getParameters();for(var F in d){w.setParameter(F,d[F])}if(v){var E=w.suspendedEndpoint.elementId;B.fireMoveEvent({index:t,originalSourceId:0===t?E:w.sourceId,newSourceId:0===t?u.elementId:w.sourceId,originalTargetId:1==t?E:w.targetId,newTargetId:1==t?u.elementId:w.targetId,originalSourceEndpoint:0===t?w.suspendedEndpoint:w.endpoints[0],newSourceEndpoint:0===t?u:w.endpoints[0],originalTargetEndpoint:1==t?w.suspendedEndpoint:w.endpoints[1],newTargetEndpoint:1==t?u:w.endpoints[1],connection:w},A)}else{d.draggable&&B.initDraggable(this.element,dragOptions,"internal",B)}if(1==t?B.anchorManager.updateOtherEndpoint(w.sourceId,w.floatingId,w.targetId,w):B.anchorManager.sourceChanged(w.floatingId,w.sourceId,w,w.source),w.endpoints[0].finalEndpoint){var D=w.endpoints[0];D.detachFromConnection(w),w.endpoints[0]=w.endpoints[0].finalEndpoint,w.endpoints[0].addConnection(w)}q.isObject(e)&&w.mergeData(e),B.finaliseConnection(w,null,A,!1),w.setHover(!1)}.bind(this),a=function(){w.suspendedEndpoint&&(w.endpoints[t]=w.suspendedEndpoint,w.setHover(!1),w._forceDetach=!0,0===t?(w.source=w.suspendedEndpoint.element,w.sourceId=w.suspendedEndpoint.elementId):(w.target=w.suspendedEndpoint.element,w.targetId=w.suspendedEndpoint.elementId),w.suspendedEndpoint.addConnection(w),1==t?B.anchorManager.updateOtherEndpoint(w.sourceId,w.floatingId,w.targetId,w):B.anchorManager.sourceChanged(w.floatingId,w.sourceId,w,w.source),B.repaint(w.sourceId),w._forceDetach=!1)};if(r=r&&b.isDropAllowed(w.sourceId,w.targetId,w.scope,w,u)){return c(r),!0}a()}b.maybeCleanup&&b.maybeCleanup(u),B.currentlyDragging=!1}}}}}}.call("undefined"!=typeof window?window:this),function(){var h=this,g=h.jsPlumb,m=h.jsPlumbUtil,l=function(b,q,p,o,n){if(!b.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[q][p]){throw {msg:"jsPlumb: unknown connector type '"+p+"'"}}return new g.Connectors[q][p](o,n)},k=function(e,d,f){return e?f.makeAnchor(e,d,f):null},i=function(f,c,o,n){null!=c&&(c._jsPlumbConnections=c._jsPlumbConnections||{},n?delete c._jsPlumbConnections[f.id]:c._jsPlumbConnections[f.id]=!0,m.isEmpty(c._jsPlumbConnections)?o.removeClass(c,o.connectedClass):o.addClass(c,o.connectedClass))};g.Connection=function(L){var K=L.newEndpoint;this.id=L.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=0.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=L.previousConnection,this.source=g.getElement(L.source),this.target=g.getElement(L.target),L.sourceEndpoint&&(this.source=L.sourceEndpoint.getElement()),L.targetEndpoint&&(this.target=L.targetEndpoint.getElement()),g.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=L.scope,this.endpoints=[],this.endpointStyles=[];var J=this._jsPlumb.instance;J.manage(this.sourceId,this.source),J.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=L.editable===!0,this._jsPlumb.params={cssClass:L.cssClass,container:L.container,"pointer-events":L["pointer-events"],editorParams:L.editorParams,overlays:L.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.editableRequested=L.editable!==!1,this.setEditable=function(d){return this.connector?this.connector.setEditable(d):!1},this.isEditable=function(){return this.connector?this.connector.isEditable():!1},this.isEditing=function(){return this.connector?this.connector.isEditing():!1},this.makeEndpoint=function(a,n,e,d){return e=e||this._jsPlumb.instance.getId(n),this.prepareEndpoint(J,K,this,d,a?0:1,L,n,e)},L.type&&(L.endpoints=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(L.type).endpoints);var I=this.makeEndpoint(!0,this.source,this.sourceId,L.sourceEndpoint),H=this.makeEndpoint(!1,this.target,this.targetId,L.targetEndpoint);I&&m.addToList(L.endpointsByElement,this.sourceId,I),H&&m.addToList(L.endpointsByElement,this.targetId,H),this.scope||(this.scope=this.endpoints[0].scope),null!=L.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=L.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=L.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var G=J.Defaults.ConnectionsDetachable;L.detachable===!1&&(G=!1),this.endpoints[0].connectionsDetachable===!1&&(G=!1),this.endpoints[1].connectionsDetachable===!1&&(G=!1);var F=L.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||J.Defaults.ReattachConnections;this.appendToDefaultType({detachable:G,reattach:F,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||L.paintStyle||J.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||L.hoverPaintStyle||J.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var E=J.getSuspendedAt();if(!J.isSuspendDrawing()){var D=J.getCachedData(this.sourceId),C=D.o,B=D.s,A=J.getCachedData(this.targetId),z=A.o,y=A.s,x=E||J.timestamp(),w=this.endpoints[0].anchor.compute({xy:[C.left,C.top],wh:B,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[z.left,z.top],twh:y,tElement:this.endpoints[1],timestamp:x});this.endpoints[0].paint({anchorLoc:w,timestamp:x}),w=this.endpoints[1].anchor.compute({xy:[z.left,z.top],wh:y,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[C.left,C.top],twh:B,tElement:this.endpoints[0],timestamp:x}),this.endpoints[1].paint({anchorLoc:w,timestamp:x})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return this._jsPlumb.detachable===!0},this.setDetachable=function(d){this._jsPlumb.detachable=d===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(d){this._jsPlumb.reattach=d===!0},this._jsPlumb.cost=L.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=L.directed,null==L.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var v=jsPlumb.extend({},this.endpoints[1].getParameters());g.extend(v,this.endpoints[0].getParameters()),g.extend(v,this.getParameters()),this.setParameters(v),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||L.connector||J.Defaults.Connector||g.Defaults.Connector,!0),L.geometry&&this.connector.setGeometry(L.geometry);var c=null!=L.data&&m.isObject(L.data)?L.data:{};this.getData=function(){return c},this.setData=function(d){c=d||{}},this.mergeData=function(d){c=jsPlumb.extend(c,d)};var b=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,L.type].join(" ");/[^\s]/.test(b)&&this.addType(b,L.data,!0),this.updateConnectedClass()},m.extend(g.Connection,g.OverlayCapableJsPlumbUIComponent,{applyType:function(b,o,n){null!=b.detachable&&this.setDetachable(b.detachable),null!=b.reattach&&this.setReattach(b.reattach),b.scope&&(this.scope=b.scope),null!=b.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,b.cssClass);var f=null;b.anchor?(f=this.getCachedTypeItem("anchors",n.anchor),null==f&&(f=[this._jsPlumb.instance.makeAnchor(b.anchor),this._jsPlumb.instance.makeAnchor(b.anchor)],this.cacheTypeItem("anchors",f,n.anchor))):b.anchors&&(f=this.getCachedTypeItem("anchors",n.anchors),null==f&&(f=[this._jsPlumb.instance.makeAnchor(b.anchors[0]),this._jsPlumb.instance.makeAnchor(b.anchors[1])],this.cacheTypeItem("anchors",f,n.anchors))),null!=f&&(this.endpoints[0].anchor=f[0],this.endpoints[1].anchor=f[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),g.OverlayCapableJsPlumbUIComponent.applyType(this,b)},addClass:function(d,c){c&&(this.endpoints[0].addClass(d),this.endpoints[1].addClass(d),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(d)),this.connector&&this.connector.addClass(d)},removeClass:function(d,c){c&&(this.endpoints[0].removeClass(d),this.endpoints[1].removeClass(d),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(d)),this.connector&&this.connector.removeClass(d)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(b){this._jsPlumb.visible=b,this.connector&&this.connector.setVisible(b),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(b){this._jsPlumb&&(i(this,this.source,this._jsPlumb.instance,b),i(this,this.target,this._jsPlumb.instance,b))},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),h.jsPlumb[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),h.jsPlumb[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(b){this._jsPlumb.cost=b},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(b){this.connector&&this.connector.setGeometry(b)},prepareConnector:function(d,c){var p,o={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},n=this._jsPlumb.instance.getRenderMode();return m.isString(d)?p=l(this._jsPlumb.instance,n,d,o,this):m.isArray(d)&&(p=1==d.length?l(this._jsPlumb.instance,n,d[0],o,this):l(this._jsPlumb.instance,n,d[0],m.merge(d[1],o),this)),null!=c&&(p.typeId=c),p},setPreparedConnector:function(o,n,u,t){var s,r="";if(null!=this.connector&&(s=this.connector,r=s.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=o,t&&this.cacheTypeItem("connector",o,t),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(r),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=s){for(var q=this.getOverlays(),p=0;p<q.length;p++){q[p].transfer&&q[p].transfer(this.connector)}}u||this.setListenerComponent(this.connector),n||this.repaint()},setConnector:function(n,f,q,p){var o=this.prepareConnector(n,p);this.setPreparedConnector(o,f,q,p)},paint:function(P){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){P=P||{};var O=P.timestamp,N=!1,M=N?this.sourceId:this.targetId,L=N?this.targetId:this.sourceId,K=N?0:1,J=N?1:0;if(null==O||O!=this._jsPlumb.lastPaintedAt){var I=this._jsPlumb.instance.updateOffset({elId:L}).o,H=this._jsPlumb.instance.updateOffset({elId:M}).o,G=this.endpoints[J],F=this.endpoints[K],E=G.anchor.getCurrentLocation({xy:[I.left,I.top],wh:[I.width,I.height],element:G,timestamp:O}),D=F.anchor.getCurrentLocation({xy:[H.left,H.top],wh:[H.width,H.height],element:F,timestamp:O});this.connector.resetBounds(),this.connector.compute({sourcePos:E,targetPos:D,sourceEndpoint:this.endpoints[J],targetEndpoint:this.endpoints[K],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:I,targetInfo:H});var C={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var B in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(B)){var A=this._jsPlumb.overlays[B];A.isVisible()&&(this._jsPlumb.overlayPlacements[B]=A.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(A)),C.minX=Math.min(C.minX,this._jsPlumb.overlayPlacements[B].minX),C.maxX=Math.max(C.maxX,this._jsPlumb.overlayPlacements[B].maxX),C.minY=Math.min(C.minY,this._jsPlumb.overlayPlacements[B].minY),C.maxY=Math.max(C.maxY,this._jsPlumb.overlayPlacements[B].maxY))}}var z=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,y=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),x={xmin:Math.min(this.connector.bounds.minX-(z+y),C.minX),ymin:Math.min(this.connector.bounds.minY-(z+y),C.minY),xmax:Math.max(this.connector.bounds.maxX+(z+y),C.maxX),ymax:Math.max(this.connector.bounds.maxY+(z+y),C.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,x);for(var w in this._jsPlumb.overlays){if(this._jsPlumb.overlays.hasOwnProperty(w)){var v=this._jsPlumb.overlays[w];v.isVisible()&&v.paint(this._jsPlumb.overlayPlacements[w],x)}}}this._jsPlumb.lastPaintedAt=O}},repaint:function(b){b=b||{},this.paint({elId:this.sourceId,recalc:!(b.recalc===!1),timestamp:b.timestamp})},prepareEndpoint:function(B,A,z,y,x,w,v,u){var t;if(y){z.endpoints[x]=y,y.addConnection(z)}else{w.endpoints||(w.endpoints=[null,null]);var s=w.endpoints[x]||w.endpoint||B.Defaults.Endpoints[x]||jsPlumb.Defaults.Endpoints[x]||B.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;w.endpointStyles||(w.endpointStyles=[null,null]),w.endpointHoverStyles||(w.endpointHoverStyles=[null,null]);var r=w.endpointStyles[x]||w.endpointStyle||B.Defaults.EndpointStyles[x]||jsPlumb.Defaults.EndpointStyles[x]||B.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==r.fillStyle&&null!=w.paintStyle&&(r.fillStyle=w.paintStyle.strokeStyle),null==r.outlineColor&&null!=w.paintStyle&&(r.outlineColor=w.paintStyle.outlineColor),null==r.outlineWidth&&null!=w.paintStyle&&(r.outlineWidth=w.paintStyle.outlineWidth);var q=w.endpointHoverStyles[x]||w.endpointHoverStyle||B.Defaults.EndpointHoverStyles[x]||jsPlumb.Defaults.EndpointHoverStyles[x]||B.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=w.hoverPaintStyle&&(null==q&&(q={}),null==q.fillStyle&&(q.fillStyle=w.hoverPaintStyle.strokeStyle));var e=w.anchors?w.anchors[x]:w.anchor?w.anchor:k(B.Defaults.Anchors[x],u,B)||k(g.Defaults.Anchors[x],u,B)||k(B.Defaults.Anchor,u,B)||k(g.Defaults.Anchor,u,B),b=w.uuids?w.uuids[x]:null;t=A({paintStyle:r,hoverPaintStyle:q,endpoint:s,connections:[z],uuid:b,anchor:e,source:v,scope:w.scope,reattach:w.reattach||B.Defaults.ReattachConnections,detachable:w.detachable||B.Defaults.ConnectionsDetachable}),z.endpoints[x]=t,w.drawEndpoints===!1&&t.setVisible(!1,!0,!0)}return t}})}.call("undefined"!=typeof window?window:this),function(){var h=this,g=h.jsPlumbUtil,m=h.jsPlumb;m.AnchorManager=function(R){var Q={},P={},O={},N={},M={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},L=["left","top","right","bottom"],K={},J=this,I={},H=R.jsPlumbInstance,G={},F=function(Z,Y,X,W,V,U){if(Z===Y){return{orientation:M.IDENTITY,a:["top","top"]}}var T=Math.atan2(W.centery-X.centery,W.centerx-X.centerx),S=Math.atan2(X.centery-W.centery,X.centerx-W.centerx),x=[],w={};!function(e,d){for(var f=0;f<e.length;f++){w[e[f]]={left:[d[f].left,d[f].centery],right:[d[f].right,d[f].centery],top:[d[f].centerx,d[f].top],bottom:[d[f].centerx,d[f].bottom]}}}(["source","target"],[X,W]);for(var v=0;v<L.length;v++){for(var u=0;u<L.length;u++){x.push({source:L[v],target:L[u],dist:Biltong.lineLength(w.source[L[v]],w.target[L[u]])})}}x.sort(function(e,d){return e.dist<d.dist?-1:e.dist>d.dist?1:0});for(var t=x[0].source,s=x[0].target,r=0;r<x.length&&(t=!V.isContinuous||V.isEdgeSupported(x[r].source)?x[r].source:null,s=!U.isContinuous||U.isEdgeSupported(x[r].target)?x[r].target:null,null==t||null==s);r++){}return{a:[t,s],theta:T,theta2:S}},E=function(ad,ac,ab,aa,Z,Y,X){for(var W=[],V=ac[Z?0:1]/(aa.length+1),U=0;U<aa.length;U++){var T=(U+1)*V,S=Y*ac[Z?1:0];X&&(T=ac[Z?0:1]-T);var x=Z?T:S,w=ab[0]+x,v=x/ac[0],u=Z?S:T,t=ab[1]+u,s=u/ac[1];W.push([w,t,v,s,aa[U][1],aa[U][2]])}return W},D=function(d){return function(a,f){var e=!0;return e=d?a[0][0]<f[0][0]:a[0][0]>f[0][0],e===!1?-1:1}},C=function(f,e){var o=f[0][0]<0?-Math.PI-f[0][0]:Math.PI-f[0][0],n=e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0];return o>n?1:f[0][1]>e[0][1]?1:-1},B={top:function(e,d){return e[0]>d[0]?1:-1},right:D(!0),bottom:D(!0),left:C},A=function(e,d){return e.sort(d)},z=function(n,e){var r=H.getCachedData(n),q=r.s,p=r.o,o=function(Z,Y,X,W,V,U,T){if(W.length>0){for(var S=A(W,B[Z]),x="right"===Z||"top"===Z,w=E(Z,Y,X,S,V,U,x),v=function(f,d){P[f.id]=[d[0],d[1],d[2],d[3]],N[f.id]=T},t=0;t<w.length;t++){var s=w[t][4],a=s.endpoints[0].elementId===n,aa=s.endpoints[1].elementId===n;a&&v(s.endpoints[0],w[t]),aa&&v(s.endpoints[1],w[t])}}};o("bottom",q,[p.left,p.top],e.bottom,!0,1,[0,1]),o("top",q,[p.left,p.top],e.top,!0,0,[0,-1]),o("left",q,[p.left,p.top],e.left,!1,0,[-1,0]),o("right",q,[p.left,p.top],e.right,!1,1,[1,0])};this.reset=function(){Q={},K={},I={}},this.addFloatingConnection=function(e,d){G[e]=d},this.removeFloatingConnection=function(d){delete G[d]},this.newConnection=function(n){var s=n.sourceId,r=n.targetId,q=n.endpoints,p=!0,o=function(t,f,e,d,a){s==r&&e.isContinuous&&(n._jsPlumb.instance.removeElement(q[1].canvas),p=!1),g.addToList(K,d,[a,f,e.constructor==m.DynamicAnchor])};o(0,q[0],q[0].anchor,r,n),p&&o(1,q[1],q[1].anchor,s,n)};var y=function(d){!function(e,n){if(e){var f=function(o){return o[4]==n};g.removeWithFunction(e.top,f),g.removeWithFunction(e.left,f),g.removeWithFunction(e.bottom,f),g.removeWithFunction(e.right,f)}}(I[d.elementId],d.id)};this.connectionDetached=function(n,t){var s=n.connection||n,r=n.sourceId,q=n.targetId,p=s.endpoints,o=function(u,S,x,w,v){g.removeWithFunction(K[w],function(d){return d[0].id==v.id})};o(1,p[1],p[1].anchor,r,s),o(0,p[0],p[0].anchor,q,s),s.floatingId&&(o(s.floatingIndex,s.floatingEndpoint,s.floatingEndpoint.anchor,s.floatingId,s),y(s.floatingEndpoint)),y(s.endpoints[0]),y(s.endpoints[1]),t||(J.redraw(s.sourceId),s.targetId!==s.sourceId&&J.redraw(s.targetId))},this.add=function(d,e){g.addToList(Q,e,d)},this.changeId=function(e,d){K[d]=K[e],Q[d]=Q[e],delete K[e],delete Q[e]},this.getConnectionsFor=function(d){return K[d]||[]},this.getEndpointsFor=function(d){return Q[d]||[]},this.deleteEndpoint=function(d){g.removeWithFunction(Q[d.elementId],function(a){return a.id==d.id}),y(d)},this.clearFor=function(d){delete Q[d],Q[d]=[]};var c=function(ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad){var ac,ab,aa=-1,Z=-1,Y=al.endpoints[ai],X=Y.id,W=[1,0][ai],V=[[an,am],al,ak,aj,X],U=ao[ag],T=Y._continuousAnchorEdge?ao[Y._continuousAnchorEdge]:null;if(T){var S=g.findWithFunction(T,function(d){return d[4]==X});if(-1!=S){for(T.splice(S,1),ac=0;ac<T.length;ac++){ab=T[ac][1],g.addWithFunction(ae,ab,function(d){return d.id==ab.id}),g.addWithFunction(ad,T[ac][1].endpoints[ai],function(d){return d.id==ab.endpoints[ai].id}),g.addWithFunction(ad,T[ac][1].endpoints[W],function(d){return d.id==ab.endpoints[W].id})}}}for(ac=0;ac<U.length;ac++){ab=U[ac][1],1==R.idx&&U[ac][3]===aj&&-1==Z&&(Z=ac),g.addWithFunction(ae,ab,function(d){return d.id==ab.id}),g.addWithFunction(ad,U[ac][1].endpoints[ai],function(d){return d.id==ab.endpoints[ai].id}),g.addWithFunction(ad,U[ac][1].endpoints[W],function(d){return d.id==ab.endpoints[W].id})}if(-1!=aa){U[aa]=V}else{var a=ah?-1!=Z?Z:0:U.length;U.splice(a,0,V)}Y._continuousAnchorEdge=ag};this.updateOtherEndpoint=function(n,s,r,q){var p=g.findWithFunction(K[n],function(d){return d[0].id===q.id}),o=g.findWithFunction(K[s],function(d){return d[0].id===q.id});-1!=p&&(K[n][p][0]=q,K[n][p][1]=q.endpoints[1],K[n][p][2]=q.endpoints[1].anchor.constructor==m.DynamicAnchor),o>-1&&(K[s].splice(o,1),g.addToList(K,r,[q,q.endpoints[0],q.endpoints[0].anchor.constructor==m.DynamicAnchor])),q.updateConnectedClass()},this.sourceChanged=function(n,r,q,p){if(n!==r){q.sourceId=r,q.source=p,g.removeWithFunction(K[n],function(d){return d[0].id===q.id});var o=g.findWithFunction(K[q.targetId],function(d){return d[0].id===q.id});o>-1&&(K[q.targetId][o][0]=q,K[q.targetId][o][1]=q.endpoints[0],K[q.targetId][o][2]=q.endpoints[0].anchor.constructor==m.DynamicAnchor),g.addToList(K,r,[q,q.endpoints[1],q.endpoints[1].anchor.constructor==m.DynamicAnchor]),q.endpoints[1].anchor.isContinuous&&(q.source===q.target?q._jsPlumb.instance.removeElement(q.endpoints[1].canvas):null==q.endpoints[1].canvas.parentNode&&q._jsPlumb.instance.appendElement(q.endpoints[1].canvas)),q.updateConnectedClass()}},this.rehomeEndpoint=function(n,d,t){var s=Q[d]||[],r=H.getId(t);if(r!==d){var q=s.indexOf(n);if(q>-1){var p=s.splice(q,1)[0];J.add(p,r)}}for(var o=0;o<n.connections.length;o++){n.connections[o].sourceId==d?J.sourceChanged(d,n.elementId,n.connections[o],n.element):n.connections[o].targetId==d&&(n.connections[o].targetId=n.elementId,n.connections[o].target=n.element,J.updateOtherEndpoint(n.connections[o].sourceId,d,n.elementId,n.connections[o]))}},this.redraw=function(ao,an,am,al,ak,aj){if(!H.isSuspendDrawing()){var ai=Q[ao]||[],ah=K[ao]||[],af=[],ad=[],ab=[];am=am||H.timestamp(),al=al||{left:0,top:0},an&&(an={left:an.left+al.left,top:an.top+al.top});for(var Z=H.updateOffset({elId:ao,offset:an,recalc:!1,timestamp:am}),W={},T=0;T<ah.length;T++){var w=ah[T][0],o=w.sourceId,ag=w.targetId,ae=w.endpoints[0].anchor.isContinuous,ac=w.endpoints[1].anchor.isContinuous;if(ae||ac){var aa=o+"_"+ag,Y=W[aa],X=w.sourceId==ao?1:0;ae&&!I[o]&&(I[o]={top:[],right:[],bottom:[],left:[]}),ac&&!I[ag]&&(I[ag]={top:[],right:[],bottom:[],left:[]}),ao!=ag&&H.updateOffset({elId:ag,timestamp:am}),ao!=o&&H.updateOffset({elId:o,timestamp:am});var V=H.getCachedData(ag),U=H.getCachedData(o);ag==o&&(ae||ac)?(c(I[o],-Math.PI/2,0,w,!1,ag,0,!1,"top",o,af,ad),c(I[ag],-Math.PI/2,0,w,!1,o,1,!1,"top",ag,af,ad)):(Y||(Y=F(o,ag,U.o,V.o,w.endpoints[0].anchor,w.endpoints[1].anchor),W[aa]=Y),ae&&c(I[o],Y.theta,0,w,!1,ag,0,!1,Y.a[0],o,af,ad),ac&&c(I[ag],Y.theta2,-1,w,!0,o,1,!0,Y.a[1],ag,af,ad)),ae&&g.addWithFunction(ab,o,function(e){return e===o}),ac&&g.addWithFunction(ab,ag,function(e){return e===ag}),g.addWithFunction(af,w,function(e){return e.id==w.id}),(ae&&0===X||ac&&1===X)&&g.addWithFunction(ad,w.endpoints[X],function(e){return e.id==w.endpoints[X].id})}}for(T=0;T<ai.length;T++){0===ai[T].connections.length&&ai[T].anchor.isContinuous&&(I[ao]||(I[ao]={top:[],right:[],bottom:[],left:[]}),c(I[ao],-Math.PI/2,0,{endpoints:[ai[T],ai[T]],paint:function(){}},!1,ao,0,!1,ai[T].anchor.getDefaultFace(),ao,af,ad),g.addWithFunction(ab,ao,function(a){return a===ao}))}for(T=0;T<ab.length;T++){z(ab[T],I[ab[T]])}for(T=0;T<ai.length;T++){ai[T].paint({timestamp:am,offset:Z,dimensions:Z.s,recalc:aj!==!0})}for(T=0;T<ad.length;T++){var S=H.getCachedData(ad[T].elementId);ad[T].paint({timestamp:am,offset:S,dimensions:S.s})}for(T=0;T<ah.length;T++){var u=ah[T][1];if(u.anchor.constructor==m.DynamicAnchor){u.paint({elementWithPrecedence:ao,timestamp:am}),g.addWithFunction(af,ah[T][0],function(e){return e.id==ah[T][0].id});for(var n=0;n<u.connections.length;n++){u.connections[n]!==ah[T][0]&&g.addWithFunction(af,u.connections[n],function(e){return e.id==u.connections[n].id})}}else{u.anchor.constructor==m.Anchor&&g.addWithFunction(af,ah[T][0],function(e){return e.id==ah[T][0].id})}}var d=G[ao];for(d&&d.paint({timestamp:am,recalc:!1,elId:ao}),T=0;T<af.length;T++){af[T].paint({elId:ao,timestamp:am,recalc:!1,clearEdits:ak})}}};var b=function(x){g.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var w=x.faces||["top","right","bottom","left"],v=!(x.clockwise===!1),u={},t={top:"bottom",right:"left",left:"right",bottom:"top"},s={top:"right",right:"bottom",left:"top",bottom:"left"},r={top:"left",right:"top",left:"bottom",bottom:"right"},q=v?s:r,p=v?r:s,f=x.cssClass||"",e=0;e<w.length;e++){u[w[e]]=!0}this.getDefaultFace=function(){return 0===w.length?"top":w[0]},this.verifyEdge=function(d){return u[d]?d:u[t[d]]?t[d]:u[q[d]]?q[d]:u[p[d]]?p[d]:d},this.isEdgeSupported=function(d){return u[d]===!0},this.compute=function(d){return O[d.element.id]||P[d.element.id]||[0,0]},this.getCurrentLocation=function(d){return O[d.element.id]||P[d.element.id]||[0,0]},this.getOrientation=function(d){return N[d.id]||[0,0]},this.clearUserDefinedLocation=function(){delete O[x.elementId]},this.setUserDefinedLocation=function(a){O[x.elementId]=a},this.getCssClass=function(){return f}};H.continuousAnchorFactory={get:function(d){return new b(d)},clear:function(d){delete O[d],delete P[d]}}},m.Anchor=function(b){this.x=b.x||0,this.y=b.y||0,this.elementId=b.elementId,this.cssClass=b.cssClass||"",this.userDefinedLocation=null,this.orientation=b.orientation||[0,0],this.lastReturnValue=null,this.offsets=b.offsets||[0,0],this.timestamp=null,g.EventGenerator.apply(this),this.compute=function(f){var e=f.xy,o=f.wh,n=f.timestamp;return f.clearUserDefinedLocation&&(this.userDefinedLocation=null),n&&n===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[e[0]+this.x*o[0]+this.offsets[0],e[1]+this.y*o[1]+this.offsets[1]],this.timestamp=n,this.lastReturnValue)},this.getCurrentLocation=function(c){return c=c||{},null==this.lastReturnValue||null!=c.timestamp&&this.timestamp!=c.timestamp?this.compute(c):this.lastReturnValue}},g.extend(m.Anchor,g.EventGenerator,{equals:function(e){if(!e){return !1}var d=e.getOrientation(),f=this.getOrientation();return this.x==e.x&&this.y==e.y&&this.offsets[0]==e.offsets[0]&&this.offsets[1]==e.offsets[1]&&f[0]==d[0]&&f[1]==d[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(b){this.userDefinedLocation=b},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),m.FloatingAnchor=function(n){m.Anchor.apply(this,arguments);var c=n.reference,t=n.referenceCanvas,s=m.getSize(t),r=0,q=0,p=null,o=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(e){var d=e.xy,f=[d[0]+s[0]/2,d[1]+s[1]/2];return o=f,f},this.getOrientation=function(b){if(p){return p}var d=c.getOrientation(b);return[-1*Math.abs(d[0])*r,-1*Math.abs(d[1])*q]},this.over=function(e,d){p=e.getOrientation(d)},this.out=function(){p=null},this.getCurrentLocation=function(b){return null==o?this.compute(b):o}},g.extend(m.FloatingAnchor,m.Anchor);var l=function(e,c,f){return e.constructor==m.Anchor?e:c.makeAnchor(e,f,c)};m.DynamicAnchor=function(d){m.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=d.elementId,this.jsPlumbInstance=d.jsPlumbInstance;for(var c=0;c<d.anchors.length;c++){this.anchors[c]=l(d.anchors[c],this.jsPlumbInstance,this.elementId)}this.getAnchors=function(){return this.anchors},this.locked=!1;var r=this.anchors.length>0?this.anchors[0]:null,q=r,p=this,o=function(A,z,y,x,w){var v=x[0]+A.x*w[0],u=x[1]+A.y*w[1],t=x[0]+w[0]/2,s=x[1]+w[1]/2;return Math.sqrt(Math.pow(z-v,2)+Math.pow(y-u,2))+Math.sqrt(Math.pow(t-v,2)+Math.pow(s-u,2))},n=d.selector||function(C,B,A,z,y){for(var x=A[0]+z[0]/2,w=A[1]+z[1]/2,v=-1,u=1/0,t=0;t<y.length;t++){var s=o(y[t],x,w,C,B);u>s&&(v=t+0,u=s)}return y[v]};this.compute=function(f){var e=f.xy,v=f.wh,u=f.txy,t=f.twh;this.timestamp=f.timestamp;var s=p.getUserDefinedLocation();return null!=s?s:this.locked||null==u||null==t?r.compute(f):(f.timestamp=null,r=n(e,v,u,t,this.anchors),this.x=r.x,this.y=r.y,r!=q&&this.fire("anchorChanged",r),q=r,r.compute(f))},this.getCurrentLocation=function(b){return this.getUserDefinedLocation()||(null!=r?r.getCurrentLocation(b):null)},this.getOrientation=function(b){return null!=r?r.getOrientation(b):[0,0]},this.over=function(f,e){null!=r&&r.over(f,e)},this.out=function(){null!=r&&r.out()},this.getCssClass=function(){return r&&r.getCssClass()||""}},g.extend(m.DynamicAnchor,m.Anchor);var k=function(n,c,r,q,p,o){m.Anchors[p]=function(b){var a=b.jsPlumbInstance.makeAnchor([n,c,r,q,0,0],b.elementId,b.jsPlumbInstance);return a.type=p,o&&o(a,b),a}};k(0.5,0,0,-1,"TopCenter"),k(0.5,1,0,1,"BottomCenter"),k(0,0.5,-1,0,"LeftMiddle"),k(1,0.5,1,0,"RightMiddle"),k(0.5,0,0,-1,"Top"),k(0.5,1,0,1,"Bottom"),k(0,0.5,-1,0,"Left"),k(1,0.5,1,0,"Right"),k(0.5,0.5,0,0,"Center"),k(1,0,0,-1,"TopRight"),k(1,1,0,1,"BottomRight"),k(0,0,0,-1,"TopLeft"),k(0,1,0,1,"BottomLeft"),m.Defaults.DynamicAnchors=function(b){return b.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],b.elementId,b.jsPlumbInstance)},m.Anchors.AutoDefault=function(d){var c=d.jsPlumbInstance.makeDynamicAnchor(m.Defaults.DynamicAnchors(d));return c.type="AutoDefault",c};var i=function(d,c){m.Anchors[d]=function(b){var a=b.jsPlumbInstance.makeAnchor(["Continuous",{faces:c}],b.elementId,b.jsPlumbInstance);return a.type=d,a}};m.Anchors.Continuous=function(b){return b.jsPlumbInstance.continuousAnchorFactory.get(b)},i("ContinuousLeft",["left"]),i("ContinuousTop",["top"]),i("ContinuousBottom",["bottom"]),i("ContinuousRight",["right"]),k(0,0,0,0,"Assign",function(e,d){var f=d.position||"Fixed";e.positionFinder=f.constructor==String?d.jsPlumbInstance.AnchorPositionFinders[f]:f,e.constructorParams=d}),h.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(e,d,f){return[(e.left-d.left)/f[0],(e.top-d.top)/f[1]]},Grid:function(w,v,u,t){var s=w.left-v.left,r=w.top-v.top,q=u[0]/t.grid[0],p=u[1]/t.grid[1],o=Math.floor(s/q),n=Math.floor(r/p);return[(o*q+q/2)/u[0],(n*p+p/2)/u[1]]}},m.Anchors.Perimeter=function(x){x=x||{};var w=x.anchorCount||60,v=x.shape;if(!v){throw new Error("no shape supplied to Perimeter Anchor type")}var u=function(){for(var b=0.5,D=2*Math.PI/w,C=0,B=[],A=0;w>A;A++){var z=b+b*Math.sin(C),y=b+b*Math.cos(C);B.push([z,y,0,0]),C+=D}return B},t=function(b){for(var B=w/b.length,A=[],z=function(c,H,G,F,E){B=w*E;for(var D=(G-c)/B,C=(F-H)/B,d=0;B>d;d++){A.push([c+D*d,H+C*d,0,0])}},y=0;y<b.length;y++){z.apply(null,b[y])}return A},s=function(e){for(var d=[],f=0;f<e.length;f++){d.push([e[f][0],e[f][1],e[f][2],e[f][3],1/e.length])}return t(d)},r=function(){return s([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},q={Circle:u,Ellipse:u,Diamond:function(){return s([[0.5,0,1,0.5],[1,0.5,0.5,1],[0.5,1,0,0.5],[0,0.5,0.5,0]])},Rectangle:r,Square:r,Triangle:function(){return s([[0.5,0,1,1],[1,1,0,1],[0,1,0.5,0]])},Path:function(y){for(var e=y.points,D=[],C=0,B=0;B<e.length-1;B++){var A=Math.sqrt(Math.pow(e[B][2]-e[B][0])+Math.pow(e[B][3]-e[B][1]));C+=A,D.push([e[B][0],e[B][1],e[B+1][0],e[B+1][1],A])}for(var z=0;z<D.length;z++){D[z][4]=D[z][4]/C}return t(D)}},p=function(z,y){for(var E=[],D=y/180*Math.PI,C=0;C<z.length;C++){var B=z[C][0]-0.5,A=z[C][1]-0.5;E.push([0.5+(B*Math.cos(D)-A*Math.sin(D)),0.5+(B*Math.sin(D)+A*Math.cos(D)),z[C][2],z[C][3]])}return E};if(!q[v]){throw new Error("Shape ["+v+"] is unknown by Perimeter Anchor type")}var o=q[v](x);x.rotation&&(o=p(o,x.rotation));var n=x.jsPlumbInstance.makeDynamicAnchor(o);return n.type="Perimeter",n}}.call("undefined"!=typeof window?window:this),function(){var t=this,s=t.jsPlumb,r=t.jsPlumbUtil,q=t.Biltong;s.Segments={AbstractSegment:function(b){this.params=b,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(b.x1,b.x2),minY:Math.min(b.y1,b.y2),maxX:Math.max(b.x1,b.x2),maxY:Math.max(b.y1,b.y2)}}},Straight:function(C){var B,A,z,y,x,w,v,u=(s.Segments.AbstractSegment.apply(this,arguments),function(){B=Math.sqrt(Math.pow(x-y,2)+Math.pow(v-w,2)),A=q.gradient({x:y,y:w},{x:x,y:v}),z=-1/A});this.type="Straight",this.getLength=function(){return B},this.getGradient=function(){return A},this.getCoordinates=function(){return{x1:y,y1:w,x2:x,y2:v}},this.setCoordinates=function(c){y=c.x1,w=c.y1,x=c.x2,v=c.y2,u()},this.setCoordinates({x1:C.x1,y1:C.y1,x2:C.x2,y2:C.y2}),this.getBounds=function(){return{minX:Math.min(y,x),minY:Math.min(w,v),maxX:Math.max(y,x),maxY:Math.max(w,v)}},this.pointOnPath=function(f,c){if(0!==f||c){if(1!=f||c){var g=c?f>0?f:B+f:f*B;return q.pointOnLine({x:y,y:w},{x:x,y:v},g)}return{x:x,y:v}}return{x:y,y:w}},this.gradientAtPoint=function(){return A},this.pointAlongPathFrom=function(h,g,E){var D=this.pointOnPath(h,E),i=0>=g?{x:y,y:w}:{x:x,y:v};return 0>=g&&Math.abs(g)>1&&(g*=-1),q.pointOnLine(D,i,g)};var d=function(f,e,g){return g>=Math.min(f,e)&&g<=Math.max(f,e)},b=function(f,e,g){return Math.abs(g-f)<Math.abs(g-e)?f:e};this.findClosestPointOnPath=function(e,c){var f={d:1/0,x:null,y:null,l:null,x1:y,x2:x,y1:w,y2:v};if(0===A){f.y=w,f.x=d(y,x,e)?e:b(y,x,e)}else{if(1/0==A||A==-1/0){f.x=y,f.y=d(w,v,c)?c:b(w,v,c)}else{var E=w-A*y,D=c-z*e,i=(D-E)/(A-z),h=A*i+E;f.x=d(y,x,i)?i:b(y,x,i),f.y=d(w,v,h)?h:b(w,v,h)}}var g=q.lineLength([f.x,f.y],[y,w]);return f.d=q.lineLength([e,c],[f.x,f.y]),f.l=g/B,f}},Arc:function(B){var A=(s.Segments.AbstractSegment.apply(this,arguments),function(a,e){return q.theta([B.cx,B.cy],[a,e])}),z=function(h,f){if(h.anticlockwise){var E=h.startAngle<h.endAngle?h.startAngle+y:h.startAngle,D=Math.abs(E-h.endAngle);return E-D*f}var C=h.endAngle<h.startAngle?h.endAngle+y:h.endAngle,i=Math.abs(C-h.startAngle);return h.startAngle+i*f},y=2*Math.PI;this.radius=B.r,this.anticlockwise=B.ac,this.type="Arc",B.startAngle&&B.endAngle?(this.startAngle=B.startAngle,this.endAngle=B.endAngle,this.x1=B.cx+this.radius*Math.cos(B.startAngle),this.y1=B.cy+this.radius*Math.sin(B.startAngle),this.x2=B.cx+this.radius*Math.cos(B.endAngle),this.y2=B.cy+this.radius*Math.sin(B.endAngle)):(this.startAngle=A(B.x1,B.y1),this.endAngle=A(B.x2,B.y2),this.x1=B.x1,this.y1=B.y1,this.x2=B.x2,this.y2=B.y2),this.endAngle<0&&(this.endAngle+=y),this.startAngle<0&&(this.startAngle+=y);var x=this.endAngle<this.startAngle?this.endAngle+y:this.endAngle;this.sweep=Math.abs(x-this.startAngle),this.anticlockwise&&(this.sweep=y-this.sweep);var w=2*Math.PI*this.radius,v=this.sweep/y,u=w*v;this.getLength=function(){return u},this.getBounds=function(){return{minX:B.cx-B.r,maxX:B.cx+B.r,minY:B.cy-B.r,maxY:B.cy+B.r}};var d=1e-10,b=function(f){var e=Math.floor(f),g=Math.ceil(f);return d>f-e?e:d>g-f?g:f};this.pointOnPath=function(a,C){if(0===a){return{x:this.x1,y:this.y1,theta:this.startAngle}}if(1==a){return{x:this.x2,y:this.y2,theta:this.endAngle}}C&&(a/=u);var i=z(this,a),h=B.cx+B.r*Math.cos(i),e=B.cy+B.r*Math.sin(i);return{x:b(h),y:b(e),theta:i}},this.gradientAtPoint=function(a,i){var h=this.pointOnPath(a,i),g=q.normal([B.cx,B.cy],[h.x,h.y]);return this.anticlockwise||1/0!=g&&g!=-1/0||(g*=-1),g},this.pointAlongPathFrom=function(I,H,G){var F=this.pointOnPath(I,G),E=2*(H/w)*Math.PI,D=this.anticlockwise?-1:1,C=F.theta+D*E,h=B.cx+this.radius*Math.cos(C),a=B.cy+this.radius*Math.sin(C);return{x:h,y:a}}},Bezier:function(b){this.curve=[{x:b.x1,y:b.y1},{x:b.cp1x,y:b.cp1y},{x:b.cp2x,y:b.cp2y},{x:b.x2,y:b.y2}],s.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(b.x1,b.x2,b.cp1x,b.cp2x),minY:Math.min(b.y1,b.y2,b.cp1y,b.cp2y),maxX:Math.max(b.x1,b.x2,b.cp1x,b.cp2x),maxY:Math.max(b.y1,b.y2,b.cp1y,b.cp2y)},this.type="Bezier";var a=function(e,g,f){return f&&(g=t.jsBezier.locationAlongCurveFrom(e,g>0?0:1,g)),g};this.pointOnPath=function(d,e){return d=a(this.curve,d,e),t.jsBezier.pointOnCurve(this.curve,d)},this.gradientAtPoint=function(d,e){return d=a(this.curve,d,e),t.jsBezier.gradientAtPoint(this.curve,d)},this.pointAlongPathFrom=function(d,g,f){return d=a(this.curve,d,f),t.jsBezier.pointAlongCurveFrom(this.curve,d,g)},this.getLength=function(){return t.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var p=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};s.Connectors.AbstractConnector=function(T){p.apply(this,arguments);var S=[],R=0,Q=[],P=[],O=T.stub||0,N=r.isArray(O)?O[0]:O,M=r.isArray(O)?O[1]:O,L=T.gap||0,K=r.isArray(L)?L[0]:L,J=r.isArray(L)?L[1]:L,I=null,G=!1,F=null,E=null,D=T.editable!==!1&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type],C=this.setGeometry=function(g,f){G=!f,E=g},B=this.getGeometry=function(){return E};this.hasBeenEdited=function(){return G},this.isEditing=function(){return null!=this.editor&&this.editor.isActive()},this.setEditable=function(f){return D=f&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type]&&(null==this.overrideSetEditable||this.overrideSetEditable())?f:!1},this.isEditable=function(){return D},this.findSegmentForPoint=function(g,f){for(var u={d:1/0,s:null,x:null,y:null,l:null},i=0;i<S.length;i++){var h=S[i].findClosestPointOnPath(g,f);h.d<u.d&&(u.d=h.d,u.l=h.l,u.x=h.x,u.y=h.y,u.s=S[i],u.x1=h.x1,u.x2=h.x2,u.y1=h.y1,u.y2=h.y2,u.index=i)}return u};var e=function(){for(var g=0,f=0;f<S.length;f++){var h=S[f].getLength();P[f]=h/R,Q[f]=[g,g+=h/R]}},d=function(g,f){f&&(g=g>0?g/R:(R+g)/R);for(var u=Q.length-1,i=1,h=0;h<Q.length;h++){if(Q[h][1]>=g){u=h,i=1==g?1:0===g?0:(g-Q[h][0])/P[h];break}}return{segment:S[u],proportion:i,index:u}},c=function(f,i,h){if(h.x1!=h.x2||h.y1!=h.y2){var g=new s.Segments[i](h);S.push(g),R+=g.getLength(),f.updateBounds(g)}},b=function(){R=S.length=Q.length=P.length=0};this.setSegments=function(g){I=[],R=0;for(var f=0;f<g.length;f++){I.push(g[f]),R+=g[f].getLength()}},this.getLength=function(){return R};var H=function(aj){this.lineWidth=aj.lineWidth;var ai=q.quadrant(aj.sourcePos,aj.targetPos),ah=aj.targetPos[0]<aj.sourcePos[0],ag=aj.targetPos[1]<aj.sourcePos[1],af=aj.lineWidth||1,ae=aj.sourceEndpoint.anchor.getOrientation(aj.sourceEndpoint),ad=aj.targetEndpoint.anchor.getOrientation(aj.targetEndpoint),ac=ah?aj.targetPos[0]:aj.sourcePos[0],ab=ag?aj.targetPos[1]:aj.sourcePos[1],aa=Math.abs(aj.targetPos[0]-aj.sourcePos[0]),Z=Math.abs(aj.targetPos[1]-aj.sourcePos[1]);if(0===ae[0]&&0===ae[1]||0===ad[0]&&0===ad[1]){var Y=aa>Z?0:1,X=[1,0][Y];ae=[],ad=[],ae[Y]=aj.sourcePos[Y]>aj.targetPos[Y]?-1:1,ad[Y]=aj.sourcePos[Y]>aj.targetPos[Y]?1:-1,ae[X]=0,ad[X]=0}var W=ah?aa+K*ae[0]:K*ae[0],V=ag?Z+K*ae[1]:K*ae[1],U=ah?J*ad[0]:aa+J*ad[0],A=ag?J*ad[1]:Z+J*ad[1],z=ae[0]*ad[0]+ae[1]*ad[1],y={sx:W,sy:V,tx:U,ty:A,lw:af,xSpan:Math.abs(U-W),ySpan:Math.abs(A-V),mx:(W+U)/2,my:(V+A)/2,so:ae,to:ad,x:ac,y:ab,w:aa,h:Z,segment:ai,startStubX:W+ae[0]*N,startStubY:V+ae[1]*N,endStubX:U+ad[0]*M,endStubY:A+ad[1]*M,isXGreaterThanStubTimes2:Math.abs(W-U)>N+M,isYGreaterThanStubTimes2:Math.abs(V-A)>N+M,opposite:-1==z,perpendicular:0===z,orthogonal:1==z,sourceAxis:0===ae[0]?"y":"x",points:[ac,ab,aa,Z,W,V,U,A]};return y.anchorOrientation=y.opposite?"opposite":y.orthogonal?"orthogonal":"perpendicular",y};return this.getSegments=function(){return S},this.updateBounds=function(g){var f=g.getBounds();this.bounds.minX=Math.min(this.bounds.minX,f.minX),this.bounds.maxX=Math.max(this.bounds.maxX,f.maxX),this.bounds.minY=Math.min(this.bounds.minY,f.minY),this.bounds.maxY=Math.max(this.bounds.maxY,f.maxY)},this.pointOnPath=function(g,f){var h=d(g,f);return h.segment&&h.segment.pointOnPath(h.proportion,!1)||[0,0]},this.gradientAtPoint=function(g,f){var h=d(g,f);return h.segment&&h.segment.gradientAtPoint(h.proportion,!1)||0},this.pointAlongPathFrom=function(g,f,i){var h=d(g,i);return h.segment&&h.segment.pointAlongPathFrom(h.proportion,f,!1)||[0,0]},this.compute=function(f){F=H.call(this,f),b(),this._compute(F,f),this.x=F.points[0],this.y=F.points[1],this.w=F.points[2],this.h=F.points[3],this.segment=F.segment,e()},{addSegment:c,prepareCompute:H,sourceStub:N,targetStub:M,maxStub:Math.max(N,M),sourceGap:K,targetGap:J,maxGap:Math.max(K,J),setGeometry:C,getGeometry:B}},r.extend(s.Connectors.AbstractConnector,p);var o=s.Connectors.Straight=function(){this.type="Straight";var b=s.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(a){b.addSegment(this,"Straight",{x1:a.sx,y1:a.sy,x2:a.startStubX,y2:a.startStubY}),b.addSegment(this,"Straight",{x1:a.startStubX,y1:a.startStubY,x2:a.endStubX,y2:a.endStubY}),b.addSegment(this,"Straight",{x1:a.endStubX,y1:a.endStubY,x2:a.tx,y2:a.ty})}};r.extend(s.Connectors.Straight,s.Connectors.AbstractConnector),s.registerConnectorType(o,"Straight"),s.Endpoints.AbstractEndpoint=function(d){p.apply(this,arguments);var c=this.compute=function(){var b=this._compute.apply(this,arguments);return this.x=b[0],this.y=b[1],this.w=b[2],this.h=b[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,b};return{compute:c,cssClass:d.cssClass}},r.extend(s.Endpoints.AbstractEndpoint,p),s.Endpoints.Dot=function(b){this.type="Dot",s.Endpoints.AbstractEndpoint.apply(this,arguments),b=b||{},this.radius=b.radius||10,this.defaultOffset=0.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(u,i,A){this.radius=A.radius||this.radius;var z=u[0]-this.radius,y=u[1]-this.radius,x=2*this.radius,w=2*this.radius;if(A.strokeStyle){var v=A.lineWidth||1;z-=v,y-=v,x+=2*v,w+=2*v}return[z,y,x,w,this.radius]}},r.extend(s.Endpoints.Dot,s.Endpoints.AbstractEndpoint),s.Endpoints.Rectangle=function(b){this.type="Rectangle",s.Endpoints.AbstractEndpoint.apply(this,arguments),b=b||{},this.width=b.width||20,this.height=b.height||20,this._compute=function(i,h,y){var x=y.width||this.width,w=y.height||this.height,v=i[0]-x/2,u=i[1]-w/2;return[v,u,x,w]}},r.extend(s.Endpoints.Rectangle,s.Endpoints.AbstractEndpoint);var n=function(){s.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};r.extend(n,s.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(b){this._jsPlumb.displayElements.push(b)}}),s.Endpoints.Image=function(g){this.type="Image",n.apply(this,arguments),s.Endpoints.AbstractEndpoint.apply(this,arguments);var c=g.onload,b=g.src||g.url,a=g.cssClass?" "+g.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=g.width,this._jsPlumb.heightToUse=g.height,this._jsPlumb.endpoint=g.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,c&&c(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(e,d){var f=e.constructor==String?e:e.src;c=d,this._jsPlumb.img.src=f,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(b,c),this._compute=function(d){return this.anchorPoint=d,this._jsPlumb.ready?[d[0]-this._jsPlumb.widthToUse/2,d[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var e=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,d=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;r.sizeElement(this.canvas,e,d,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(d,e){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(d,e):t.setTimeout(function(){this.paint(d,e)}.bind(this),200))}},r.extend(s.Endpoints.Image,[n,s.Endpoints.AbstractEndpoint],{cleanup:function(b){b&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),s.Endpoints.Blank=function(b){s.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",n.apply(this,arguments),this._compute=function(d){return[d[0],d[1],10,0]};var c=b.cssClass?" "+b.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+c),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(){r.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},r.extend(s.Endpoints.Blank,[s.Endpoints.AbstractEndpoint,n],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),s.Endpoints.Triangle=function(b){this.type="Triangle",s.Endpoints.AbstractEndpoint.apply(this,arguments),b=b||{},b.width=b.width||55,b.height=b.height||55,this.width=b.width,this.height=b.height,this._compute=function(i,h,y){var x=y.width||self.width,w=y.height||self.height,v=i[0]-x/2,u=i[1]-w/2;return[v,u,x,w]}};var m=s.Overlays.AbstractOverlay=function(b){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=b.component,this.loc=null==b.location?0.5:b.location,this.endpointLoc=null==b.endpointLocation?[0.5,0.5]:b.endpointLocation,this.visible=b.visible!==!1};m.prototype={cleanup:function(b){b&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(){},setVisible:function(b){this.visible=b,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(b){this.loc+=b,this.component.repaint()},setLocation:function(b){this.loc=b,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},s.Overlays.Arrow=function(d){this.type="Arrow",m.apply(this,arguments),this.isAppendedAtTopLevel=!1,d=d||{},this.length=d.length||20,this.width=d.width||20,this.id=d.id;var c=(d.direction||1)<0?-1:1,h=d.paintStyle||{lineWidth:1},g=d.foldback||0.623;this.computeMaxSize=function(){return 1.5*self.width},this.elementCreated=function(a){if(this.path=a,d.events){for(var e in d.events){jsPlumb.on(a,e,d.events[e])}}},this.draw=function(D,C){var B,A,z,y,x;if(D.pointAlongPathFrom){if(r.isString(this.loc)||this.loc>1||this.loc<0){var w=parseInt(this.loc,10),v=this.loc<0?1:0;B=D.pointAlongPathFrom(v,w,!1),A=D.pointAlongPathFrom(v,w-c*this.length/2,!1),z=q.pointOnLine(B,A,this.length)}else{if(1==this.loc){if(B=D.pointOnPath(this.loc),A=D.pointAlongPathFrom(this.loc,-this.length),z=q.pointOnLine(B,A,this.length),-1==c){var u=z;z=B,B=u}}else{if(0===this.loc){if(z=D.pointOnPath(this.loc),A=D.pointAlongPathFrom(this.loc,this.length),B=q.pointOnLine(z,A,this.length),-1==c){var f=z;z=B,B=f}}else{B=D.pointAlongPathFrom(this.loc,c*this.length/2),A=D.pointOnPath(this.loc),z=q.pointOnLine(B,A,this.length)}}}y=q.perpendicularLineTo(B,z,this.width),x=q.pointOnLine(B,z,g*this.length);var e={hxy:B,tail:y,cxy:x},b=h.strokeStyle||C.strokeStyle,F=h.fillStyle||C.strokeStyle,E=h.lineWidth||C.lineWidth;return{component:D,d:e,lineWidth:E,strokeStyle:b,fillStyle:F,minX:Math.min(B.x,y[0].x,y[1].x),maxX:Math.max(B.x,y[0].x,y[1].x),minY:Math.min(B.y,y[0].y,y[1].y),maxY:Math.max(B.y,y[0].y,y[1].y)}}return{component:D,minX:0,maxX:0,minY:0,maxY:0}}},r.extend(s.Overlays.Arrow,m,{updateFrom:function(b){this.length=b.length||this.length,this.width=b.width||this.width,this.direction=null!=b.direction?b.direction:this.direction,this.foldback=b.foldback||this.foldback}}),s.Overlays.PlainArrow=function(b){b=b||{};var d=s.extend(b,{foldback:1});s.Overlays.Arrow.call(this,d),this.type="PlainArrow"},r.extend(s.Overlays.PlainArrow,s.Overlays.Arrow),s.Overlays.Diamond=function(b){b=b||{};var f=b.length||40,e=jsPlumb.extend(b,{length:f/2,foldback:2});s.Overlays.Arrow.call(this,e),this.type="Diamond"},r.extend(s.Overlays.Diamond,s.Overlays.Arrow);var l=function(d,c){return(null==d._jsPlumb.cachedDimensions||c)&&(d._jsPlumb.cachedDimensions=d.getDimensions()),d._jsPlumb.cachedDimensions},k=function(b){s.jsPlumbUIComponent.apply(this,arguments),m.apply(this,arguments);var c=this.fire;this.fire=function(){c.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=b.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=b.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=b.create,this._jsPlumb.initiallyInvisible=b.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var a=this._jsPlumb.div=jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));a.style.position="absolute",a.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:b.cssClass?b.cssClass:""),this._jsPlumb.instance.appendElement(a),this._jsPlumb.instance.getId(a),this.canvas=a;var d="translate(-50%, -50%)";a.style.webkitTransform=d,a.style.mozTransform=d,a.style.msTransform=d,a.style.oTransform=d,a.style.transform=d,a._jsPlumb=this,b.visible===!1&&(a.style.display="none")}return this._jsPlumb.div},this.draw=function(C,B,A){var z=l(this);if(null!=z&&2==z.length){var y={x:0,y:0};if(A){y={x:A[0],y:A[1]}}else{if(C.pointOnPath){var x=this.loc,w=!1;(r.isString(this.loc)||this.loc<0||this.loc>1)&&(x=parseInt(this.loc,10),w=!0),y=C.pointOnPath(x,w)}else{var v=this.loc.constructor==Array?this.loc:this.endpointLoc;y={x:v[0]*C.w,y:v[1]*C.h}}}var u=y.x-z[0]/2,i=y.y-z[1]/2;return{component:C,d:{minx:u,miny:i,td:z,cxy:y},minX:u,maxX:u+z[0],minY:i,maxY:i+z[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};r.extend(k,[s.jsPlumbUIComponent,m],{getDimensions:function(){return[1,1]},setVisible:function(b){this._jsPlumb.div&&(this._jsPlumb.div.style.display=b?"block":"none",b&&this._jsPlumb.initiallyInvisible&&(l(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(b){b?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(b){null!=this._jsPlumb.div&&b.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var b=l(this);return Math.max(b[0],b[1])},paint:function(b){this._jsPlumb.initialised||(this.getElement(),b.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=b.component.x+b.d.minx+"px",this._jsPlumb.div.style.top=b.component.y+b.d.miny+"px"}}),s.Overlays.Custom=function(){this.type="Custom",k.apply(this,arguments)},r.extend(s.Overlays.Custom,k),s.Overlays.GuideLines=function(){var b=this;b.length=50,b.lineWidth=5,this.type="GuideLines",m.apply(this,arguments),s.jsPlumbUIComponent.apply(this,arguments),this.draw=function(a){var w=a.pointAlongPathFrom(b.loc,b.length/2),v=a.pointOnPath(b.loc),u=q.pointOnLine(w,v,b.length),i=q.perpendicularLineTo(w,u,40),d=q.perpendicularLineTo(u,w,20);return{connector:a,head:w,tail:u,headLine:d,tailLine:i,minX:Math.min(w.x,u.x,d[0].x,d[1].x),minY:Math.min(w.y,u.y,d[0].y,d[1].y),maxX:Math.max(w.x,u.x,d[0].x,d[1].x),maxY:Math.max(w.y,u.y,d[0].y,d[1].y)}}},s.Overlays.Label=function(b){this.labelStyle=b.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var h=s.extend({create:function(){return jsPlumb.createElement("div")}},b);if(s.Overlays.Custom.call(this,h),this.type="Label",this.label=b.label||"",this.labelText=null,this.labelStyle){var g=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",g.style.font=this.labelStyle.font,g.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(g.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var f=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";g.style.border=this.labelStyle.borderWidth+"px solid "+f}this.labelStyle.padding&&(g.style.padding=this.labelStyle.padding)}},r.extend(s.Overlays.Label,s.Overlays.Custom,{cleanup:function(b){b&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(b){this.label=b,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),k.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var b=this.label(this);this.getElement().innerHTML=b.replace(/\r\n/g,"<br/>")}else{null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}},updateFrom:function(b){b.label&&this.setLabel(b.label)}})}.call("undefined"!=typeof window?window:this),function(){var e=this,d=e.jsPlumb,f=function(a){var g=a._mottle;return g||(g=a._mottle=new e.Mottle),g};d.extend(e.jsPlumbInstance.prototype,{getEventManager:function(){return f(this)},on:function(){return this.getEventManager().on.apply(this,arguments),this},off:function(){return this.getEventManager().off.apply(this,arguments),this}})}.call("undefined"!=typeof window?window:this),function(){var N=this,M=N.jsPlumbUtil,L=N.jsPlumbInstance,K="jsplumb-group-collapsed",J="jsplumb-group-expanded",I="[jsplumb-group-content]",H="elementDraggable",G="stop",F="revert",E="_groupManager",D="_jsPlumbGroup",C="_jsPlumbGroupDrag",B="group:addMember",A="group:removeMember",z="group:add",y="group:remove",x="group:expand",w="group:collapse",v=function(r){function q(f){delete f.proxies;var h,g=k[f.id];null!=g&&(h=function(a){return a.id===f.id},M.removeWithFunction(g.connections.source,h),M.removeWithFunction(g.connections.target,h),delete k[f.id]),g=e[f.id],null!=g&&(h=function(a){return a.id===f.id},M.removeWithFunction(g.connections.source,h),M.removeWithFunction(g.connections.target,h),delete e[f.id])}function p(a,h){for(var g=a.getMembers(),f=0;f<g.length;f++){r[h?"show":"hide"](g[f],!0)}}function o(a){var s=a.getMembers(),m=r.getConnections({source:s},!0),l=r.getConnections({target:s},!0),i={};a.connections.source.length=0,a.connections.target.length=0;var h=function(f){for(var g=0;g<f.length;g++){i[f[g].id]||(i[f[g].id]=!0,f[g].source._jsPlumbGroup===a?(f[g].target._jsPlumbGroup!==a&&a.connections.source.push(f[g]),k[f[g].id]=a):f[g].target._jsPlumbGroup===a&&(a.connections.target.push(f[g]),e[f[g].id]=a))}};h(m),h(l)}var n={},k={},e={};r.bind("connection",function(c){null!=c.source[D]&&null!=c.target[D]&&c.source[D]===c.target[D]?(k[c.connection.id]=c.source[D],e[c.connection.id]=c.source[D]):(null!=c.source[D]&&(M.suggest(c.source[D].connections.source,c.connection),k[c.connection.id]=c.source[D]),null!=c.target[D]&&(M.suggest(c.target[D].connections.target,c.connection),e[c.connection.id]=c.target[D]))}),r.bind("connectionDetached",function(c){q(c.connection)}),r.bind("connectionMoved",function(g){var f=0===g.index?k:e,l=f[g.connection.id];if(l){var i=l.connections[0===g.index?"source":"target"],h=i.indexOf(g.connection);-1!=h&&i.splice(h,1)}}),this.addGroup=function(a){r.addClass(a.el,J),n[a.id]=a,a.manager=this,o(a),r.fire(z,{group:a})},this.addToGroup=function(g,f,h){g=this.getGroup(g),g&&g.add(f,h)},this.removeFromGroup=function(g,f,h){g=this.getGroup(g),g&&g.remove(f,null,h)},this.getGroup=function(f){var g=f;if(M.isString(f)&&(g=n[f],null==g)){throw new TypeError("No such group ["+f+"]")}return g},this.getGroups=function(){var f=[];for(var c in n){f.push(n[c])}return f},this.removeGroup=function(a,f){a=this.getGroup(a),this.expandGroup(a,!0),a[f?"removeAll":"orphanAll"](),r.remove(a.getEl()),delete n[a.id],delete r._groups[a.id],r.fire(y,{group:a})},this.removeAllGroups=function(f){for(var c in n){this.removeGroup(n[c],f)}};var d=this.collapseConnection=function(a,Q,P){var O,t=P.getEl(),s=r.getId(t),m=a.endpoints[Q].elementId,l=a.endpoints[0===Q?1:0].element;l[D]&&!l[D].shouldProxy()&&l[D].collapsed||(a.proxies=a.proxies||[],a.proxies[Q]?O=a.proxies[Q].ep:(O=r.addEndpoint(t,{endpoint:P.getEndpoint(a,Q),anchor:P.getAnchor(a,Q),parameters:{isProxyEndpoint:!0}}),O._forceDeleteOnDetach=!0),a.proxies[Q]={ep:O,originalEp:a.endpoints[Q]},0===Q?r.anchorManager.sourceChanged(m,s,a,t):(r.anchorManager.updateOtherEndpoint(a.endpoints[0].elementId,m,s,a),a.target=t,a.targetId=s),a.proxies[Q].originalEp.detachFromConnection(a,null,!0),O.connections=[a],a.endpoints[Q]=O,a.setVisible(!0))};this.collapseGroup=function(a){if(a=this.getGroup(a),null!=a&&!a.collapsed){var h=a.getEl();if(p(a,!1),a.shouldProxy()){var f=function(g,m){for(var l=0;l<g.length;l++){var i=g[l];d(i,m,a)}};f(a.connections.source,0),f(a.connections.target,1)}a.collapsed=!0,r.removeClass(h,J),r.addClass(h,K),r.revalidate(h),r.fire(w,{group:a})}};var b=this.expandConnection=function(a,s,m){if(null!=a.proxies&&null!=a.proxies[s]){var l=r.getId(m.getEl()),i=a.proxies[s].originalEp.element,h=a.proxies[s].originalEp.elementId;a.endpoints[s]=a.proxies[s].originalEp,0===s?r.anchorManager.sourceChanged(l,h,a,i):(r.anchorManager.updateOtherEndpoint(a.endpoints[0].elementId,l,h,a),a.target=i,a.targetId=h),a.proxies[s].ep.detachFromConnection(a,null,!0),a.proxies[s].originalEp.addConnection(a),delete a.proxies[s]}};this.expandGroup=function(a,l){if(a=this.getGroup(a),null!=a&&a.collapsed){var i=a.getEl();if(p(a,!0),a.shouldProxy()){var f=function(g,s){for(var m=0;m<g.length;m++){var h=g[m];b(h,s,a)}};f(a.connections.source,0),f(a.connections.target,1)}a.collapsed=!1,r.addClass(i,J),r.removeClass(i,K),r.revalidate(i),this.repaintGroup(a),l||r.fire(x,{group:a})}},this.repaintGroup=function(a){a=this.getGroup(a);for(var g=a.getMembers(),f=0;f<g.length;f++){r.revalidate(g[f])}},this.updateConnectionsForGroup=o,this.refreshAllGroups=function(){for(var a in n){o(n[a]),r.dragManager.updateOffsets(r.getId(n[a].el))}}},u=function(aa,Z){function Y(c){return c.offsetParent}function X(ab,t){var s=Y(ab),r=aa.getSize(s),q=aa.getSize(ab),p=t[0],o=p+q[0],e=t[1],c=e+q[1];return o>0&&p<r[0]&&c>0&&e<r[1]}function W(e){var c=aa.getId(e),o=aa.getOffset(e);e.parentNode.removeChild(e),aa.getContainer().appendChild(e),aa.setPosition(e,o),delete e._jsPlumbGroup,R(e),aa.dragManager.clearParent(e,c)}function V(c){X(c.el,c.pos)||(c.el._jsPlumbGroup.remove(c.el),S?aa.remove(c.el):W(c.el))}function T(d){var c=aa.getId(d);aa.revalidate(d),aa.dragManager.revalidateParent(d,c)}function R(c){(S||U)&&c._katavorioDrag.off(G,V),S||U||!a||(c._katavorioDrag.off(F,T),c._katavorioDrag.setRevert(null))}function P(c){(S||U)&&c._katavorioDrag.on(G,V),b&&c._katavorioDrag.setConstrain(!0),f&&c._katavorioDrag.setUseGhostProxy(!0),S||U||!a||(c._katavorioDrag.on(F,T),c._katavorioDrag.setRevert(function(e,d){return !X(e,d)}))}var n=this,l=Z.el;this.getEl=function(){return l},this.id=Z.id||M.uuid(),l._isJsPlumbGroup=!0;var i=aa.getSelector(l,I),g=i&&i.length>0?i[0]:l,f=Z.ghost===!0,b=f||Z.constrain===!0,a=Z.revert!==!1,U=Z.orphan===!0,S=Z.prune===!0,Q=Z.dropOverride===!0,O=Z.proxied!==!1,m=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(){return Z.anchor||"Continuous"},this.getEndpoint=function(){return Z.endpoint||["Dot",{radius:10}]},this.collapsed=!1,Z.draggable!==!1){var k={stop:function(c){aa.fire("groupDragStop",jsPlumb.extend(c,{group:n}))},scope:C};Z.dragOptions&&N.jsPlumb.extend(k,Z.dragOptions),aa.draggable(Z.el,k)}Z.droppable!==!1&&aa.droppable(Z.el,{drop:function(o){var c=aa.getGroupManager(),ab=o.drag.el;if(!ab._isJsPlumbGroup){var t=ab._jsPlumbGroup;if(t!==n){var s=aa.getOffset(ab,!0),r=n.collapsed?aa.getOffset(l,!0):aa.getOffset(g,!0);if(null!=t){if(t.overrideDrop(ab,n)){return}t.remove(ab,!0),c.updateConnectionsForGroup(t)}n.add(ab,!0);var q=function(e,ad){var ac=0==ad?1:0;e.each(function(d){d.setVisible(!1),d.endpoints[ac].element._jsPlumbGroup===n?(d.endpoints[ac].setVisible(!1),c.expandConnection(d,ac,n)):(d.endpoints[ad].setVisible(!1),c.collapseConnection(d,ad,n))})};n.collapsed&&(q(aa.select({source:ab}),0),q(aa.select({target:ab}),1));var p=aa.getId(ab);aa.dragManager.setParent(ab,p,l,aa.getId(l),s),aa.setPosition(ab,{left:s.left-r.left,top:s.top-r.top}),aa.dragManager.revalidateParent(ab,p,s),c.updateConnectionsForGroup(n),setTimeout(function(){aa.fire(B,{group:n,el:ab})},0)}}}});var h=function(o,e){for(var q=null==o.nodeType?o:[o],p=0;p<q.length;p++){e(q[p])}};this.overrideDrop=function(){return Q&&(a||S||U)},this.add=function(d,c){h(d,function(e){e._jsPlumbGroup=n,m.push(e),aa.isAlreadyDraggable(e)&&P(e),e.parentNode!=g&&g.appendChild(e),c||aa.fire(B,{group:n,el:e})})},this.remove=function(c,p,o){h(c,function(d){if(delete d._jsPlumbGroup,M.removeWithFunction(m,function(q){return q===d}),p){try{n.getEl().removeChild(d)}catch(e){jsPlumbUtil.log("Could not remove element from Group "+e)}}R(d),o||aa.fire(A,{group:n,el:d})})},this.removeAll=function(){for(var c=0;c<m.length;c++){aa.remove(m[c])}m.length=0},this.orphanAll=function(){for(var c=0;c<m.length;c++){W(m[c])}m.length=0},this.getMembers=function(){return m},l[D]=this,aa.bind(H,function(c){c.el._jsPlumbGroup==this&&P(c.el)}.bind(this)),this.shouldProxy=function(){return O},aa.getGroupManager().addGroup(this)};L.prototype.addGroup=function(e){var d=this;if(d._groups=d._groups||{},null!=d._groups[e.id]){throw new TypeError("cannot create Group ["+e.id+"]; a Group with that ID exists")}if(null!=e.el[D]){throw new TypeError("cannot create Group ["+e.id+"]; the given element is already a Group")}var f=new u(d,e);return d._groups[f.id]=f,f},L.prototype.addToGroup=function(e,d,f){this.getGroupManager().addToGroup(e,d,f)},L.prototype.removeFromGroup=function(e,d,f){this.getGroupManager().removeFromGroup(e,d,f)},L.prototype.removeGroup=function(d,c){this.getGroupManager().removeGroup(d,c)},L.prototype.removeAllGroups=function(b){this.getGroupManager().removeAllGroups(b)},L.prototype.getGroup=function(b){return this.getGroupManager().getGroup(b)},L.prototype.getGroups=function(){return this.getGroupManager().getGroups()},L.prototype.expandGroup=function(b){this.getGroupManager().expandGroup(b)},L.prototype.collapseGroup=function(b){this.getGroupManager().collapseGroup(b)},L.prototype.repaintGroup=function(b){this.getGroupManager().repaintGroup(b)},L.prototype.toggleGroup=function(b){b=this.getGroupManager().getGroup(b),null!=b&&this.getGroupManager()[b.collapsed?"expandGroup":"collapseGroup"](b)},L.prototype.getGroupManager=function(){var b=this[E];return null==b&&(b=this[E]=new v(this)),b},L.prototype.removeGroupManager=function(){delete this[E]},L.prototype.getGroupFor=function(b){return b=this.getElement(b),b?b[D]:void 0}}.call("undefined"!=typeof window?window:this),function(){var f=this,e=f.jsPlumb,h=f.jsPlumbUtil,g=function(B){this.type="Flowchart",B=B||{},B.stub=null==B.stub?30:B.stub;var A,z,y=e.Connectors.AbstractConnector.apply(this,arguments),x=null==B.midpoint?0.5:B.midpoint,w=B.alwaysRespectStubs===!0,v=null,u=null,t=null!=B.cornerRadius?B.cornerRadius:0,s=(B.loopbackRadius||25,function(c){return 0>c?-1:0===c?0:1}),r=function(F,E,D,C){if(v!=E||u!=D){var o=null==v?C.sx:v,n=null==u?C.sy:u,m=o==E?"v":"h",k=s(E-o),i=s(D-n);v=E,u=D,F.push([o,n,E,D,m,k,i])}},q=function(c){return Math.sqrt(Math.pow(c[0]-c[2],2)+Math.pow(c[1]-c[3],2))},p=function(d){var c=[];return c.push.apply(c,d),c},b=function(N,M,L){for(var K,J=null,I=0;I<M.length-1;I++){if(J=J||p(M[I]),K=p(M[I+1]),t>0&&J[4]!=K[4]){var H=Math.min(t,q(J),q(K));J[2]-=J[5]*H,J[3]-=J[6]*H,K[0]+=K[5]*H,K[1]+=K[6]*H;var G=J[6]==K[5]&&1==K[5]||J[6]==K[5]&&0===K[5]&&J[5]!=K[6]||J[6]==K[5]&&-1==K[5],F=K[1]>J[3]?1:-1,E=K[0]>J[2]?1:-1,D=F==E,C=D&&G||!D&&!G?K[0]:J[2],n=D&&G||!D&&!G?J[3]:K[1];y.addSegment(N,"Straight",{x1:J[0],y1:J[1],x2:J[2],y2:J[3]}),y.addSegment(N,"Arc",{r:H,x1:J[2],y1:J[3],x2:K[0],y2:K[1],cx:C,cy:n,ac:G})}else{var m=J[2]==J[0]?0:J[2]>J[0]?L.lw/2:-(L.lw/2),O=J[3]==J[1]?0:J[3]>J[1]?L.lw/2:-(L.lw/2);y.addSegment(N,"Straight",{x1:J[0]-m,y1:J[1]-O,x2:J[2]+m,y2:J[3]+O})}J=K}null!=K&&y.addSegment(N,"Straight",{x1:K[0],y1:K[1],x2:K[2],y2:K[3]})};this._compute=function(I,G){A=[],v=null,u=null,z=null;var D=function(){return[I.startStubX,I.startStubY,I.endStubX,I.endStubY]},C={perpendicular:D,orthogonal:D,opposite:function(a){var n=I,m="x"==a?0:1,k={x:function(){return 1==n.so[m]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1==n.so[m]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1==n.so[m]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1==n.so[m]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}};return !w&&k[a]()?{x:[(I.sx+I.tx)/2,I.startStubY,(I.sx+I.tx)/2,I.endStubY],y:[I.startStubX,(I.sy+I.ty)/2,I.endStubX,(I.sy+I.ty)/2]}[a]:[I.startStubX,I.startStubY,I.endStubX,I.endStubY]}},o=C[I.anchorOrientation](I.sourceAxis),l="x"==I.sourceAxis?0:1,i="x"==I.sourceAxis?1:0,d=o[l],c=o[i],N=o[l+2],M=o[i+2];r(A,o[0],o[1],I);var L=I.startStubX+(I.endStubX-I.startStubX)*x,K=I.startStubY+(I.endStubY-I.startStubY)*x,J={x:[0,1],y:[1,0]},H={perpendicular:function(ad){var ac=I,ab={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},aa={x:[[ac.startStubX,ac.endStubX],null,[ac.endStubX,ac.startStubX]],y:[[ac.startStubY,ac.endStubY],null,[ac.endStubY,ac.startStubY]]},Z={x:[[L,ac.startStubY],[L,ac.endStubY]],y:[[ac.startStubX,K],[ac.endStubX,K]]},Y={x:[[ac.endStubX,ac.startStubY]],y:[[ac.startStubX,ac.endStubY]]},X={x:[[ac.startStubX,ac.endStubY],[ac.endStubX,ac.endStubY]],y:[[ac.endStubX,ac.startStubY],[ac.endStubX,ac.endStubY]]},W={x:[[ac.startStubX,K],[ac.endStubX,K],[ac.endStubX,ac.endStubY]],y:[[L,ac.startStubY],[L,ac.endStubY],[ac.endStubX,ac.endStubY]]},V={x:[ac.startStubY,ac.endStubY],y:[ac.startStubX,ac.endStubX]},U=J[ad][0],T=J[ad][1],S=ac.so[U]+1,R=ac.to[T]+1,Q=-1==ac.to[T]&&V[ad][1]<V[ad][0]||1==ac.to[T]&&V[ad][1]>V[ad][0],P=aa[ad][S][0],O=aa[ad][S][1],a=ab[ad][S][R];return ac.segment==a[3]||ac.segment==a[2]&&Q?Z[ad]:ac.segment==a[2]&&P>O?Y[ad]:ac.segment==a[2]&&O>=P||ac.segment==a[1]&&!Q?W[ad]:ac.segment==a[0]||ac.segment==a[1]&&Q?X[ad]:void 0},orthogonal:function(a,Q,P,O,n){var m=I,k={x:-1==m.so[0]?Math.min(Q,O):Math.max(Q,O),y:-1==m.so[1]?Math.min(Q,O):Math.max(Q,O)}[a];return{x:[[k,P],[k,n],[O,n]],y:[[P,k],[n,k],[n,O]]}[a]},opposite:function(T,S,R,Q){var P=I,O={x:"y",y:"x"}[T],n={x:"height",y:"width"}[T],m=P["is"+T.toUpperCase()+"GreaterThanStubTimes2"];if(G.sourceEndpoint.elementId==G.targetEndpoint.elementId){var a=R+(1-G.sourceEndpoint.anchor[O])*G.sourceInfo[n]+y.maxStub;return{x:[[S,a],[Q,a]],y:[[a,S],[a,Q]]}[T]}return !m||1==P.so[l]&&S>Q||-1==P.so[l]&&Q>S?{x:[[S,K],[Q,K]],y:[[L,S],[L,Q]]}[T]:1==P.so[l]&&Q>S||-1==P.so[l]&&S>Q?{x:[[L,P.sy],[L,P.ty]],y:[[P.sx,K],[P.tx,K]]}[T]:void 0}},F=H[I.anchorOrientation](I.sourceAxis,d,c,N,M);if(F){for(var E=0;E<F.length;E++){r(A,F[E][0],F[E][1],I)}}r(A,o[2],o[3],I),r(A,I.tx,I.ty,I),b(this,A,I)}};h.extend(g,e.Connectors.AbstractConnector),e.registerConnectorType(g,"Flowchart")}.call("undefined"!=typeof window?window:this),function(){var f=this,e=f.jsPlumb,h=f.jsPlumbUtil;e.Connectors.AbstractBezierConnector=function(b){b=b||{};var o,n=b.showLoopback!==!1,m=(b.curviness||10,b.margin||5),l=(b.proximityLimit||80,b.orientation&&"clockwise"===b.orientation),k=b.loopbackRadius||25,i=!1;return this.overrideSetEditable=function(){return !i},this._compute=function(B,A){var z=A.sourcePos,y=A.targetPos,x=Math.abs(z[0]-y[0]),w=Math.abs(z[1]-y[1]);if(n&&A.sourceEndpoint.elementId===A.targetEndpoint.elementId){i=!0;var v=A.sourcePos[0],u=A.sourcePos[1]-m,t=v,s=u-k,d=t-k,c=s-k;x=2*k,w=2*k,B.points[0]=d,B.points[1]=c,B.points[2]=x,B.points[3]=w,o.addSegment(this,"Arc",{loopback:!0,x1:v-d+4,y1:u-c,startAngle:0,endAngle:2*Math.PI,r:k,ac:!l,x2:v-d-4,y2:u-c,cx:t-d,cy:s-c})}else{i=!1,this._computeBezier(B,A,z,y,x,w)}},o=e.Connectors.AbstractConnector.apply(this,arguments)},h.extend(e.Connectors.AbstractBezierConnector,e.Connectors.AbstractConnector);var g=function(b){b=b||{},this.type="Bezier";var l=e.Connectors.AbstractBezierConnector.apply(this,arguments),k=b.curviness||150,i=10;this.getCurviness=function(){return k},this._findControlPoint=function(t,s,r,q,p,o,n){var m=o[0]!=n[0]||o[1]==n[1],d=[];return m?(0===n[0]?d.push(r[0]<s[0]?t[0]+i:t[0]-i):d.push(t[0]+k*n[0]),0===n[1]?d.push(r[1]<s[1]?t[1]+i:t[1]-i):d.push(t[1]+k*o[1])):(0===o[0]?d.push(s[0]<r[0]?t[0]+i:t[0]-i):d.push(t[0]-k*o[0]),0===o[1]?d.push(s[1]<r[1]?t[1]+i:t[1]-i):d.push(t[1]+k*n[1])),d},this._computeBezier=function(z,y,x,w,v,u){var t,s,r=this.getGeometry(),q=x[0]<w[0]?v:0,p=x[1]<w[1]?u:0,o=x[0]<w[0]?0:v,c=x[1]<w[1]?0:u;(this.hasBeenEdited()||this.isEditing())&&null!=r&&null!=r.controlPoints&&null!=r.controlPoints[0]&&null!=r.controlPoints[1]?(t=r.controlPoints[0],s=r.controlPoints[1]):(t=this._findControlPoint([q,p],x,w,y.sourceEndpoint,y.targetEndpoint,z.so,z.to),s=this._findControlPoint([o,c],w,x,y.targetEndpoint,y.sourceEndpoint,z.to,z.so)),l.setGeometry({controlPoints:[t,s]},!0),l.addSegment(this,"Bezier",{x1:q,y1:p,x2:o,y2:c,cp1x:t[0],cp1y:t[1],cp2x:s[0],cp2y:s[1]})}};h.extend(g,e.Connectors.AbstractBezierConnector),e.registerConnectorType(g,"Bezier")}.call("undefined"!=typeof window?window:this),function(){var h=this,g=h.jsPlumb,m=h.jsPlumbUtil,l=function(f,e,o,n){return o>=f&&e>=n?1:o>=f&&n>=e?2:f>=o&&n>=e?3:4},k=function(v,u,t,s,r,q,p,o,n){return n>=o?[v,u]:1===t?s[3]<=0&&r[3]>=1?[v+(s[2]<0.5?-1*q:q),u]:s[2]>=1&&r[2]<=0?[v,u+(s[3]<0.5?-1*p:p)]:[v+-1*q,u+-1*p]:2===t?s[3]>=1&&r[3]<=0?[v+(s[2]<0.5?-1*q:q),u]:s[2]>=1&&r[2]<=0?[v,u+(s[3]<0.5?-1*p:p)]:[v+q,u+-1*p]:3===t?s[3]>=1&&r[3]<=0?[v+(s[2]<0.5?-1*q:q),u]:s[2]<=0&&r[2]>=1?[v,u+(s[3]<0.5?-1*p:p)]:[v+-1*q,u+-1*p]:4===t?s[3]<=0&&r[3]>=1?[v+(s[2]<0.5?-1*q:q),u]:s[2]<=0&&r[2]>=1?[v,u+(s[3]<0.5?-1*p:p)]:[v+q,u+-1*p]:void 0},i=function(b){b=b||{},this.type="StateMachine";var p,o=g.Connectors.AbstractBezierConnector.apply(this,arguments),n=b.curviness||10,e=b.margin||5,d=b.proximityLimit||80;b.orientation&&"clockwise"===b.orientation,this._computeBezier=function(Q,P,O,N,M,L){var K=P.sourcePos[0]<P.targetPos[0]?0:M,J=P.sourcePos[1]<P.targetPos[1]?0:L,I=P.sourcePos[0]<P.targetPos[0]?M:0,H=P.sourcePos[1]<P.targetPos[1]?L:0;0===P.sourcePos[2]&&(K-=e),1===P.sourcePos[2]&&(K+=e),0===P.sourcePos[3]&&(J-=e),1===P.sourcePos[3]&&(J+=e),0===P.targetPos[2]&&(I-=e),1===P.targetPos[2]&&(I+=e),0===P.targetPos[3]&&(H-=e),1===P.targetPos[3]&&(H+=e);var G,F,E,D,C=(K+I)/2,B=(J+H)/2,A=l(K,J,I,H),f=Math.sqrt(Math.pow(I-K,2)+Math.pow(H-J,2)),c=o.getGeometry();(this.hasBeenEdited()||this.isEditing())&&null!=c?(G=c.controlPoints[0][0],E=c.controlPoints[0][1],F=c.controlPoints[1][0],D=c.controlPoints[1][1]):(p=k(C,B,A,P.sourcePos,P.targetPos,n,n,f,d),G=p[0],F=p[0],E=p[1],D=p[1],o.setGeometry({controlPoints:[p,p]},!0)),o.addSegment(this,"Bezier",{x1:I,y1:H,x2:K,y2:J,cp1x:G,cp1y:E,cp2x:F,cp2y:D})}};m.extend(i,g.Connectors.AbstractBezierConnector),g.registerConnectorType(i,"StateMachine")}.call("undefined"!=typeof window?window:this),function(){var ad=this,ac=ad.jsPlumb,ab=ad.jsPlumbUtil,aa={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Z="stroke-dasharray",Y="dashstyle",X="linearGradient",W="radialGradient",V="defs",U="fill",T="stop",S="stroke",R="stroke-width",Q="style",P="none",O="jsplumb_gradient_",M="lineWidth",K={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},J=function(e,d){for(var f in d){e.setAttribute(f,""+d[f])}},I=function(d,c){return c=c||{},c.version="1.1",c.xmlns=K.xhtml,jsPlumb.createElementNS(K.svg,d,null,null,c)},H=function(b){return"position:absolute;left:"+b[0]+"px;top:"+b[1]+"px"},G=function(e){for(var d=e.querySelectorAll(" defs,linearGradient,radialGradient"),f=0;f<d.length;f++){d[f].parentNode.removeChild(d[f])}},F=function(y,x,w,v,t){var p=O+t._jsPlumb.instance.idstamp();G(y);var l;l=w.gradient.offset?I(W,{id:p}):I(X,{id:p,gradientUnits:"userSpaceOnUse"});var k=I(V);y.appendChild(k),k.appendChild(l);for(var i=0;i<w.gradient.stops.length;i++){var h=1==t.segment||2==t.segment?i:w.gradient.stops.length-1-i,g=w.gradient.stops[h][1],A=I(T,{offset:Math.floor(100*w.gradient.stops[i][0])+"%","stop-color":g});l.appendChild(A)}var z=w.strokeStyle?S:U;x.setAttribute(z,"url(#"+p+")")},E=function(s,q,o,n,m){if(q.setAttribute(U,o.fillStyle?o.fillStyle:P),q.setAttribute(S,o.strokeStyle?o.strokeStyle:P),o.gradient?F(s,q,o,n,m):(G(s),q.setAttribute(Q,"")),o.lineWidth&&q.setAttribute(R,o.lineWidth),o[Y]&&o[M]&&!o[Z]){var l=-1==o[Y].indexOf(",")?" ":",",f=o[Y].split(l),e="";f.forEach(function(b){e+=Math.floor(b*o.lineWidth)+l}),q.setAttribute(Z,e)}else{o[Z]&&q.setAttribute(Z,o[Z])}for(var d in aa){o[d]&&q.setAttribute(aa[d],o[d])}},D=function(e,d,f){e.childNodes.length>f?e.insertBefore(d,e.childNodes[f]):e.appendChild(d)};ab.svg={node:I,attr:J,pos:H};var C=function(b){var m=b.pointerEventsSpec||"all",l={};ac.jsPlumbUIComponent.apply(this,b.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var k=b.cssClass+" "+(b.originalArgs[0].cssClass||""),i={style:"",width:0,height:0,"pointer-events":m,position:"absolute"};this.svg=I("svg",i),b.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),ab.sizeElement(this.canvas,0,0,1,1),this.canvas.className=k):(J(this.svg,{"class":k}),this.canvas=this.svg),b._jsPlumb.appendElement(this.canvas,b.originalArgs[0].parent),b.useDivWrapper&&this.canvas.appendChild(this.svg);var c=[this.canvas];return this.getDisplayElements=function(){return c},this.appendDisplayElement=function(d){c.push(d)},this.paint=function(a,q,p){if(null!=a){var o,n=[this.x,this.y],e=[this.w,this.h];null!=p&&(p.xmin<0&&(n[0]+=p.xmin),p.ymin<0&&(n[1]+=p.ymin),e[0]=p.xmax+(p.xmin<0?-p.xmin:0),e[1]=p.ymax+(p.ymin<0?-p.ymin:0)),b.useDivWrapper?(ab.sizeElement(this.canvas,n[0],n[1],e[0],e[1]),n[0]=0,n[1]=0,o=H([0,0])):o=H([n[0],n[1]]),l.paint.apply(this,arguments),J(this.svg,{style:o,width:e[0]||0,height:e[1]||0})}},{renderer:l}};ab.extend(C,ac.jsPlumbUIComponent,{cleanup:function(b){b||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(d){var c=d.getContainer();this.canvas&&null==this.canvas.parentNode&&c.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&c.appendChild(this.bgCanvas)},setVisible:function(b){this.canvas&&(this.canvas.style.display=b?"block":"none")}}),ac.ConnectorRenderers.svg=function(b){var h=this,g=C.apply(this,[{cssClass:b._jsPlumb.connectorClass+(this.isEditable()?" "+b._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:b._jsPlumb}]),f=this.setEditable;this.setEditable=function(d){var c=f.apply(this,[d]);jsPlumb[c?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)},g.renderer.paint=function(y,x,w){var v=h.getSegments(),u="",t=[0,0];if(w.xmin<0&&(t[0]=-w.xmin),w.ymin<0&&(t[1]=-w.ymin),v.length>0){for(var s=0;s<v.length;s++){u+=ac.Segments.svg.SegmentRenderer.getPath(v[s]),u+=" "}var r={d:u,transform:"translate("+t[0]+","+t[1]+")","pointer-events":b["pointer-events"]||"visibleStroke"},q=null,p=[h.x,h.y,h.w,h.h];if(y.outlineColor){var c=y.outlineWidth||1,a=y.lineWidth+2*c;q=ac.extend({},y),delete q.gradient,q.strokeStyle=y.outlineColor,q.lineWidth=a,null==h.bgPath?(h.bgPath=I("path",r),ac.addClass(h.bgPath,ac.connectorOutlineClass),D(h.svg,h.bgPath,0)):J(h.bgPath,r),E(h.svg,h.bgPath,q,p,h)}null==h.path?(h.path=I("path",r),D(h.svg,h.path,y.outlineColor?1:0)):J(h.path,r),E(h.svg,h.path,y,p,h)}}},ab.extend(ac.ConnectorRenderers.svg,C),ac.Segments.svg={SegmentRenderer:{getPath:function(b){return{Straight:function(){var a=b.getCoordinates();return"M "+a.x1+" "+a.y1+" L "+a.x2+" "+a.y2},Bezier:function(){var a=b.params;return"M "+a.x1+" "+a.y1+" C "+a.cp1x+" "+a.cp1y+" "+a.cp2x+" "+a.cp2y+" "+a.x2+" "+a.y2},Arc:function(){var a=b.params,f=b.sweep>Math.PI?1:0,e=b.anticlockwise?0:1;return"M"+b.x1+" "+b.y1+" A "+b.radius+" "+a.r+" 0 "+f+","+e+" "+b.x2+" "+b.y2}}[b.type]()}}};var N=ac.SvgEndpoint=function(b){var d=C.apply(this,[{cssClass:b._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:b._jsPlumb}]);d.renderer.paint=function(e){var f=ac.extend({},e);f.outlineColor&&(f.strokeWidth=f.outlineWidth,f.strokeStyle=f.outlineColor),null==this.node?(this.node=this.makeNode(f),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),E(this.svg,this.node,f,[this.x,this.y,this.w,this.h],this),H(this.node,[this.x,this.y])}.bind(this)};ab.extend(N,C),ac.Endpoints.svg.Dot=function(){ac.Endpoints.Dot.apply(this,arguments),N.apply(this,arguments),this.makeNode=function(){return I("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(b){J(b,{cx:this.w/2,cy:this.h/2,r:this.radius})}},ab.extend(ac.Endpoints.svg.Dot,[ac.Endpoints.Dot,N]),ac.Endpoints.svg.Rectangle=function(){ac.Endpoints.Rectangle.apply(this,arguments),N.apply(this,arguments),this.makeNode=function(){return I("rect",{width:this.w,height:this.h})},this.updateNode=function(b){J(b,{width:this.w,height:this.h})}},ab.extend(ac.Endpoints.svg.Rectangle,[ac.Endpoints.Rectangle,N]),ac.Endpoints.svg.Image=ac.Endpoints.Image,ac.Endpoints.svg.Blank=ac.Endpoints.Blank,ac.Overlays.svg.Label=ac.Overlays.Label,ac.Overlays.svg.Custom=ac.Overlays.Custom;var L=function(b,f){b.apply(this,f),ac.jsPlumbUIComponent.apply(this,f),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(d,c){if(d.component.svg&&c){null==this.path&&(this.path=I("path",{"pointer-events":"all"}),d.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,d.component),this.canvas=d.component.svg);var h=f&&1==f.length?f[0].cssClass||"":"",g=[0,0];c.xmin<0&&(g[0]=-c.xmin),c.ymin<0&&(g[1]=-c.ymin),J(this.path,{d:e(d.d),"class":h,stroke:d.strokeStyle?d.strokeStyle:null,fill:d.fillStyle?d.fillStyle:null,transform:"translate("+g[0]+","+g[1]+")"})}};var e=function(c){return isNaN(c.cxy.x)||isNaN(c.cxy.y)?"":"M"+c.hxy.x+","+c.hxy.y+" L"+c.tail[0].x+","+c.tail[0].y+" L"+c.cxy.x+","+c.cxy.y+" L"+c.tail[1].x+","+c.tail[1].y+" L"+c.hxy.x+","+c.hxy.y};this.transfer=function(c){c.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),c.canvas.appendChild(this.path))}};ab.extend(L,[ac.jsPlumbUIComponent,ac.Overlays.AbstractOverlay],{cleanup:function(b){null!=this.path&&(b?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(b){null!=this.path&&(this.path.style.display=b?"block":"none")}}),ac.Overlays.svg.Arrow=function(){L.apply(this,[ac.Overlays.Arrow,arguments])},ab.extend(ac.Overlays.svg.Arrow,[ac.Overlays.Arrow,L]),ac.Overlays.svg.PlainArrow=function(){L.apply(this,[ac.Overlays.PlainArrow,arguments])},ab.extend(ac.Overlays.svg.PlainArrow,[ac.Overlays.PlainArrow,L]),ac.Overlays.svg.Diamond=function(){L.apply(this,[ac.Overlays.Diamond,arguments])},ab.extend(ac.Overlays.svg.Diamond,[ac.Overlays.Diamond,L]),ac.Overlays.svg.GuideLines=function(){var b,k,i=null,h=this;ac.Overlays.GuideLines.apply(this,arguments),this.paint=function(a,d){null==i&&(i=I("path"),a.connector.svg.appendChild(i),h.attachListeners(i,a.connector),h.attachListeners(i,h),b=I("path"),a.connector.svg.appendChild(b),h.attachListeners(b,a.connector),h.attachListeners(b,h),k=I("path"),a.connector.svg.appendChild(k),h.attachListeners(k,a.connector),h.attachListeners(k,h));var c=[0,0];d.xmin<0&&(c[0]=-d.xmin),d.ymin<0&&(c[1]=-d.ymin),J(i,{d:g(a.head,a.tail),stroke:"red",fill:null,transform:"translate("+c[0]+","+c[1]+")"}),J(b,{d:g(a.tailLine[0],a.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+c[0]+","+c[1]+")"}),J(k,{d:g(a.headLine[0],a.headLine[1]),stroke:"green",fill:null,transform:"translate("+c[0]+","+c[1]+")"})};var g=function(d,c){return"M "+d.x+","+d.y+" L"+c.x+","+c.y}},ab.extend(ac.Overlays.svg.GuideLines,ac.Overlays.GuideLines)}.call("undefined"!=typeof window?window:this),function(){var k=this,i=k.jsPlumb,q=k.jsPlumbUtil,p=k.Katavorio,o=k.Biltong,n=function(e,d){d=d||"main";var s="_katavorio_"+d,r=e[s],h=e.getEventManager();return r||(r=new p({bind:h.on,unbind:h.off,getSize:jsPlumb.getSize,getPosition:function(a,g){var f=e.getOffset(a,g,a._katavorioDrag?a.offsetParent:null);return[f.left,f.top]},setPosition:function(f,c){f.style.left=c[0]+"px",f.style.top=c[1]+"px"},addClass:jsPlumb.addClass,removeClass:jsPlumb.removeClass,intersects:o.intersects,indexOf:function(f,c){return f.indexOf(c)},css:{noSelect:e.dragSelectClass,droppable:"jsplumb-droppable",draggable:"jsplumb-draggable",drag:"jsplumb-drag",selected:"jsplumb-drag-selected",active:"jsplumb-drag-active",hover:"jsplumb-drag-hover",ghostProxy:"jsplumb-ghost-proxy"}}),e[s]=r,e.bind("zoom",r.setZoom)),r},m=function(e,c){var f=function(g){if(null!=c[g]){if(q.isString(c[g])){var b=c[g].match(/-=/)?-1:1,a=c[g].substring(2);return e[g]+b*a}return c[g]}return e[g]};return[f("left"),f("top")]};i.extend(k.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(b){return null==b?null:(b="string"==typeof b?b:null!=b.length&&null==b.enctype?b[0]:b,"string"==typeof b?document.getElementById(b):b)},removeElement:function(b){n(this).elementRemoved(b),this.getEventManager().remove(b)},doAnimate:function(D,C,B){B=B||{};var A=this.getOffset(D),z=m(A,C),y=z[0]-A.left,x=z[1]-A.top,w=B.duration||250,v=15,u=w/v,t=v/w*y,s=v/w*x,r=0,g=setInterval(function(){jsPlumb.setPosition(D,{left:A.left+t*(r+1),top:A.top+s*(r+1)}),null!=B.step&&B.step(r,Math.ceil(u)),r++,r>=u&&(window.clearInterval(g),null!=B.complete&&B.complete())},v)},destroyDraggable:function(d,c){n(this,c).destroyDraggable(d)},destroyDroppable:function(d,c){n(this,c).destroyDroppable(d)},initDraggable:function(e,d,f){n(this,f).draggable(e,d)},initDroppable:function(e,d,f){n(this,f).droppable(e,d)},isAlreadyDraggable:function(b){return null!=b._katavorioDrag},isDragSupported:function(){return !0},isDropSupported:function(){return !0},isElementDraggable:function(b){return b=jsPlumb.getElement(b),b._katavorioDrag&&b._katavorioDrag.isEnabled()},getDragObject:function(b){return b[0].drag.getDragElement()},getDragScope:function(b){return b._katavorioDrag&&b._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(b){return b[0].e},getUIPosition:function(g){var f=g[0].el;if(null==f.offsetParent){return null}var s=g[0].finalPos||g[0].pos,r={left:s[0],top:s[1]};if(f._katavorioDrag&&f.offsetParent!==this.getContainer()){var h=this.getOffset(f.offsetParent);r.left+=h.left,r.top+=h.top}return r},setDragFilter:function(e,d,f){e._katavorioDrag&&e._katavorioDrag.setFilter(d,f)},setElementDraggable:function(d,c){d=jsPlumb.getElement(d),d._katavorioDrag&&d._katavorioDrag.setEnabled(c)},setDragScope:function(d,c){d._katavorioDrag&&d._katavorioDrag.k.setDragScope(d,c)},setDropScope:function(d,c){d._katavorioDrop&&d._katavorioDrop.length>0&&d._katavorioDrop[0].k.setDropScope(d,c)},addToPosse:function(e){var d=Array.prototype.slice.call(arguments,1),f=n(this);jsPlumb.each(e,function(b){b=[jsPlumb.getElement(b)],b.push.apply(b,d),f.addToPosse.apply(f,b)})},setPosse:function(e){var d=Array.prototype.slice.call(arguments,1),f=n(this);jsPlumb.each(e,function(b){b=[jsPlumb.getElement(b)],b.push.apply(b,d),f.setPosse.apply(f,b)})},removeFromPosse:function(e){var d=Array.prototype.slice.call(arguments,1),f=n(this);jsPlumb.each(e,function(b){b=[jsPlumb.getElement(b)],b.push.apply(b,d),f.removeFromPosse.apply(f,b)})},removeFromAllPosses:function(d){var c=n(this);jsPlumb.each(d,function(b){c.removeFromAllPosses(jsPlumb.getElement(b))})},setPosseState:function(f,e,h){var g=n(this);jsPlumb.each(f,function(b){g.setPosseState(jsPlumb.getElement(b),e,h)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(b){b._katavorioDrag&&b._katavorioDrag.abort()},addToDragSelection:function(b){n(this).select(b)},removeFromDragSelection:function(b){n(this).deselect(b)},clearDragSelection:function(){n(this).deselectAll()},trigger:function(f,e,h,g){this.getEventManager().trigger(f,e,h,g)},doReset:function(){for(var b in this){0===b.indexOf("_katavorio_")&&this[b].reset()}}});var l=function(d){var c=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!=typeof document.body&&null!=document.body?d():setTimeout(c,9)};c()};l(i.init)}.call("undefined"!=typeof window?window:this);PrimeFaces.widget.Diagram=PrimeFaces.widget.DeferredWidget.extend({init:function(a){this._super(a);this.renderDeferred()},_render:function(){var a=this;jsPlumb.ready(function(){a.canvas=jsPlumb.getInstance({Container:a.jq.attr("id"),Connector:a.cfg.defaultConnector,PaintStyle:a.cfg.paintStyle,HoverPaintStyle:a.cfg.hoverPaintStyle,ConnectionOverlays:a.cfg.connectionOverlays,ConnectionsDetachable:(a.cfg.connectionsDetachable===false)?false:true,MaxConnections:a.cfg.maxConnections});a.canvas.doWhileSuspended(function(){a.initEndPoints();a.initConnections();a.canvas.draggable(a.jq.children(".ui-diagram-draggable"),{containment:a.cfg.containment})});a.bindEvents()})},initEndPoints:function(){for(var b=0;b<this.cfg.endPoints.length;b++){var a=this.cfg.endPoints[b];this.canvas.addEndpoint(a.element,a)}},initConnections:function(){if(this.cfg.connections){for(var a=0;a<this.cfg.connections.length;a++){this.canvas.connect(this.cfg.connections[a])}}},bindEvents:function(){var a=this;this.canvas.bind("connection",function(b){a.onConnect(b)});this.canvas.bind("connectionDetached",function(b){if(b.targetId&&b.targetId.indexOf(a.id)===0){a.onDisconnect(b)}});this.canvas.bind("connectionMoved",function(b){a.onConnectionChange(b)})},onConnect:function(c){var a={source:this.id,process:this.id,params:[{name:this.id+"_connect",value:true},{name:this.id+"_sourceId",value:c.sourceId.substring(this.id.length+1)},{name:this.id+"_targetId",value:c.targetId.substring(this.id.length+1)},{name:this.id+"_sourceEndPointId",value:c.sourceEndpoint.getUuid()},{name:this.id+"_targetEndPointId",value:c.targetEndpoint.getUuid()}]};if(this.connectionChanged){a.params.push({name:this.id+"_connectionChanged",value:true})}else{this.connectionChanged=false}if(this.hasBehavior("connect")){var b=this.cfg.behaviors.connect;b.call(this,a)}else{PrimeFaces.ajax.Request.handle(a)}},onDisconnect:function(c){var a={source:this.id,process:this.id,params:[{name:this.id+"_disconnect",value:true},{name:this.id+"_sourceId",value:c.sourceId.substring(this.id.length+1)},{name:this.id+"_targetId",value:c.targetId.substring(this.id.length+1)},{name:this.id+"_sourceEndPointId",value:c.sourceEndpoint.getUuid()},{name:this.id+"_targetEndPointId",value:c.targetEndpoint.getUuid()}]};if(this.hasBehavior("disconnect")){var b=this.cfg.behaviors.disconnect;b.call(this,a)}else{PrimeFaces.ajax.Request.handle(a)}},onConnectionChange:function(c){this.connectionChanged=true;var a={source:this.id,process:this.id,params:[{name:this.id+"_connectionChange",value:true},{name:this.id+"_originalSourceId",value:c.originalSourceId.substring(this.id.length+1)},{name:this.id+"_newSourceId",value:c.newSourceId.substring(this.id.length+1)},{name:this.id+"_originalTargetId",value:c.originalTargetId.substring(this.id.length+1)},{name:this.id+"_newTargetId",value:c.newTargetId.substring(this.id.length+1)},{name:this.id+"_originalSourceEndPointId",value:c.originalSourceEndpoint.getUuid()},{name:this.id+"_newSourceEndPointId",value:c.newSourceEndpoint.getUuid()},{name:this.id+"_originalTargetEndPointId",value:c.originalTargetEndpoint.getUuid()},{name:this.id+"_newTargetEndPointId",value:c.newTargetEndpoint.getUuid()}]};if(this.hasBehavior("connectionChange")){var b=this.cfg.behaviors.connectionChange;b.call(this,a)}else{PrimeFaces.ajax.Request.handle(a)}}});